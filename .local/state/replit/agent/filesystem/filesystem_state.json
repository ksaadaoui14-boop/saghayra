{"file_contents":{"design_guidelines.md":{"content":"# Sghayra Tours Design Guidelines\n\n## Design Approach: Reference-Based (Travel Industry)\nDrawing inspiration from Airbnb and Booking.com for their sophisticated travel interfaces, combined with desert tourism authenticity. This experience-focused approach emphasizes visual storytelling and emotional engagement.\n\n## Core Design Elements\n\n### A. Color Palette\n**Primary Colors:**\n- Desert Sand: 35 25% 85% (light mode backgrounds)\n- Deep Ochre: 25 60% 45% (primary brand color)\n- Desert Night: 220 15% 15% (dark mode backgrounds)\n\n**Supporting Colors:**\n- Sahara Blue: 200 40% 60% (accent for CTAs and links)\n- Warm White: 40 10% 95% (light mode text backgrounds)\n- Sunset Orange: 15 70% 55% (used sparingly for highlights)\n\n**Dark Mode Adaptations:**\n- Maintain warm desert undertones\n- Use deeper ochre variants for brand elements\n- Ensure consistent contrast across all form inputs\n\n### B. Typography\n- **Primary:** Inter (Google Fonts) - clean, multilingual support\n- **Accent:** Playfair Display (Google Fonts) - for headings and Arabic script elegance\n- **Hierarchy:** \n  - Hero: 3xl-4xl bold\n  - Section headers: xl-2xl semibold\n  - Body: base regular\n  - Captions: sm medium\n\n### C. Layout System\n**Spacing Primitives:** Tailwind units of 4, 8, 12, 16\n- Consistent rhythm using p-4, m-8, gap-12 patterns\n- Generous whitespace for premium feel\n- 16-unit sections for clear content separation\n\n### D. Component Library\n**Navigation:** Horizontal navbar with language/currency switchers\n**Cards:** Elevated design with subtle shadows and rounded corners\n**Forms:** Clean inputs with desert-inspired focus states\n**Buttons:** Primary (ochre), secondary (outline), and ghost variants\n**Gallery:** Masonry-style photo grids with overlay information\n**Booking:** Multi-step wizard with progress indicators\n\n## Images\n**Hero Section:** Large immersive background video/image of Sahara desert with camel silhouettes at sunset. Overlay with translucent booking widget.\n\n**Activity Cards:** High-quality photos of desert activities, traditional meals, and cultural experiences. Use 16:9 aspect ratio for consistency.\n\n**Gallery Sections:** Authentic photography showcasing:\n- Desert landscapes and dunes\n- Traditional Berber culture and clothing\n- Camel trekking and camp setups\n- Local cuisine and dining experiences\n- Star-filled night skies\n\n**Testimonial Backgrounds:** Subtle desert texture overlays behind customer reviews.\n\n## Visual Treatment\n**Gradients:** Warm sunset gradients (ochre to orange) for hero overlays and CTA sections. Use sparingly for maximum impact.\n\n**Backgrounds:** Subtle sand texture patterns for section breaks. Maintain low opacity to preserve readability.\n\n**Interactive Elements:** Smooth micro-animations on hover states. Desert-inspired loading states with sand particle effects.\n\n## Key Principles\n- **Authentic Desert Aesthetic:** Warm, inviting colors that reflect Sahara's natural beauty\n- **Cultural Sensitivity:** Respectful representation of Berber heritage and traditions  \n- **Multilingual Excellence:** Seamless RTL support for Arabic with consistent visual hierarchy\n- **Premium Experience:** Sophisticated design that builds trust for international bookings\n- **Mobile-First:** Touch-friendly interfaces optimized for tourist mobile usage","size_bytes":3283},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"Playfair Display\", \"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      spacing: {\n        '18': '4.5rem',\n        '88': '22rem',\n        '128': '32rem',\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4176},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"server/auth.ts":{"content":"import jwt from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\nimport type { Request, Response, NextFunction } from 'express';\nimport { storage } from './storage';\nimport type { AdminUser } from '@shared/schema';\n\n// JWT payload interface\ninterface JWTPayload {\n  adminId: string;\n  username: string;\n  email: string;\n  role: string;\n  iat?: number;\n  exp?: number;\n}\n\n// Extended request interface for authenticated admin\ninterface AuthenticatedRequest extends Request {\n  admin?: AdminUser;\n}\n\n// JWT configuration\nconst JWT_SECRET = process.env.SESSION_SECRET;\nconst JWT_EXPIRES_IN = '24h'; // 24 hours\n\nif (!JWT_SECRET) {\n  throw new Error('SESSION_SECRET environment variable is required for JWT authentication');\n}\n\n// Hash password utility\nexport async function hashPassword(password: string): Promise<string> {\n  const saltRounds = 12;\n  return await bcrypt.hash(password, saltRounds);\n}\n\n// Verify password utility\nexport async function verifyPassword(plainPassword: string, hashedPassword: string): Promise<boolean> {\n  return await bcrypt.compare(plainPassword, hashedPassword);\n}\n\n// Generate JWT token\nexport function generateJWT(admin: AdminUser): string {\n  const payload: JWTPayload = {\n    adminId: admin.id,\n    username: admin.username,\n    email: admin.email,\n    role: admin.role,\n  };\n  \n  return jwt.sign(payload, JWT_SECRET!, { expiresIn: JWT_EXPIRES_IN });\n}\n\n// Verify JWT token\nexport function verifyJWT(token: string): JWTPayload | null {\n  try {\n    const decoded = jwt.verify(token, JWT_SECRET!) as any;\n    return {\n      adminId: decoded.adminId,\n      username: decoded.username,\n      email: decoded.email,\n      role: decoded.role,\n      iat: decoded.iat,\n      exp: decoded.exp\n    };\n  } catch (error) {\n    console.warn('JWT verification failed:', error instanceof Error ? error.message : 'Unknown error');\n    return null;\n  }\n}\n\n// Admin authentication middleware\nexport async function requireAdminAuth(req: AuthenticatedRequest, res: Response, next: NextFunction) {\n  try {\n    // Check for JWT token in Authorization header (Bearer token) or cookies\n    const authHeader = req.headers.authorization;\n    const cookieToken = req.headers.cookie?.split(';')\n      .find(cookie => cookie.trim().startsWith('admin_token='))\n      ?.split('=')[1];\n    \n    let token: string | undefined;\n    \n    if (authHeader && authHeader.startsWith('Bearer ')) {\n      token = authHeader.substring(7); // Remove 'Bearer ' prefix\n    } else if (cookieToken) {\n      token = cookieToken;\n    }\n    \n    if (!token) {\n      return res.status(401).json({ \n        error: 'Authentication required', \n        details: 'JWT token missing. Please log in to access admin features.' \n      });\n    }\n    \n    // Verify the JWT token\n    const payload = verifyJWT(token);\n    if (!payload) {\n      return res.status(401).json({ \n        error: 'Invalid or expired token', \n        details: 'Please log in again to continue.' \n      });\n    }\n    \n    // Get the admin user from database to ensure they still exist\n    const admin = await storage.getAdminUser(payload.adminId);\n    if (!admin) {\n      return res.status(401).json({ \n        error: 'Admin user not found', \n        details: 'The admin account may have been removed.' \n      });\n    }\n    \n    // Update last login timestamp\n    await storage.updateAdminUserLastLogin(admin.id);\n    \n    // Add admin to request object for downstream use\n    req.admin = admin;\n    \n    next();\n  } catch (error) {\n    console.error('Admin authentication error:', error);\n    return res.status(500).json({ \n      error: 'Authentication system error', \n      details: 'Please try again or contact support.' \n    });\n  }\n}\n\n// Admin login function\nexport async function adminLogin(username: string, password: string): Promise<{ admin: AdminUser; token: string } | null> {\n  try {\n    // Find admin by username or email\n    let admin = await storage.getAdminUserByUsername(username);\n    if (!admin) {\n      admin = await storage.getAdminUserByEmail(username);\n    }\n    \n    if (!admin) {\n      return null; // Admin not found\n    }\n    \n    // Verify password\n    const isValidPassword = await verifyPassword(password, admin.password);\n    if (!isValidPassword) {\n      return null; // Invalid password\n    }\n    \n    // Generate JWT token\n    const token = generateJWT(admin);\n    \n    // Update last login\n    await storage.updateAdminUserLastLogin(admin.id);\n    \n    return { admin, token };\n  } catch (error) {\n    console.error('Admin login error:', error);\n    return null;\n  }\n}\n\n// Create default admin user if none exist\nexport async function createDefaultAdminIfNeeded(): Promise<void> {\n  try {\n    // Check if any admin users exist\n    const existingAdmin = await storage.getAdminUserByUsername('admin');\n    if (existingAdmin) {\n      return; // Admin already exists\n    }\n    \n    // Create default admin\n    const defaultPassword = 'admin123!'; // Should be changed in production\n    const hashedPassword = await hashPassword(defaultPassword);\n    \n    const defaultAdmin = {\n      username: 'admin',\n      email: 'admin@sghayratours.com',\n      password: hashedPassword,\n      role: 'super_admin'\n    };\n    \n    await storage.createAdminUser(defaultAdmin);\n    \n    console.log('✅ Default admin user created:');\n    console.log('   Username: admin');\n    console.log('   Email: admin@sghayratours.com');\n    console.log('   Password: admin123!');\n    console.log('   ⚠️  IMPORTANT: Change the default password after first login!');\n    \n  } catch (error) {\n    console.error('❌ Failed to create default admin user:', error);\n  }\n}","size_bytes":5615},"server/db.ts":{"content":"import path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport dotenv from \"dotenv\";\n\n// Get the absolute path to the .env file in the root\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\ndotenv.config({ path: path.resolve(__dirname, \"../.env\") });\n\nimport { Pool, neonConfig } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-serverless\";\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\n// Setup Neon WebSocket with custom options for Replit environment\nclass SecureWebSocket extends ws {\n  constructor(address: string | URL, protocols?: string | string[]) {\n    const options = {\n      rejectUnauthorized: false, // Allow self-signed certs in Replit dev environment\n    };\n    super(address, protocols, options);\n  }\n}\n\nneonConfig.webSocketConstructor = SecureWebSocket as any;\n\n// Ensure DATABASE_URL is set\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL must be set. Did you forget to provision a database?\");\n}\n\n// Create connection pool and Drizzle client\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":1206},"server/index.ts":{"content":"import dotenv from 'dotenv';\ndotenv.config({ path: './.env' });\n\nconsole.log(\"Loaded DATABASE_URL:\", process.env.DATABASE_URL);\nimport express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\nserver.listen(\n  {\n    port,\n    host: \"0.0.0.0\", // or \"127.0.0.1\" if you want local only\n  },\n  () => {\n    log(`serving on port ${port}`);\n  }\n);\n})();\n","size_bytes":2219},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertActivitySchema, createBookingRequestSchema, insertGalleryItemSchema, insertSiteSettingSchema, siteSettingValueSchema, bookings, type Activity, type InsertActivity, type Booking, type CreateBookingRequest, type GalleryItem, type InsertGalleryItem, type SiteSetting, type InsertSiteSetting } from \"@shared/schema\";\nimport { fromZodError } from \"zod-validation-error\";\nimport { db } from \"./db\";\nimport { sql, eq, and, gte, lte, ne } from \"drizzle-orm\";\nimport { requireAdminAuth, adminLogin, createDefaultAdminIfNeeded } from \"./auth\";\nimport { sendBookingConfirmationEmail, sendBookingStatusUpdateEmail } from \"./email\";\nimport { z } from \"zod\";\nimport { ObjectStorageService, ObjectNotFoundError } from \"./objectStorage\";\nimport { ObjectPermission } from \"./objectAcl\";\n\n// Simple hash function for generating consistent lock IDs\nfunction hashCode(str: string): number {\n  let hash = 0;\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i);\n    hash = ((hash << 5) - hash) + char;\n    hash = hash & hash; // Convert to 32-bit integer\n  }\n  return hash;\n}\n\n// Admin login schema for validation\nconst adminLoginSchema = z.object({\n  username: z.string().min(1, \"Username is required\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Initialize default admin user if none exists\n  await createDefaultAdminIfNeeded();\n\n  // Admin Authentication API Routes\n  \n  // POST /api/admin/login - Admin login\n  app.post(\"/api/admin/login\", async (req, res) => {\n    try {\n      const result = adminLoginSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        const validationError = fromZodError(result.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n      \n      const { username, password } = result.data;\n      const loginResult = await adminLogin(username, password);\n      \n      if (!loginResult) {\n        // Don't reveal whether username or password was wrong for security\n        return res.status(401).json({ \n          error: \"Invalid credentials\",\n          details: \"Username or password is incorrect\"\n        });\n      }\n      \n      const { admin, token } = loginResult;\n      \n      // Set secure HTTP-only cookie with the JWT token\n      res.cookie('admin_token', token, {\n        httpOnly: true,\n        secure: process.env.NODE_ENV === 'production', // HTTPS only in production\n        sameSite: 'strict',\n        path: '/', // Match logout path\n        maxAge: 24 * 60 * 60 * 1000, // 24 hours\n      });\n      \n      // Return admin info (without password)\n      const { password: _, ...adminInfo } = admin;\n      res.json({\n        success: true,\n        admin: adminInfo,\n        message: \"Login successful\"\n        // Note: JWT token is only provided via httpOnly cookie for security\n      });\n      \n    } catch (error) {\n      console.error(\"Admin login error:\", error);\n      res.status(500).json({ error: \"Login failed due to server error\" });\n    }\n  });\n  \n  // POST /api/admin/logout - Admin logout\n  app.post(\"/api/admin/logout\", async (req, res) => {\n    // Clear the admin token cookie with matching options\n    res.clearCookie('admin_token', {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n      path: '/'\n    });\n    res.json({ success: true, message: \"Logout successful\" });\n  });\n  \n  // GET /api/admin/me - Get current admin info\n  app.get(\"/api/admin/me\", requireAdminAuth, async (req, res) => {\n    try {\n      const admin = (req as any).admin;\n      const { password: _, ...adminInfo } = admin;\n      res.json(adminInfo);\n    } catch (error) {\n      console.error(\"Error fetching admin info:\", error);\n      res.status(500).json({ error: \"Failed to fetch admin info\" });\n    }\n  });\n\n  // Activities API Routes\n  \n  // GET /api/activities - Fetch all active activities for public display\n  app.get(\"/api/activities\", async (req, res) => {\n    try {\n      const activities = await storage.getAllActivities(true); // Only active activities\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching activities:\", error);\n      res.status(500).json({ error: \"Failed to fetch activities\" });\n    }\n  });\n\n  // GET /api/activities/:id - Fetch specific activity\n  app.get(\"/api/activities/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const activity = await storage.getActivity(id);\n      \n      if (!activity) {\n        return res.status(404).json({ error: \"Activity not found\" });\n      }\n      \n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error fetching activity:\", error);\n      res.status(500).json({ error: \"Failed to fetch activity\" });\n    }\n  });\n\n  // GET /api/admin/activities - Fetch all activities for admin (including inactive)\n  app.get(\"/api/admin/activities\", requireAdminAuth, async (req, res) => {\n    try {\n      const activities = await storage.getAllActivities(false); // All activities\n      res.json(activities);\n    } catch (error) {\n      console.error(\"Error fetching admin activities:\", error);\n      res.status(500).json({ error: \"Failed to fetch activities\" });\n    }\n  });\n\n  // POST /api/admin/activities - Create new activity (admin only)\n  app.post(\"/api/admin/activities\", requireAdminAuth, async (req, res) => {\n    try {\n      const result = insertActivitySchema.safeParse(req.body);\n      \n      if (!result.success) {\n        const validationError = fromZodError(result.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n\n      const activity = await storage.createActivity(result.data);\n      res.status(201).json(activity);\n    } catch (error) {\n      console.error(\"Error creating activity:\", error);\n      res.status(500).json({ error: \"Failed to create activity\" });\n    }\n  });\n\n  // PUT /api/admin/activities/:id - Update activity (admin only)\n  app.put(\"/api/admin/activities/:id\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Validate the update data (partial update allowed)\n      const updateData = insertActivitySchema.partial().safeParse(req.body);\n      \n      if (!updateData.success) {\n        const validationError = fromZodError(updateData.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n\n      const activity = await storage.updateActivity(id, updateData.data);\n      \n      if (!activity) {\n        return res.status(404).json({ error: \"Activity not found\" });\n      }\n      \n      res.json(activity);\n    } catch (error) {\n      console.error(\"Error updating activity:\", error);\n      res.status(500).json({ error: \"Failed to update activity\" });\n    }\n  });\n\n  // DELETE /api/admin/activities/:id - Delete activity (admin only)\n  app.delete(\"/api/admin/activities/:id\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteActivity(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Activity not found\" });\n      }\n      \n      res.json({ success: true, message: \"Activity deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting activity:\", error);\n      res.status(500).json({ error: \"Failed to delete activity\" });\n    }\n  });\n\n  // Gallery API Routes\n\n  // GET /api/gallery - Fetch all active gallery items for public display\n  app.get(\"/api/gallery\", async (req, res) => {\n    try {\n      const galleryItems = await storage.getAllGalleryItems(true); // Only active items\n      res.json(galleryItems);\n    } catch (error) {\n      console.error(\"Error fetching gallery items:\", error);\n      res.status(500).json({ error: \"Failed to fetch gallery items\" });\n    }\n  });\n\n  // GET /api/gallery/:id - Fetch specific gallery item (public - only active items)\n  app.get(\"/api/gallery/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const item = await storage.getGalleryItem(id);\n      \n      if (!item || !item.isActive) {\n        return res.status(404).json({ error: \"Gallery item not found\" });\n      }\n      \n      res.json(item);\n    } catch (error) {\n      console.error(\"Error fetching gallery item:\", error);\n      res.status(500).json({ error: \"Failed to fetch gallery item\" });\n    }\n  });\n\n  // GET /api/admin/gallery - Fetch all gallery items for admin (including inactive)\n  app.get(\"/api/admin/gallery\", requireAdminAuth, async (req, res) => {\n    try {\n      const galleryItems = await storage.getAllGalleryItems(false); // All items\n      res.json(galleryItems);\n    } catch (error) {\n      console.error(\"Error fetching admin gallery items:\", error);\n      res.status(500).json({ error: \"Failed to fetch gallery items\" });\n    }\n  });\n\n  // POST /api/admin/gallery - Create new gallery item (admin only)\n  app.post(\"/api/admin/gallery\", requireAdminAuth, async (req, res) => {\n    try {\n      const result = insertGalleryItemSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        const validationError = fromZodError(result.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n\n      const galleryItem = await storage.createGalleryItem(result.data);\n      res.status(201).json(galleryItem);\n    } catch (error) {\n      console.error(\"Error creating gallery item:\", error);\n      res.status(500).json({ error: \"Failed to create gallery item\" });\n    }\n  });\n\n  // PUT /api/admin/gallery/:id - Update gallery item (admin only)\n  app.put(\"/api/admin/gallery/:id\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      // Validate the update data (partial update allowed)\n      const updateData = insertGalleryItemSchema.partial().safeParse(req.body);\n      \n      if (!updateData.success) {\n        const validationError = fromZodError(updateData.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n\n      const galleryItem = await storage.updateGalleryItem(id, updateData.data);\n      \n      if (!galleryItem) {\n        return res.status(404).json({ error: \"Gallery item not found\" });\n      }\n      \n      res.json(galleryItem);\n    } catch (error) {\n      console.error(\"Error updating gallery item:\", error);\n      res.status(500).json({ error: \"Failed to update gallery item\" });\n    }\n  });\n\n  // DELETE /api/admin/gallery/:id - Delete gallery item (admin only)\n  app.delete(\"/api/admin/gallery/:id\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteGalleryItem(id);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Gallery item not found\" });\n      }\n      \n      res.json({ success: true, message: \"Gallery item deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting gallery item:\", error);\n      res.status(500).json({ error: \"Failed to delete gallery item\" });\n    }\n  });\n\n  // Site Settings API Routes\n\n  // GET /api/settings - Get all site settings for public display\n  app.get(\"/api/settings\", async (req, res) => {\n    try {\n      const settings = await storage.getAllSiteSettings(true); // Only active settings\n      \n      // Transform to key-value pairs for easier frontend use\n      const settingsMap: { [key: string]: any } = {};\n      settings.forEach(setting => {\n        settingsMap[setting.key] = setting.value;\n      });\n      \n      res.json(settingsMap);\n    } catch (error) {\n      console.error(\"Error fetching site settings:\", error);\n      res.status(500).json({ error: \"Failed to fetch site settings\" });\n    }\n  });\n\n  // GET /api/settings/:key - Get specific setting by key (public)\n  app.get(\"/api/settings/:key\", async (req, res) => {\n    try {\n      const { key } = req.params;\n      const setting = await storage.getSiteSetting(key);\n      \n      if (!setting || !setting.isActive) {\n        return res.status(404).json({ error: \"Setting not found\" });\n      }\n      \n      res.json({ key: setting.key, value: setting.value });\n    } catch (error) {\n      console.error(\"Error fetching site setting:\", error);\n      res.status(500).json({ error: \"Failed to fetch site setting\" });\n    }\n  });\n\n  // GET /api/admin/settings - Get all settings for admin (including inactive)\n  app.get(\"/api/admin/settings\", requireAdminAuth, async (req, res) => {\n    try {\n      const settings = await storage.getAllSiteSettings(false); // All settings\n      res.json(settings);\n    } catch (error) {\n      console.error(\"Error fetching admin site settings:\", error);\n      res.status(500).json({ error: \"Failed to fetch site settings\" });\n    }\n  });\n\n  // PUT /api/admin/settings/:key - Create or update setting (admin only)\n  app.put(\"/api/admin/settings/:key\", requireAdminAuth, async (req, res) => {\n    try {\n      const { key } = req.params;\n      const { value, isActive } = req.body;\n      \n      console.log(`PUT /api/admin/settings/${key} - Request body:`, JSON.stringify(req.body, null, 2));\n      console.log(`PUT /api/admin/settings/${key} - value:`, value, typeof value, !value);\n      \n      if (!value) {\n        return res.status(400).json({ error: \"Setting value is required\" });\n      }\n      \n      // Validate the value structure using Zod\n      const result = siteSettingValueSchema.safeParse(value);\n      if (!result.success) {\n        const validationError = fromZodError(result.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n      \n      // Ensure key matches value.type for data integrity\n      if (result.data.type !== key) {\n        return res.status(400).json({ \n          error: \"Key mismatch\", \n          details: `Key '${key}' does not match value type '${result.data.type}'` \n        });\n      }\n      \n      const setting = await storage.createOrUpdateSiteSetting(key, value, isActive);\n      res.json(setting);\n    } catch (error) {\n      console.error(\"Error updating site setting:\", error);\n      res.status(500).json({ error: \"Failed to update site setting\" });\n    }\n  });\n\n  // DELETE /api/admin/settings/:key - Delete setting (admin only)\n  app.delete(\"/api/admin/settings/:key\", requireAdminAuth, async (req, res) => {\n    try {\n      const { key } = req.params;\n      const deleted = await storage.deleteSiteSetting(key);\n      \n      if (!deleted) {\n        return res.status(404).json({ error: \"Setting not found\" });\n      }\n      \n      res.json({ success: true, message: \"Setting deleted successfully\" });\n    } catch (error) {\n      console.error(\"Error deleting site setting:\", error);\n      res.status(500).json({ error: \"Failed to delete site setting\" });\n    }\n  });\n\n  // Availability API Routes\n\n  // GET /api/activities/:id/availability?from=YYYY-MM-DD&to=YYYY-MM-DD - Check availability for date range\n  app.get(\"/api/activities/:id/availability\", async (req, res) => {\n    try {\n      const { id: activityId } = req.params;\n      const { from, to } = req.query;\n      \n      if (!from || !to) {\n        return res.status(400).json({ \n          error: \"Both 'from' and 'to' date parameters are required (YYYY-MM-DD format)\" \n        });\n      }\n      \n      const fromDate = new Date(from as string);\n      const toDate = new Date(to as string);\n      \n      if (isNaN(fromDate.getTime()) || isNaN(toDate.getTime())) {\n        return res.status(400).json({ error: \"Invalid date format. Use YYYY-MM-DD\" });\n      }\n      \n      const availability = await storage.getAvailability(activityId, fromDate, toDate);\n      res.json(availability);\n    } catch (error) {\n      console.error(\"Error fetching availability:\", error);\n      res.status(500).json({ error: \"Failed to fetch availability\" });\n    }\n  });\n\n  // GET /api/activities/:id/availability/:date - Check availability for specific date\n  app.get(\"/api/activities/:id/availability/:date\", async (req, res) => {\n    try {\n      const { id: activityId, date } = req.params;\n      \n      const targetDate = new Date(date);\n      if (isNaN(targetDate.getTime())) {\n        return res.status(400).json({ error: \"Invalid date format. Use YYYY-MM-DD\" });\n      }\n      \n      const availability = await storage.getAvailabilityForDate(activityId, targetDate);\n      res.json(availability);\n    } catch (error) {\n      console.error(\"Error fetching date availability:\", error);\n      res.status(500).json({ error: \"Failed to fetch availability for date\" });\n    }\n  });\n\n  // Bookings API Routes\n\n  // GET /api/bookings/:email - Get bookings by customer email (PRIVATE - requires authentication)\n  app.get(\"/api/bookings/:email\", async (req, res) => {\n    try {\n      const { email } = req.params;\n      const authToken = req.headers['x-customer-token'] as string;\n      \n      if (!email || !email.includes('@')) {\n        return res.status(400).json({ error: \"Valid email address required\" });\n      }\n\n      // SECURITY: Require customer authentication to prevent privacy violations\n      // For now, require a simple token - in production, this would be a JWT or session\n      if (!authToken || authToken !== 'customer-access-2024') {\n        return res.status(401).json({ \n          error: \"Authentication required\", \n          details: \"Customer bookings are private. Include X-Customer-Token header for access.\" \n        });\n      }\n      \n      const bookings = await storage.getBookingsByEmail(email);\n      res.json(bookings);\n    } catch (error) {\n      console.error(\"Error fetching customer bookings:\", error);\n      res.status(500).json({ error: \"Failed to fetch bookings\" });\n    }\n  });\n\n  // POST /api/bookings - Create new booking (public endpoint for customers)\n  app.post(\"/api/bookings\", async (req, res) => {\n    try {\n      const result = createBookingRequestSchema.safeParse(req.body);\n      \n      if (!result.success) {\n        const validationError = fromZodError(result.error);\n        return res.status(400).json({ \n          error: \"Validation failed\", \n          details: validationError.message \n        });\n      }\n\n      // CRITICAL: Check if booking system is enabled\n      const bookingSettings = await storage.getSiteSetting(\"booking_info\");\n      if (bookingSettings && bookingSettings.value) {\n        const bookingInfo = bookingSettings.value as any;\n        if (bookingInfo.isBookingEnabled === false) {\n          return res.status(403).json({ \n            error: \"Bookings currently disabled\", \n            details: \"New bookings are temporarily disabled. Please contact us directly for assistance.\" \n          });\n        }\n      }\n\n      // Verify the activity exists and is active\n      const activity = await storage.getActivity(result.data.activityId);\n      if (!activity || !activity.isActive) {\n        return res.status(404).json({ error: \"Activity not found or not available\" });\n      }\n\n      // CRITICAL: Calculate price server-side for security\n      // Get the price per person from activity pricing  \n      const prices = activity.prices as { TND: number; USD: number; EUR: number };\n      const pricePerPerson = prices[result.data.currency as keyof typeof prices];\n      if (!pricePerPerson) {\n        return res.status(400).json({ error: `Price not available for currency: ${result.data.currency}` });\n      }\n\n      // CRITICAL: Enforce capacity limits to prevent overbooking\n      // Check if group size exceeds activity capacity\n      if (result.data.groupSize > activity.capacity) {\n        return res.status(400).json({ \n          error: \"Group size exceeds activity capacity\",\n          maxCapacity: activity.capacity,\n          requestedSize: result.data.groupSize\n        });\n      }\n\n      // CONCURRENCY-SAFE: Use database transaction with advisory lock to prevent race conditions\n      // Create a unique lock ID based on activity and date\n      const lockDate = result.data.bookingDate.toISOString().split('T')[0]; // YYYY-MM-DD format\n      const lockKey = `${result.data.activityId}_${lockDate}`;\n      const lockId = Math.abs(hashCode(lockKey)); // Convert to positive integer for pg_advisory_xact_lock\n\n      // Execute booking creation in a transaction with advisory lock\n      let booking;\n      try {\n        booking = await db.transaction(async (tx) => {\n          // Acquire advisory lock for this activity+date combination\n          await tx.execute(sql`SELECT pg_advisory_xact_lock(${lockId})`);\n          \n          // Re-check availability inside the lock to prevent race conditions\n          const existingBookings = await tx\n            .select()\n            .from(bookings)\n            .where(\n              and(\n                eq(bookings.activityId, result.data.activityId),\n                gte(bookings.bookingDate, new Date(result.data.bookingDate.setUTCHours(0, 0, 0, 0))),\n                lte(bookings.bookingDate, new Date(result.data.bookingDate.setUTCHours(23, 59, 59, 999))),\n                ne(bookings.status, \"cancelled\")\n              )\n            );\n          \n          const totalBookedSlots = existingBookings.reduce((total, booking) => total + booking.groupSize, 0);\n          const slotsRemaining = Math.max(0, activity.capacity - totalBookedSlots);\n\n          if (result.data.groupSize > slotsRemaining) {\n            throw new Error(`CAPACITY_EXCEEDED:${slotsRemaining}:${result.data.groupSize}`);\n          }\n\n          // Calculate price inside transaction for consistency\n          const totalPrice = pricePerPerson * result.data.groupSize;\n          \n          // Get deposit percentage from booking settings (default to 10% if not configured)\n          let depositPercentage = 0.1; // Default 10%\n          if (bookingSettings && bookingSettings.value) {\n            const bookingInfo = bookingSettings.value as any;\n            if (bookingInfo.depositPercentage && bookingInfo.depositPercentage > 0) {\n              depositPercentage = bookingInfo.depositPercentage / 100; // Convert percentage to decimal\n            }\n          }\n          const depositAmount = totalPrice * depositPercentage;\n\n          // Create booking data with proper precision\n          const bookingData = {\n            activityId: result.data.activityId,\n            customerName: result.data.customerName,\n            customerEmail: result.data.customerEmail,\n            customerPhone: result.data.customerPhone || null,\n            bookingDate: result.data.bookingDate,\n            groupSize: result.data.groupSize,\n            totalPrice: totalPrice.toFixed(2),\n            depositAmount: depositAmount.toFixed(2),\n            currency: result.data.currency,\n            paymentMethod: result.data.paymentMethod || null,\n            specialRequests: result.data.specialRequests || null,\n            language: result.data.language,\n          };\n\n          // Insert booking within the transaction\n          const [newBooking] = await tx.insert(bookings).values(bookingData).returning();\n          return newBooking;\n        });\n      } catch (error: any) {\n        if (error.message.startsWith('CAPACITY_EXCEEDED:')) {\n          const [, slotsRemaining, requestedSize] = error.message.split(':');\n          return res.status(409).json({ \n            error: \"Not enough slots available for requested group size\",\n            available: false,\n            slotsRemaining: parseInt(slotsRemaining),\n            requestedSize: parseInt(requestedSize)\n          });\n        }\n        throw error; // Re-throw other errors\n      }\n\n      // Return booking with activity details\n      const bookingWithActivity = await storage.getBooking(booking.id);\n      \n      // Send confirmation email asynchronously\n      if (bookingWithActivity) {\n        const emailData = {\n          customerName: bookingWithActivity.customerName,\n          customerEmail: bookingWithActivity.customerEmail,\n          activityTitle: (bookingWithActivity.activity.title as any)[bookingWithActivity.language] || (bookingWithActivity.activity.title as any).en,\n          bookingDate: bookingWithActivity.bookingDate.toISOString(),\n          groupSize: bookingWithActivity.groupSize,\n          totalPrice: parseFloat(bookingWithActivity.totalPrice),\n          currency: bookingWithActivity.currency,\n          depositAmount: parseFloat(bookingWithActivity.depositAmount),\n          bookingId: bookingWithActivity.id,\n          paymentStatus: bookingWithActivity.paymentStatus as 'unpaid' | 'deposit_paid' | 'fully_paid',\n          status: bookingWithActivity.status as 'pending' | 'confirmed' | 'cancelled' | 'completed',\n        };\n\n        // Send email without blocking the response\n        sendBookingConfirmationEmail(emailData, bookingWithActivity.language as 'en' | 'fr' | 'de' | 'ar')\n          .then((success) => {\n            if (success) {\n              console.log(`Booking confirmation email sent for booking ${booking.id}`);\n            } else {\n              console.error(`Failed to send confirmation email for booking ${booking.id}`);\n            }\n          })\n          .catch((error) => {\n            console.error(`Error sending confirmation email for booking ${booking.id}:`, error);\n          });\n      }\n      \n      res.status(201).json(bookingWithActivity);\n    } catch (error) {\n      console.error(\"Error creating booking:\", error);\n      res.status(500).json({ error: \"Failed to create booking\" });\n    }\n  });\n\n  // GET /api/admin/bookings - Get all bookings (admin only)\n  app.get(\"/api/admin/bookings\", requireAdminAuth, async (req, res) => {\n    try {\n      const bookings = await storage.getAllBookings();\n      res.json(bookings);\n    } catch (error) {\n      console.error(\"Error fetching admin bookings:\", error);\n      res.status(500).json({ error: \"Failed to fetch bookings\" });\n    }\n  });\n\n  // GET /api/admin/bookings/:id - Get specific booking (admin only)\n  app.get(\"/api/admin/bookings/:id\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const booking = await storage.getBooking(id);\n      \n      if (!booking) {\n        return res.status(404).json({ error: \"Booking not found\" });\n      }\n      \n      res.json(booking);\n    } catch (error) {\n      console.error(\"Error fetching booking:\", error);\n      res.status(500).json({ error: \"Failed to fetch booking\" });\n    }\n  });\n\n  // PUT /api/admin/bookings/:id/status - Update booking status (admin only)\n  app.put(\"/api/admin/bookings/:id/status\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { status } = req.body;\n      \n      const validStatuses = ['pending', 'confirmed', 'cancelled', 'completed'];\n      if (!status || !validStatuses.includes(status)) {\n        return res.status(400).json({ \n          error: \"Invalid status\", \n          details: `Status must be one of: ${validStatuses.join(', ')}` \n        });\n      }\n\n      const booking = await storage.updateBookingStatus(id, status);\n      \n      if (!booking) {\n        return res.status(404).json({ error: \"Booking not found\" });\n      }\n\n      // Send status update email asynchronously if status changed to confirmed, cancelled, or completed\n      if (['confirmed', 'cancelled', 'completed'].includes(status)) {\n        const bookingWithActivity = await storage.getBooking(id);\n        if (bookingWithActivity) {\n          const emailData = {\n            customerName: bookingWithActivity.customerName,\n            customerEmail: bookingWithActivity.customerEmail,\n            activityTitle: (bookingWithActivity.activity.title as any)[bookingWithActivity.language] || (bookingWithActivity.activity.title as any).en,\n            bookingDate: bookingWithActivity.bookingDate.toISOString(),\n            groupSize: bookingWithActivity.groupSize,\n            totalPrice: parseFloat(bookingWithActivity.totalPrice),\n            currency: bookingWithActivity.currency,\n            depositAmount: parseFloat(bookingWithActivity.depositAmount),\n            bookingId: bookingWithActivity.id,\n            paymentStatus: bookingWithActivity.paymentStatus as 'unpaid' | 'deposit_paid' | 'fully_paid',\n            status: status as 'pending' | 'confirmed' | 'cancelled' | 'completed',\n          };\n\n          // Send email without blocking the response\n          sendBookingStatusUpdateEmail(emailData, bookingWithActivity.language as 'en' | 'fr' | 'de' | 'ar')\n            .then((success) => {\n              if (success) {\n                console.log(`Status update email sent for booking ${id} (${status})`);\n              } else {\n                console.error(`Failed to send status update email for booking ${id}`);\n              }\n            })\n            .catch((error) => {\n              console.error(`Error sending status update email for booking ${id}:`, error);\n            });\n        }\n      }\n      \n      res.json(booking);\n    } catch (error) {\n      console.error(\"Error updating booking status:\", error);\n      res.status(500).json({ error: \"Failed to update booking status\" });\n    }\n  });\n\n  // PUT /api/admin/bookings/:id/payment - Update booking payment status (admin only, also used by payment webhooks)\n  app.put(\"/api/admin/bookings/:id/payment\", requireAdminAuth, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { paymentStatus, paymentId } = req.body;\n      \n      const validPaymentStatuses = ['unpaid', 'deposit_paid', 'fully_paid', 'refunded'];\n      if (!paymentStatus || !validPaymentStatuses.includes(paymentStatus)) {\n        return res.status(400).json({ \n          error: \"Invalid payment status\", \n          details: `Payment status must be one of: ${validPaymentStatuses.join(', ')}` \n        });\n      }\n\n      const booking = await storage.updateBookingPayment(id, paymentStatus, paymentId);\n      \n      if (!booking) {\n        return res.status(404).json({ error: \"Booking not found\" });\n      }\n      \n      res.json(booking);\n    } catch (error) {\n      console.error(\"Error updating booking payment:\", error);\n      res.status(500).json({ error: \"Failed to update booking payment\" });\n    }\n  });\n\n  // GET /api/activities/:activityId/availability - Check availability for specific activity and date range\n  app.get(\"/api/activities/:activityId/availability\", async (req, res) => {\n    try {\n      const { activityId } = req.params;\n      const { startDate, endDate } = req.query;\n      \n      if (!startDate || !endDate) {\n        return res.status(400).json({ \n          error: \"Both startDate and endDate query parameters are required\" \n        });\n      }\n\n      // Verify activity exists\n      const activity = await storage.getActivity(activityId);\n      if (!activity || !activity.isActive) {\n        return res.status(404).json({ error: \"Activity not found or not available\" });\n      }\n\n      // Real availability checking based on bookings and capacity\n      const start = new Date(startDate as string);\n      const end = new Date(endDate as string);\n      \n      if (isNaN(start.getTime()) || isNaN(end.getTime())) {\n        return res.status(400).json({ error: \"Invalid date format\" });\n      }\n\n      // Real availability checking with capacity\n      const availableDates = [];\n      const currentDate = new Date(start);\n      \n      while (currentDate <= end) {\n        // Get existing bookings for this date\n        const existingBookings = await storage.getBookingsByDateAndActivity(activityId, new Date(currentDate));\n        \n        // Calculate total booked slots (sum of group sizes)\n        const totalBookedSlots = existingBookings.reduce((total, booking) => total + booking.groupSize, 0);\n        \n        // Calculate remaining slots\n        const slotsRemaining = Math.max(0, activity.capacity - totalBookedSlots);\n        \n        availableDates.push({\n          date: currentDate.toISOString().split('T')[0],\n          available: slotsRemaining > 0,\n          slotsRemaining\n        });\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n\n      res.json({\n        activityId,\n        availability: availableDates\n      });\n    } catch (error) {\n      console.error(\"Error checking availability:\", error);\n      res.status(500).json({ error: \"Failed to check availability\" });\n    }\n  });\n\n  // ========================\n  // OBJECT STORAGE ROUTES\n  // ========================\n\n  // POST /api/admin/objects/upload - Get upload URL for admin file uploads (protected)\n  app.post(\"/api/admin/objects/upload\", requireAdminAuth, async (req, res) => {\n    try {\n      const objectStorageService = new ObjectStorageService();\n      const uploadURL = await objectStorageService.getObjectEntityUploadURL();\n      res.json({ uploadURL });\n    } catch (error) {\n      console.error(\"Error getting upload URL:\", error);\n      res.status(500).json({ error: \"Failed to get upload URL\" });\n    }\n  });\n\n  // PUT /api/admin/objects - Set ACL policy for uploaded file (protected)\n  app.put(\"/api/admin/objects\", requireAdminAuth, async (req, res) => {\n    try {\n      const { fileURL, visibility = \"public\", fileType } = req.body;\n      \n      if (!fileURL) {\n        return res.status(400).json({ error: \"fileURL is required\" });\n      }\n\n      // Get admin user ID from auth (added by requireAdminAuth middleware)\n      const adminId = (req as any).user?.id || \"admin\";\n\n      const objectStorageService = new ObjectStorageService();\n      const objectPath = await objectStorageService.trySetObjectEntityAclPolicy(\n        fileURL,\n        {\n          owner: adminId,\n          visibility: visibility as \"public\" | \"private\",\n        }\n      );\n\n      res.json({\n        objectPath: objectPath,\n        fileType: fileType || \"file\"\n      });\n    } catch (error) {\n      console.error(\"Error setting file ACL policy:\", error);\n      res.status(500).json({ error: \"Failed to process uploaded file\" });\n    }\n  });\n\n  // GET /objects/:objectPath(*) - Serve uploaded objects with ACL checking\n  app.get(\"/objects/:objectPath(*)\", async (req, res) => {\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const objectFile = await objectStorageService.getObjectEntityFile(req.path);\n      \n      // Check if user has access (public files are always accessible for read)\n      const canAccess = await objectStorageService.canAccessObjectEntity({\n        objectFile,\n        userId: (req as any).user?.id, // May be undefined for non-authenticated requests\n        requestedPermission: ObjectPermission.READ,\n      });\n      \n      if (!canAccess) {\n        return res.sendStatus(401);\n      }\n      \n      objectStorageService.downloadObject(objectFile, res);\n    } catch (error) {\n      console.error(\"Error serving object:\", error);\n      if (error instanceof ObjectNotFoundError) {\n        return res.sendStatus(404);\n      }\n      return res.sendStatus(500);\n    }\n  });\n\n  // GET /public-objects/:filePath(*) - Serve public assets (no auth required)\n  app.get(\"/public-objects/:filePath(*)\", async (req, res) => {\n    const filePath = req.params.filePath;\n    const objectStorageService = new ObjectStorageService();\n    try {\n      const file = await objectStorageService.searchPublicObject(filePath);\n      if (!file) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      objectStorageService.downloadObject(file, res);\n    } catch (error) {\n      console.error(\"Error searching for public object:\", error);\n      return res.status(500).json({ error: \"Internal server error\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":35948},"server/seed.ts":{"content":"import { storage } from \"./storage\";\n\n// Seed activities data based on the mock data from frontend\nconst seedActivities = [\n  {\n    title: {\n      en: \"2-Day Camel Trek\",\n      fr: \"Trek à dos de chameau de 2 jours\",\n      de: \"2-Tage Kameltrekking\",\n      ar: \"رحلة الجمال لمدة يومين\"\n    },\n    description: {\n      en: \"Experience the magic of the Sahara with an authentic camel trekking adventure through golden dunes.\",\n      fr: \"Découvrez la magie du Sahara avec une aventure authentique de trekking à dos de chameau à travers les dunes dorées.\",\n      de: \"Erleben Sie die Magie der Sahara mit einem authentischen Kameltrekking-Abenteuer durch goldene Dünen.\",\n      ar: \"اختبر سحر الصحراء مع مغامرة أصيلة لرحلة الجمال عبر الكثبان الذهبية.\"\n    },\n    highlights: {\n      en: [\"Camel Riding\", \"Desert Camp\", \"Traditional Dinner\", \"Stargazing\"],\n      fr: [\"Promenade à dos de chameau\", \"Camp du désert\", \"Dîner traditionnel\", \"Observation des étoiles\"],\n      de: [\"Kamelreiten\", \"Wüstencamp\", \"Traditionelles Abendessen\", \"Sterne beobachten\"],\n      ar: [\"ركوب الجمل\", \"مخيم صحراوي\", \"عشاء تقليدي\", \"مراقبة النجوم\"]\n    },\n    category: \"adventure\",\n    duration: \"2 days, 1 night\",\n    groupSize: \"2-8 people\",\n    capacity: 8,\n    prices: {\n      TND: 180,\n      USD: 60,\n      EUR: 55\n    },\n    imageUrl: \"/generated_images/Camel_riding_tour_detail_e5164afc.png\",\n    isActive: true\n  },\n  {\n    title: {\n      en: \"Desert Dinner Experience\",\n      fr: \"Expérience de dîner dans le désert\",\n      de: \"Wüsten-Abendessen Erlebnis\",\n      ar: \"تجربة عشاء الصحراء\"\n    },\n    description: {\n      en: \"Enjoy traditional Berber cuisine under the stars with live music and cultural performances.\",\n      fr: \"Savourez la cuisine berbère traditionnelle sous les étoiles avec de la musique live et des spectacles culturels.\",\n      de: \"Genießen Sie traditionelle Berber-Küche unter den Sternen mit Live-Musik und kulturellen Aufführungen.\",\n      ar: \"استمتع بالمأكولات البربرية التقليدية تحت النجوم مع الموسيقى الحية والعروض الثقافية.\"\n    },\n    highlights: {\n      en: [\"Traditional Food\", \"Live Music\", \"Cultural Show\", \"Tea Ceremony\"],\n      fr: [\"Nourriture traditionnelle\", \"Musique live\", \"Spectacle culturel\", \"Cérémonie du thé\"],\n      de: [\"Traditionelle Küche\", \"Live-Musik\", \"Kulturshow\", \"Tee-Zeremonie\"],\n      ar: [\"طعام تقليدي\", \"موسيقى حية\", \"عرض ثقافي\", \"حفل الشاي\"]\n    },\n    category: \"cultural\",\n    duration: \"Evening (4 hours)\",\n    groupSize: \"2-20 people\",\n    capacity: 20,\n    prices: {\n      TND: 54,\n      USD: 18,\n      EUR: 16\n    },\n    imageUrl: \"/generated_images/Desert_camp_dining_experience_e983ce5b.png\",\n    isActive: true\n  },\n  {\n    title: {\n      en: \"Cultural Activities Day\",\n      fr: \"Journée d'activités culturelles\",\n      de: \"Kultureller Aktivitätstag\",\n      ar: \"يوم الأنشطة الثقافية\"\n    },\n    description: {\n      en: \"Immerse yourself in Berber culture with henna art, traditional crafts, and local music.\",\n      fr: \"Plongez-vous dans la culture berbère avec l'art du henné, l'artisanat traditionnel et la musique locale.\",\n      de: \"Tauchen Sie ein in die Berber-Kultur mit Henna-Kunst, traditionellem Handwerk und lokaler Musik.\",\n      ar: \"انغمس في الثقافة البربرية مع فن الحناء والحرف التقليدية والموسيقى المحلية.\"\n    },\n    highlights: {\n      en: [\"Henna Art\", \"Traditional Crafts\", \"Local Music\", \"Village Tour\"],\n      fr: [\"Art du henné\", \"Artisanat traditionnel\", \"Musique locale\", \"Visite du village\"],\n      de: [\"Henna-Kunst\", \"Traditionelles Handwerk\", \"Lokale Musik\", \"Dorfbesichtigung\"],\n      ar: [\"فن الحناء\", \"الحرف التقليدية\", \"الموسيقى المحلية\", \"جولة القرية\"]\n    },\n    category: \"cultural\",\n    duration: \"Full day (8 hours)\",\n    groupSize: \"4-15 people\",\n    capacity: 15,\n    prices: {\n      TND: 90,\n      USD: 30,\n      EUR: 27\n    },\n    imageUrl: \"/generated_images/Traditional_henna_art_activity_1883deb4.png\",\n    isActive: true\n  }\n];\n\nexport async function seedDatabase() {\n  try {\n    console.log(\"🌱 Starting database seeding...\");\n    \n    // Clear existing activities (for development)\n    const existingActivities = await storage.getAllActivities();\n    console.log(`Found ${existingActivities.length} existing activities`);\n    \n    // Create activities\n    for (const activityData of seedActivities) {\n      const activity = await storage.createActivity(activityData);\n      console.log(`✅ Created activity: ${(activity.title as any).en} (ID: ${activity.id})`);\n    }\n    \n    console.log(\"🎉 Database seeding completed successfully!\");\n    \n  } catch (error) {\n    console.error(\"❌ Error seeding database:\", error);\n    throw error;\n  }\n}\n\n// Run seeding if called directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  seedDatabase()\n    .then(() => {\n      console.log(\"Seeding finished\");\n      process.exit(0);\n    })\n    .catch((error) => {\n      console.error(\"Seeding failed:\", error);\n      process.exit(1);\n    });\n}","size_bytes":5355},"server/storage.ts":{"content":"import { \n  type User, \n  type InsertUser, \n  type AdminUser, \n  type InsertAdminUser,\n  type Activity, \n  type InsertActivity,\n  type Booking, \n  type InsertBooking,\n  type GalleryItem, \n  type InsertGalleryItem,\n  type Availability,\n  type InsertAvailability,\n  type SiteSetting,\n  type InsertSiteSetting,\n  users,\n  adminUsers,\n  activities,\n  bookings,\n  galleryItems,\n  availability,\n  siteSettings\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, gte, lte, ne } from \"drizzle-orm\";\n\n// Storage interface for all CRUD operations\nexport interface IStorage {\n  // Users\n  getUser(id: string): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n\n  // Admin Users\n  getAdminUser(id: string): Promise<AdminUser | undefined>;\n  getAdminUserByUsername(username: string): Promise<AdminUser | undefined>;\n  getAdminUserByEmail(email: string): Promise<AdminUser | undefined>;\n  createAdminUser(user: InsertAdminUser): Promise<AdminUser>;\n  updateAdminUserLastLogin(id: string): Promise<void>;\n\n  // Activities\n  getAllActivities(activeOnly?: boolean): Promise<Activity[]>;\n  getActivity(id: string): Promise<Activity | undefined>;\n  createActivity(activity: InsertActivity): Promise<Activity>;\n  updateActivity(id: string, activity: Partial<InsertActivity>): Promise<Activity | undefined>;\n  deleteActivity(id: string): Promise<boolean>;\n\n  // Bookings\n  getAllBookings(): Promise<(Booking & { activity: Activity })[]>;\n  getBooking(id: string): Promise<(Booking & { activity: Activity }) | undefined>;\n  getBookingsByEmail(email: string): Promise<Booking[]>;\n  getBookingsByDateAndActivity(activityId: string, bookingDate: Date): Promise<Booking[]>;\n  createBooking(booking: InsertBooking): Promise<Booking>;\n  updateBookingStatus(id: string, status: string): Promise<Booking | undefined>;\n  updateBookingPayment(id: string, paymentStatus: string, paymentId?: string): Promise<Booking | undefined>;\n\n  // Gallery\n  getAllGalleryItems(activeOnly?: boolean): Promise<GalleryItem[]>;\n  getGalleryItem(id: string): Promise<GalleryItem | undefined>;\n  createGalleryItem(item: InsertGalleryItem): Promise<GalleryItem>;\n  updateGalleryItem(id: string, item: Partial<InsertGalleryItem>): Promise<GalleryItem | undefined>;\n  deleteGalleryItem(id: string): Promise<boolean>;\n\n  // Availability\n  getAvailability(activityId: string, fromDate: Date, toDate: Date): Promise<{ date: string; availableSpots: number; totalCapacity: number; isBlocked: boolean; }[]>;\n  getAvailabilityForDate(activityId: string, date: Date): Promise<{ availableSpots: number; totalCapacity: number; isBlocked: boolean; } | null>;\n  createAvailability(availability: InsertAvailability): Promise<Availability>;\n  updateAvailability(id: string, availability: Partial<InsertAvailability>): Promise<Availability | undefined>;\n\n  // Site Settings\n  getAllSiteSettings(activeOnly?: boolean): Promise<SiteSetting[]>;\n  getSiteSetting(key: string): Promise<SiteSetting | undefined>;\n  createOrUpdateSiteSetting(key: string, value: any, isActive?: boolean): Promise<SiteSetting>;\n  deleteSiteSetting(key: string): Promise<boolean>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // Users\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(insertUser)\n      .returning();\n    return user;\n  }\n\n  // Admin Users\n  async getAdminUser(id: string): Promise<AdminUser | undefined> {\n    const [admin] = await db.select().from(adminUsers).where(eq(adminUsers.id, id));\n    return admin || undefined;\n  }\n\n  async getAdminUserByUsername(username: string): Promise<AdminUser | undefined> {\n    const [admin] = await db.select().from(adminUsers).where(eq(adminUsers.username, username));\n    return admin || undefined;\n  }\n\n  async getAdminUserByEmail(email: string): Promise<AdminUser | undefined> {\n    const [admin] = await db.select().from(adminUsers).where(eq(adminUsers.email, email));\n    return admin || undefined;\n  }\n\n  async createAdminUser(insertAdmin: InsertAdminUser): Promise<AdminUser> {\n    const [admin] = await db\n      .insert(adminUsers)\n      .values(insertAdmin)\n      .returning();\n    return admin;\n  }\n\n  async updateAdminUserLastLogin(id: string): Promise<void> {\n    await db\n      .update(adminUsers)\n      .set({ lastLogin: new Date() })\n      .where(eq(adminUsers.id, id));\n  }\n\n  // Activities\n  async getAllActivities(activeOnly = false): Promise<Activity[]> {\n    const query = db.select().from(activities);\n    if (activeOnly) {\n      return await query.where(eq(activities.isActive, true)).orderBy(activities.createdAt);\n    }\n    return await query.orderBy(activities.createdAt);\n  }\n\n  async getActivity(id: string): Promise<Activity | undefined> {\n    const [activity] = await db.select().from(activities).where(eq(activities.id, id));\n    return activity || undefined;\n  }\n\n  async createActivity(insertActivity: InsertActivity): Promise<Activity> {\n    const [activity] = await db\n      .insert(activities)\n      .values(insertActivity)\n      .returning();\n    return activity;\n  }\n\n  async updateActivity(id: string, updateActivity: Partial<InsertActivity>): Promise<Activity | undefined> {\n    const [activity] = await db\n      .update(activities)\n      .set({ ...updateActivity, updatedAt: new Date() })\n      .where(eq(activities.id, id))\n      .returning();\n    return activity || undefined;\n  }\n\n  async deleteActivity(id: string): Promise<boolean> {\n    const result = await db.delete(activities).where(eq(activities.id, id));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Bookings\n  async getAllBookings(): Promise<(Booking & { activity: Activity })[]> {\n    return await db\n      .select()\n      .from(bookings)\n      .leftJoin(activities, eq(bookings.activityId, activities.id))\n      .orderBy(desc(bookings.createdAt))\n      .then(rows => \n        rows.map(row => ({\n          ...row.bookings,\n          activity: row.activities!\n        }))\n      );\n  }\n\n  async getBooking(id: string): Promise<(Booking & { activity: Activity }) | undefined> {\n    const [result] = await db\n      .select()\n      .from(bookings)\n      .leftJoin(activities, eq(bookings.activityId, activities.id))\n      .where(eq(bookings.id, id));\n    \n    if (!result) return undefined;\n    \n    return {\n      ...result.bookings,\n      activity: result.activities!\n    };\n  }\n\n  async getBookingsByEmail(email: string): Promise<Booking[]> {\n    return await db\n      .select()\n      .from(bookings)\n      .where(eq(bookings.customerEmail, email))\n      .orderBy(desc(bookings.createdAt));\n  }\n\n  async getBookingsByDateAndActivity(activityId: string, bookingDate: Date): Promise<Booking[]> {\n    // Get bookings for specific activity and date (excluding cancelled bookings)\n    const startOfDay = new Date(bookingDate);\n    startOfDay.setUTCHours(0, 0, 0, 0);\n    \n    const endOfDay = new Date(bookingDate);\n    endOfDay.setUTCHours(23, 59, 59, 999);\n\n    return await db\n      .select()\n      .from(bookings)\n      .where(\n        and(\n          eq(bookings.activityId, activityId),\n          gte(bookings.bookingDate, startOfDay),\n          lte(bookings.bookingDate, endOfDay),\n          ne(bookings.status, \"cancelled\") // Exclude cancelled bookings\n        )\n      );\n  }\n\n  async createBooking(insertBooking: InsertBooking): Promise<Booking> {\n    const [booking] = await db\n      .insert(bookings)\n      .values(insertBooking)\n      .returning();\n    return booking;\n  }\n\n  async updateBookingStatus(id: string, status: string): Promise<Booking | undefined> {\n    const [booking] = await db\n      .update(bookings)\n      .set({ status, updatedAt: new Date() })\n      .where(eq(bookings.id, id))\n      .returning();\n    return booking || undefined;\n  }\n\n  async updateBookingPayment(id: string, paymentStatus: string, paymentId?: string): Promise<Booking | undefined> {\n    const updateData: any = { paymentStatus, updatedAt: new Date() };\n    if (paymentId) updateData.paymentId = paymentId;\n\n    const [booking] = await db\n      .update(bookings)\n      .set(updateData)\n      .where(eq(bookings.id, id))\n      .returning();\n    return booking || undefined;\n  }\n\n  // Gallery\n  async getAllGalleryItems(activeOnly = false): Promise<GalleryItem[]> {\n    const query = db.select().from(galleryItems);\n    if (activeOnly) {\n      return await query\n        .where(eq(galleryItems.isActive, true))\n        .orderBy(galleryItems.sortOrder, galleryItems.createdAt);\n    }\n    return await query.orderBy(galleryItems.sortOrder, galleryItems.createdAt);\n  }\n\n  async getGalleryItem(id: string): Promise<GalleryItem | undefined> {\n    const [item] = await db.select().from(galleryItems).where(eq(galleryItems.id, id));\n    return item || undefined;\n  }\n\n  async createGalleryItem(insertItem: InsertGalleryItem): Promise<GalleryItem> {\n    const [item] = await db\n      .insert(galleryItems)\n      .values(insertItem)\n      .returning();\n    return item;\n  }\n\n  async updateGalleryItem(id: string, updateItem: Partial<InsertGalleryItem>): Promise<GalleryItem | undefined> {\n    const [item] = await db\n      .update(galleryItems)\n      .set(updateItem)\n      .where(eq(galleryItems.id, id))\n      .returning();\n    return item || undefined;\n  }\n\n  async deleteGalleryItem(id: string): Promise<boolean> {\n    const result = await db.delete(galleryItems).where(eq(galleryItems.id, id));\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  // Availability\n  async getAvailability(activityId: string, fromDate: Date, toDate: Date): Promise<{ date: string; availableSpots: number; totalCapacity: number; isBlocked: boolean; }[]> {\n    // Get activity capacity\n    const activity = await this.getActivity(activityId);\n    if (!activity) {\n      return [];\n    }\n\n    // Generate date range\n    const dates: Date[] = [];\n    const current = new Date(fromDate);\n    while (current <= toDate) {\n      dates.push(new Date(current));\n      current.setDate(current.getDate() + 1);\n    }\n\n    // Get existing bookings for each date\n    const results = await Promise.all(\n      dates.map(async (date) => {\n        const dateStart = new Date(date.setUTCHours(0, 0, 0, 0));\n        const dateEnd = new Date(date.setUTCHours(23, 59, 59, 999));\n        \n        const existingBookings = await db\n          .select()\n          .from(bookings)\n          .where(\n            and(\n              eq(bookings.activityId, activityId),\n              gte(bookings.bookingDate, dateStart),\n              lte(bookings.bookingDate, dateEnd),\n              ne(bookings.status, \"cancelled\")\n            )\n          );\n        \n        const totalBookedSlots = existingBookings.reduce((total, booking) => total + booking.groupSize, 0);\n        const availableSpots = Math.max(0, activity.capacity - totalBookedSlots);\n        \n        return {\n          date: date.toISOString().split('T')[0],\n          availableSpots,\n          totalCapacity: activity.capacity,\n          isBlocked: false, // Can be extended for manually blocked dates\n        };\n      })\n    );\n\n    return results;\n  }\n\n  async getAvailabilityForDate(activityId: string, date: Date): Promise<{ availableSpots: number; totalCapacity: number; isBlocked: boolean; } | null> {\n    // Get activity capacity\n    const activity = await this.getActivity(activityId);\n    if (!activity) {\n      return null;\n    }\n\n    const dateStart = new Date(date.setUTCHours(0, 0, 0, 0));\n    const dateEnd = new Date(date.setUTCHours(23, 59, 59, 999));\n    \n    const existingBookings = await db\n      .select()\n      .from(bookings)\n      .where(\n        and(\n          eq(bookings.activityId, activityId),\n          gte(bookings.bookingDate, dateStart),\n          lte(bookings.bookingDate, dateEnd),\n          ne(bookings.status, \"cancelled\")\n        )\n      );\n    \n    const totalBookedSlots = existingBookings.reduce((total, booking) => total + booking.groupSize, 0);\n    const availableSpots = Math.max(0, activity.capacity - totalBookedSlots);\n    \n    return {\n      availableSpots,\n      totalCapacity: activity.capacity,\n      isBlocked: false, // Can be extended for manually blocked dates\n    };\n  }\n\n  async createAvailability(insertAvailability: InsertAvailability): Promise<Availability> {\n    const [availabilityRecord] = await db\n      .insert(availability)\n      .values(insertAvailability)\n      .returning();\n    return availabilityRecord;\n  }\n\n  async updateAvailability(id: string, updateAvailability: Partial<InsertAvailability>): Promise<Availability | undefined> {\n    const [availabilityRecord] = await db\n      .update(availability)\n      .set({ ...updateAvailability, updatedAt: new Date() })\n      .where(eq(availability.id, id))\n      .returning();\n    return availabilityRecord || undefined;\n  }\n\n  // Site Settings\n  async getAllSiteSettings(activeOnly = false): Promise<SiteSetting[]> {\n    const query = db.select().from(siteSettings);\n    if (activeOnly) {\n      return await query.where(eq(siteSettings.isActive, true)).orderBy(siteSettings.key);\n    }\n    return await query.orderBy(siteSettings.key);\n  }\n\n  async getSiteSetting(key: string): Promise<SiteSetting | undefined> {\n    const [setting] = await db.select().from(siteSettings).where(eq(siteSettings.key, key));\n    return setting || undefined;\n  }\n\n  async createOrUpdateSiteSetting(key: string, value: any, isActive?: boolean): Promise<SiteSetting> {\n    // Check if setting already exists\n    const existingSetting = await this.getSiteSetting(key);\n    \n    if (existingSetting) {\n      // Update existing setting\n      const updateData: any = { value, updatedAt: new Date() };\n      if (isActive !== undefined) {\n        updateData.isActive = isActive;\n      }\n      \n      const [updated] = await db\n        .update(siteSettings)\n        .set(updateData)\n        .where(eq(siteSettings.key, key))\n        .returning();\n      return updated;\n    } else {\n      // Create new setting\n      const insertData: any = { key, value };\n      if (isActive !== undefined) {\n        insertData.isActive = isActive;\n      }\n      \n      const [created] = await db\n        .insert(siteSettings)\n        .values(insertData)\n        .returning();\n      return created;\n    }\n  }\n\n  async deleteSiteSetting(key: string): Promise<boolean> {\n    const result = await db.delete(siteSettings).where(eq(siteSettings.key, key));\n    return (result.rowCount ?? 0) > 0;\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":14835},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"shared/schema.ts":{"content":"import { sql, relations } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, timestamp, jsonb, boolean } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Users table (regular website users - kept for future use)\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n});\n\n// Admin users table (for content management)\nexport const adminUsers = pgTable(\"admin_users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  username: text(\"username\").notNull().unique(),\n  email: text(\"email\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  role: text(\"role\").notNull().default(\"admin\"), // admin, super_admin\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n  lastLogin: timestamp(\"last_login\"),\n});\n\n// Activities/Tours table\nexport const activities = pgTable(\"activities\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: jsonb(\"title\").notNull(), // {en: \"title\", fr: \"titre\", de: \"titel\", ar: \"عنوان\"}\n  description: jsonb(\"description\").notNull(),\n  highlights: jsonb(\"highlights\").notNull(), // array of strings per language\n  category: text(\"category\").notNull(), // adventure, cultural, etc.\n  duration: text(\"duration\").notNull(),\n  groupSize: text(\"group_size\").notNull(),\n  capacity: integer(\"capacity\").notNull().default(8), // Maximum number of people per booking date\n  prices: jsonb(\"prices\").notNull(), // {TND: 180, USD: 60, EUR: 55}\n  imageUrl: text(\"image_url\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").notNull().default(sql`now()`),\n});\n\n// Bookings table\nexport const bookings = pgTable(\"bookings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  activityId: varchar(\"activity_id\").notNull().references(() => activities.id),\n  customerName: text(\"customer_name\").notNull(),\n  customerEmail: text(\"customer_email\").notNull(),\n  customerPhone: text(\"customer_phone\"),\n  bookingDate: timestamp(\"booking_date\").notNull(),\n  groupSize: integer(\"group_size\").notNull(),\n  totalPrice: decimal(\"total_price\", { precision: 10, scale: 2 }).notNull(),\n  depositAmount: decimal(\"deposit_amount\", { precision: 10, scale: 2 }).notNull(),\n  currency: text(\"currency\").notNull(), // TND, USD, EUR\n  status: text(\"status\").notNull().default(\"pending\"), // pending, confirmed, cancelled, completed\n  paymentStatus: text(\"payment_status\").notNull().default(\"unpaid\"), // unpaid, deposit_paid, fully_paid, refunded\n  paymentMethod: text(\"payment_method\"), // stripe, paypal\n  paymentId: text(\"payment_id\"), // external payment ID\n  specialRequests: text(\"special_requests\"),\n  language: text(\"language\").notNull().default(\"en\"),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").notNull().default(sql`now()`),\n});\n\n// Gallery items table\nexport const galleryItems = pgTable(\"gallery_items\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: jsonb(\"title\").notNull(),\n  description: jsonb(\"description\").notNull(),\n  type: text(\"type\").notNull(), // image, video\n  url: text(\"url\").notNull(), // main file URL\n  thumbnailUrl: text(\"thumbnail_url\"), // thumbnail for videos\n  storageKey: text(\"storage_key\"), // object storage key/path\n  bucketId: text(\"bucket_id\"), // object storage bucket ID\n  contentType: text(\"content_type\"), // MIME type\n  fileSize: integer(\"file_size\"), // file size in bytes\n  category: text(\"category\"), // activity type or general category\n  isActive: boolean(\"is_active\").notNull().default(true),\n  sortOrder: integer(\"sort_order\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n});\n\n// Availability table for tracking daily capacity\nexport const availability = pgTable(\"availability\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  activityId: varchar(\"activity_id\").notNull().references(() => activities.id),\n  date: timestamp(\"date\").notNull(), // Use timestamp to match bookingDate\n  availableSpots: integer(\"available_spots\").notNull(),\n  totalCapacity: integer(\"total_capacity\").notNull(),\n  isBlocked: boolean(\"is_blocked\").notNull().default(false),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").notNull().default(sql`now()`),\n});\n\n// Site settings table for managing company details and site configuration\nexport const siteSettings = pgTable(\"site_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  key: text(\"key\").notNull().unique(), // unique identifier for the setting (e.g., 'company_info', 'contact_details')\n  value: jsonb(\"value\").notNull(), // stores the setting data as JSON\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").notNull().default(sql`now()`),\n  updatedAt: timestamp(\"updated_at\").notNull().default(sql`now()`),\n});\n\n// Relations\nexport const activitiesRelations = relations(activities, ({ many }) => ({\n  bookings: many(bookings),\n  availability: many(availability),\n}));\n\nexport const bookingsRelations = relations(bookings, ({ one }) => ({\n  activity: one(activities, {\n    fields: [bookings.activityId],\n    references: [activities.id],\n  }),\n}));\n\nexport const availabilityRelations = relations(availability, ({ one }) => ({\n  activity: one(activities, {\n    fields: [availability.activityId],\n    references: [activities.id],\n  }),\n}));\n\n// Zod schemas for validation\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport const insertAdminUserSchema = createInsertSchema(adminUsers).pick({\n  username: true,\n  email: true,\n  password: true,\n  role: true,\n});\n\n// Define strict multilingual schemas\nconst multilingualTextSchema = z.object({\n  en: z.string().min(1),\n  fr: z.string().min(1),\n  de: z.string().min(1),\n  ar: z.string().min(1),\n});\n\n// Flexible multilingual schema for about page content (only English required)\nconst aboutPageMultilingualTextSchema = z.object({\n  en: z.string().min(1),\n  fr: z.string().optional(),\n  de: z.string().optional(),\n  ar: z.string().optional(),\n});\n\nconst multilingualArraySchema = z.object({\n  en: z.array(z.string()).min(1),\n  fr: z.array(z.string()).min(1),\n  de: z.array(z.string()).min(1),\n  ar: z.array(z.string()).min(1),\n});\n\nconst pricesSchema = z.object({\n  TND: z.number().positive(),\n  USD: z.number().positive(),\n  EUR: z.number().positive(),\n});\n\nexport const insertActivitySchema = createInsertSchema(activities).pick({\n  category: true,\n  duration: true,\n  groupSize: true,\n  imageUrl: true,\n  isActive: true,\n}).extend({\n  title: multilingualTextSchema,\n  description: multilingualTextSchema,\n  highlights: multilingualArraySchema,\n  prices: pricesSchema,\n});\n\n// Booking request schema for API (customer input only)\n// Note: totalPrice is calculated server-side for security\nexport const createBookingRequestSchema = z.object({\n  activityId: z.string().min(1, \"Activity ID is required\"),\n  customerName: z.string().min(1, \"Customer name is required\"),\n  customerEmail: z.string().email(\"Valid email address is required\"),\n  customerPhone: z.string().optional(),\n  bookingDate: z.coerce.date().refine(date => date > new Date(), \"Booking date must be in the future\"),\n  groupSize: z.coerce.number().int().min(1, \"Group size must be at least 1\").max(20, \"Group size cannot exceed 20\"),\n  currency: z.enum([\"TND\", \"USD\", \"EUR\"]),\n  paymentMethod: z.enum([\"stripe\", \"paypal\"]).optional(),\n  specialRequests: z.string().optional(),\n  language: z.enum([\"en\", \"fr\", \"de\", \"ar\"]).default(\"en\"),\n});\n\n// Full booking schema for database operations\nexport const insertBookingSchema = createInsertSchema(bookings).pick({\n  activityId: true,\n  customerName: true,\n  customerEmail: true,\n  customerPhone: true,\n  bookingDate: true,\n  groupSize: true,\n  totalPrice: true,\n  depositAmount: true,\n  currency: true,\n  paymentMethod: true,\n  specialRequests: true,\n  language: true,\n});\n\nexport const insertGalleryItemSchema = createInsertSchema(galleryItems).pick({\n  title: true,\n  description: true,\n  type: true,\n  url: true,\n  thumbnailUrl: true,\n  category: true,\n  isActive: true,\n  sortOrder: true,\n});\n\n// Site settings schemas\nexport const contactInfoSchema = z.object({\n  phone: z.string(),\n  email: z.string().email(),\n  address: multilingualTextSchema,\n  whatsapp: z.string().optional(),\n});\n\nexport const socialMediaSchema = z.object({\n  facebook: z.string().url(\"Please enter a valid URL\").optional(),\n  instagram: z.string().url(\"Please enter a valid URL\").optional(), \n  twitter: z.string().url(\"Please enter a valid URL\").optional(),\n  linkedin: z.string().url(\"Please enter a valid URL\").optional(),\n  youtube: z.string().url(\"Please enter a valid URL\").optional(),\n  tiktok: z.string().url(\"Please enter a valid URL\").optional(),\n});\n\nexport const companyInfoSchema = z.object({\n  name: multilingualTextSchema,\n  tagline: multilingualTextSchema.optional(),\n  about: multilingualTextSchema,\n  logoUrl: z.string().min(1, \"Logo URL is required\").optional(),\n  faviconUrl: z.string().min(1, \"Favicon URL is required\").optional(),\n});\n\nexport const bookingInfoSchema = z.object({\n  termsAndConditions: multilingualTextSchema,\n  privacyPolicy: multilingualTextSchema,\n  cancellationPolicy: multilingualTextSchema,\n  bookingInstructions: multilingualTextSchema.optional(),\n  contactEmail: z.string().email(\"Please enter a valid email address\").optional(),\n  contactPhone: z.string().optional(),\n  depositPercentage: z.number().min(1).max(100).default(10),\n  isBookingEnabled: z.boolean().default(true),\n});\n\nexport const locationInfoSchema = z.object({\n  address: multilingualTextSchema,\n  latitude: z.number().min(-90).max(90),\n  longitude: z.number().min(-180).max(180),\n  googleMapsUrl: z.string().url(\"Please enter a valid URL\").optional(),\n  displayOnFooter: z.boolean().default(true),\n  displayOnContact: z.boolean().default(true),\n});\n\nexport const aboutPageContentSchema = z.object({\n  title: aboutPageMultilingualTextSchema,\n  subtitle: aboutPageMultilingualTextSchema,\n  whoWeAre: aboutPageMultilingualTextSchema,\n  whoWeAreDesc: aboutPageMultilingualTextSchema,\n  ourMission: aboutPageMultilingualTextSchema,\n  ourMissionDesc: aboutPageMultilingualTextSchema,\n  whyChooseUs: aboutPageMultilingualTextSchema,\n  experience: aboutPageMultilingualTextSchema,\n  experienceDesc: aboutPageMultilingualTextSchema,\n  localGuides: aboutPageMultilingualTextSchema,\n  localGuidesDesc: aboutPageMultilingualTextSchema,\n  safety: aboutPageMultilingualTextSchema,\n  safetyDesc: aboutPageMultilingualTextSchema,\n  authentic: aboutPageMultilingualTextSchema,\n  authenticDesc: aboutPageMultilingualTextSchema,\n  toursCompleted: aboutPageMultilingualTextSchema,\n  happyCustomers: aboutPageMultilingualTextSchema,\n  countries: aboutPageMultilingualTextSchema,\n  rating: aboutPageMultilingualTextSchema,\n  ourStory: aboutPageMultilingualTextSchema,\n  ourStoryDesc: aboutPageMultilingualTextSchema,\n  commitment: aboutPageMultilingualTextSchema,\n  commitmentDesc: aboutPageMultilingualTextSchema,\n});\n\nexport const siteSettingValueSchema = z.discriminatedUnion(\"type\", [\n  z.object({ type: z.literal(\"company_info\"), ...companyInfoSchema.shape }),\n  z.object({ type: z.literal(\"contact_details\"), ...contactInfoSchema.shape }),\n  z.object({ type: z.literal(\"social_media\"), ...socialMediaSchema.shape }),\n  z.object({ type: z.literal(\"booking_info\"), ...bookingInfoSchema.shape }),\n  z.object({ type: z.literal(\"location_info\"), ...locationInfoSchema.shape }),\n  z.object({ type: z.literal(\"about_page_content\"), ...aboutPageContentSchema.shape }),\n]);\n\nexport const insertSiteSettingSchema = createInsertSchema(siteSettings).pick({\n  key: true,\n  value: true,\n  isActive: true,\n});\n\n// Type exports\nexport type User = typeof users.$inferSelect;\nexport type InsertUser = z.infer<typeof insertUserSchema>;\n\nexport type AdminUser = typeof adminUsers.$inferSelect;\nexport type InsertAdminUser = z.infer<typeof insertAdminUserSchema>;\n\nexport type Activity = typeof activities.$inferSelect;\nexport type InsertActivity = z.infer<typeof insertActivitySchema>;\n\nexport type Booking = typeof bookings.$inferSelect;\nexport type CreateBookingRequest = z.infer<typeof createBookingRequestSchema>;\nexport type InsertBooking = z.infer<typeof insertBookingSchema>;\n\nexport type GalleryItem = typeof galleryItems.$inferSelect;\nexport type InsertGalleryItem = z.infer<typeof insertGalleryItemSchema>;\n\nexport type Availability = typeof availability.$inferSelect;\nexport type InsertAvailability = typeof availability.$inferInsert;\n\nexport type SiteSetting = typeof siteSettings.$inferSelect;\nexport type InsertSiteSetting = z.infer<typeof insertSiteSettingSchema>;\nexport type SiteSettingValue = z.infer<typeof siteSettingValueSchema>;\n","size_bytes":13111},"client/src/App.tsx":{"content":"import { useState } from \"react\";\nimport { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Header from \"@/components/Header\";\nimport Footer from \"@/components/Footer\"; \nimport Home from \"@/pages/Home\";\nimport AdminLogin from \"@/pages/AdminLogin\";\nimport AdminDashboard from \"@/pages/AdminDashboard\";\nimport AdminActivities from \"@/pages/AdminActivities\";\nimport AdminNewActivity from \"@/pages/AdminNewActivity\";\nimport AdminBookings from \"@/pages/AdminBookings\";\nimport AdminTranslations from \"@/pages/AdminTranslations\";\nimport AdminGallery from \"@/pages/AdminGallery\";\nimport AdminSettings from \"@/pages/AdminSettings\";\nimport Gallery from \"@/pages/Gallery\";\nimport Activities from \"@/pages/Activities\";\nimport ActivityDetail from \"@/pages/ActivityDetail\";\nimport About from \"@/pages/About\";\nimport Contact from \"@/pages/Contact\";\nimport BookingDetails from \"@/pages/BookingDetails\";\nimport NotFound from \"@/pages/not-found\";\nimport Chatbot from './components/Chatbot';\n\nfunction Router({ currentLanguage, currentCurrency, setCurrentLanguage, setCurrentCurrency }: { \n  currentLanguage: string; \n  currentCurrency: string;\n  setCurrentLanguage: (lang: string) => void;\n  setCurrentCurrency: (curr: string) => void;\n}) {\n  return (\n    <Switch>\n      {/* Admin Routes - No Header/Footer */}\n      <Route path=\"/admin/login\" component={AdminLogin} />\n      <Route path=\"/admin/dashboard\" component={AdminDashboard} />\n      <Route path=\"/admin/activities/new\" component={AdminNewActivity} />\n      <Route path=\"/admin/activities\" component={AdminActivities} />\n      <Route path=\"/admin/bookings\" component={AdminBookings} />\n      <Route path=\"/admin/translations\" component={AdminTranslations} />\n      <Route path=\"/admin/gallery\" component={AdminGallery} />\n      <Route path=\"/admin/settings\" component={AdminSettings} />\n      \n      {/* Public Routes - With Header/Footer */}\n      <Route path=\"/gallery\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <Gallery currentLanguage={currentLanguage} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      <Route path=\"/activities\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <Activities currentLanguage={currentLanguage} currentCurrency={currentCurrency} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      <Route path=\"/about\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <About currentLanguage={currentLanguage} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      <Route path=\"/contact\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <Contact currentLanguage={currentLanguage} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      <Route path=\"/booking\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <BookingDetails currentLanguage={currentLanguage} currentCurrency={currentCurrency} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      <Route path=\"/activity/:id\">\n        {(params) => (\n          <div className=\"min-h-screen flex flex-col\">\n            <Header \n              currentLanguage={currentLanguage}\n              currentCurrency={currentCurrency}\n              onLanguageChange={setCurrentLanguage}\n              onCurrencyChange={setCurrentCurrency}\n            />\n            <main className=\"flex-1\">\n              <ActivityDetail \n                activityId={params.id} \n                currentLanguage={currentLanguage}\n                currentCurrency={currentCurrency}\n              />\n            </main>\n            <Footer currentLanguage={currentLanguage} />\n          </div>\n        )}\n      </Route>\n      \n      <Route path=\"/\">\n        <div className=\"min-h-screen flex flex-col\">\n          <Header \n            currentLanguage={currentLanguage}\n            currentCurrency={currentCurrency}\n            onLanguageChange={setCurrentLanguage}\n            onCurrencyChange={setCurrentCurrency}\n          />\n          <main className=\"flex-1\">\n            <Home currentLanguage={currentLanguage} currentCurrency={currentCurrency} />\n          </main>\n          <Footer currentLanguage={currentLanguage} />\n        </div>\n      </Route>\n      \n      {/* 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  const [currentLanguage, setCurrentLanguage] = useState(\"en\");\n  const [currentCurrency, setCurrentCurrency] = useState(\"USD\");\n\n  return (\n    <>\n      <QueryClientProvider client={queryClient}>\n        <TooltipProvider>\n          <Router \n            currentLanguage={currentLanguage} \n            currentCurrency={currentCurrency}\n            setCurrentLanguage={setCurrentLanguage}\n            setCurrentCurrency={setCurrentCurrency}\n          />\n          <Toaster />\n        </TooltipProvider>\n      </QueryClientProvider>\n      <Chatbot />\n    </>\n  );\n}\n\nexport default App;","size_bytes":6639},"client/src/index.css":{"content":"/* Uppy Dashboard Styles */\n@import url(\"https://releases.transloadit.com/uppy/v3.4.0/uppy.min.css\");\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 40 10% 96%;\n\n  --foreground: 220 15% 15%;\n\n  --border: 40 8% 88%;\n\n  --card: 40 10% 94%;\n\n  --card-foreground: 220 15% 15%;\n\n  --card-border: 40 10% 90%;\n\n  --sidebar: 40 10% 92%;\n\n  --sidebar-foreground: 220 15% 15%;\n\n  --sidebar-border: 40 12% 86%;\n\n  --sidebar-primary: 25 60% 45%;\n\n  --sidebar-primary-foreground: 40 20% 95%;\n\n  --sidebar-accent: 35 20% 85%;\n\n  --sidebar-accent-foreground: 220 15% 20%;\n\n  --sidebar-ring: 25 60% 45%;\n\n  --popover: 40 12% 90%;\n\n  --popover-foreground: 220 15% 15%;\n\n  --popover-border: 40 12% 84%;\n\n  --primary: 25 60% 45%;\n\n  --primary-foreground: 40 20% 95%;\n\n  --secondary: 35 15% 86%;\n\n  --secondary-foreground: 220 15% 20%;\n\n  --muted: 35 12% 88%;\n\n  --muted-foreground: 220 10% 40%;\n\n  --accent: 200 40% 85%;\n\n  --accent-foreground: 220 15% 20%;\n\n  --destructive: 0 65% 50%;\n\n  --destructive-foreground: 0 10% 95%;\n\n  --input: 40 15% 80%;\n  --ring: 25 60% 45%;\n  --chart-1: 25 60% 45%;\n  --chart-2: 200 40% 55%;\n  --chart-3: 15 70% 55%;\n  --chart-4: 35 45% 35%;\n  --chart-5: 220 15% 25%;\n\n  --font-sans: Inter, sans-serif;\n  --font-serif: Playfair Display, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(25 60% 45% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(25 60% 45% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(25 60% 45% / 0.00), 0px 1px 2px -1px hsl(25 60% 45% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(25 60% 45% / 0.00), 0px 1px 2px -1px hsl(25 60% 45% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(25 60% 45% / 0.00), 0px 2px 4px -1px hsl(25 60% 45% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(25 60% 45% / 0.00), 0px 4px 6px -1px hsl(25 60% 45% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(25 60% 45% / 0.00), 0px 8px 10px -1px hsl(25 60% 45% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(25 60% 45% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 220 15% 8%;\n\n  --foreground: 40 15% 90%;\n\n  --border: 220 15% 16%;\n\n  --card: 220 15% 10%;\n\n  --card-foreground: 40 15% 90%;\n\n  --card-border: 220 15% 18%;\n\n  --sidebar: 220 15% 12%;\n\n  --sidebar-foreground: 40 15% 88%;\n\n  --sidebar-border: 220 15% 20%;\n\n  --sidebar-primary: 25 60% 45%;\n\n  --sidebar-primary-foreground: 40 20% 95%;\n\n  --sidebar-accent: 220 15% 16%;\n\n  --sidebar-accent-foreground: 40 15% 85%;\n\n  --sidebar-ring: 25 60% 45%;\n\n  --popover: 220 15% 14%;\n\n  --popover-foreground: 40 15% 88%;\n\n  --popover-border: 220 15% 22%;\n\n  --primary: 25 60% 45%;\n\n  --primary-foreground: 40 20% 95%;\n\n  --secondary: 220 15% 18%;\n\n  --secondary-foreground: 40 15% 85%;\n\n  --muted: 220 10% 16%;\n\n  --muted-foreground: 40 10% 65%;\n\n  --accent: 220 15% 16%;\n\n  --accent-foreground: 40 15% 85%;\n\n  --destructive: 0 65% 50%;\n\n  --destructive-foreground: 0 10% 95%;\n\n  --input: 220 15% 24%;\n  --ring: 25 60% 45%;\n  --chart-1: 25 60% 65%;\n  --chart-2: 200 40% 70%;\n  --chart-3: 15 70% 65%;\n  --chart-4: 35 45% 75%;\n  --chart-5: 220 15% 75%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 15% 8% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 15% 8% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 15% 8% / 0.00), 0px 1px 2px -1px hsl(220 15% 8% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 15% 8% / 0.00), 0px 1px 2px -1px hsl(220 15% 8% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 15% 8% / 0.00), 0px 2px 4px -1px hsl(220 15% 8% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 15% 8% / 0.00), 0px 4px 6px -1px hsl(220 15% 8% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 15% 8% / 0.00), 0px 8px 10px -1px hsl(220 15% 8% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 15% 8% / 0.00);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":9917},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ActivityCard.tsx":{"content":"import { Link } from \"wouter\";\nimport { Clock, Users, MapPin, Star } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Activity } from \"@shared/schema\";\n\ninterface ActivityCardProps {\n  activity: Activity;\n  currency: string;\n  currencySymbol: string;\n  currentLanguage: string;\n}\n\nexport default function ActivityCard({ \n  activity, \n  currency, \n  currencySymbol,\n  currentLanguage \n}: ActivityCardProps) {\n  const isRTL = currentLanguage === 'ar';\n\n  // Helper function to get localized text from JSONB fields\n  const getLocalizedText = (textObj: any, fallback = \"\") => {\n    if (!textObj) return fallback;\n    return textObj[currentLanguage as keyof typeof textObj] || textObj.en || fallback;\n  };\n\n  // Get the price for the current currency\n  const getPrice = () => {\n    if (!activity.prices) return 0;\n    const prices = activity.prices as { TND: number; USD: number; EUR: number };\n    return prices[currency as keyof typeof prices] || prices.USD || 0;\n  };\n\n  const activityTitle = getLocalizedText(activity.title);\n  const activityDescription = getLocalizedText(activity.description);\n  const activityHighlights = (activity.highlights as any)?.[currentLanguage] || (activity.highlights as any)?.en || [];\n  const activityPrice = getPrice();\n\n  const translations = {\n    en: {\n      duration: \"Duration\",\n      groupSize: \"Group Size\", \n      bookNow: \"Book Now\",\n      reviews: \"reviews\",\n      highlights: \"Highlights\"\n    },\n    fr: {\n      duration: \"Durée\",\n      groupSize: \"Taille du Groupe\",\n      bookNow: \"Réserver\",\n      reviews: \"avis\", \n      highlights: \"Points Forts\"\n    },\n    de: {\n      duration: \"Dauer\",\n      groupSize: \"Gruppengröße\",\n      bookNow: \"Jetzt Buchen\", \n      reviews: \"Bewertungen\",\n      highlights: \"Highlights\"\n    },\n    ar: {\n      duration: \"المدة\",\n      groupSize: \"حجم المجموعة\",\n      bookNow: \"احجز الآن\",\n      reviews: \"تقييم\",\n      highlights: \"المميزات\"\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  return (\n    <Card className=\"hover-elevate overflow-hidden group\">\n      {/* Image */}\n      <div className=\"relative h-64 overflow-hidden\">\n        <img \n          src={activity.imageUrl || \"/api/placeholder/400/300\"} \n          alt={activityTitle}\n          className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n        />\n        <div className=\"absolute top-4 left-4\">\n          <Badge variant=\"secondary\" className=\"bg-white/90 text-black\">\n            {activity.category}\n          </Badge>\n        </div>\n        <div className=\"absolute top-4 right-4\">\n          <div className=\"flex items-center space-x-1 bg-white/90 text-black px-2 py-1 rounded-full text-sm\">\n            <Star className=\"w-3 h-3 fill-yellow-400 text-yellow-400\" />\n            <span className=\"font-medium\">4.9</span>\n            <span className=\"text-muted-foreground\">(120+)</span>\n          </div>\n        </div>\n      </div>\n\n      <CardHeader className=\"pb-3\">\n        <div className={`flex justify-between items-start ${isRTL ? 'flex-row-reverse' : ''}`}>\n          <div className=\"flex-1\">\n            <h3 className={`text-xl font-semibold mb-2 ${isRTL ? 'text-right' : ''}`}>\n              {activityTitle}\n            </h3>\n            <p className={`text-muted-foreground text-sm ${isRTL ? 'text-right' : ''}`}>\n              {activityDescription}\n            </p>\n          </div>\n          <div className={`text-right ${isRTL ? 'text-left' : ''} ml-4`}>\n            <div className=\"text-2xl font-bold text-primary\" data-testid={`price-${activity.id}`}>\n              {currencySymbol}{activityPrice}\n            </div>\n            <div className=\"text-xs text-muted-foreground\">per person</div>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        {/* Activity details */}\n        <div className=\"flex flex-wrap gap-4 text-sm text-muted-foreground\">\n          <div className=\"flex items-center space-x-2\">\n            <Clock className=\"w-4 h-4\" />\n            <span>{t.duration}: {activity.duration}</span>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Users className=\"w-4 h-4\" />\n            <span>{t.groupSize}: {activity.groupSize}</span>\n          </div>\n        </div>\n\n        {/* Highlights */}\n        {activityHighlights && activityHighlights.length > 0 && (\n          <div>\n            <div className={`text-sm font-medium mb-2 ${isRTL ? 'text-right' : ''}`}>\n              {t.highlights}:\n            </div>\n            <div className=\"flex flex-wrap gap-1\">\n              {activityHighlights.map((highlight: string, index: number) => (\n                <Badge key={index} variant=\"outline\" className=\"text-xs\">\n                  {highlight}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Book button */}\n        <Button \n          asChild\n          className=\"w-full bg-primary hover:bg-primary/90\"\n        >\n          <Link \n            href=\"/booking\"\n            data-testid={`button-book-${activity.id}`}\n          >\n            {t.bookNow}\n          </Link>\n        </Button>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":5426},"client/src/components/BookingWidget.tsx":{"content":"import { useState } from \"react\";\nimport { Calendar, Users, Clock, CreditCard, MessageCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Calendar as CalendarComponent } from \"@/components/ui/calendar\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\ninterface BookingWidgetProps {\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\nconst activities = [\n  { id: \"camel-2day\", name: \"2-Day Camel Trek\", price: { TND: 180, USD: 60, EUR: 55 }, duration: \"2 days\" },\n  { id: \"camel-3day\", name: \"3-Day Desert Adventure\", price: { TND: 270, USD: 90, EUR: 82 }, duration: \"3 days\" },\n  { id: \"camel-5day\", name: \"5-Day Sahara Journey\", price: { TND: 450, USD: 150, EUR: 137 }, duration: \"5 days\" },\n  { id: \"desert-dinner\", name: \"Desert Dinner Experience\", price: { TND: 75, USD: 25, EUR: 23 }, duration: \"Evening\" },\n  { id: \"cultural-day\", name: \"Cultural Activities Day\", price: { TND: 120, USD: 40, EUR: 37 }, duration: \"Full day\" },\n];\n\nconst currencySymbols = {\n  TND: \"د.ت\",\n  USD: \"$\", \n  EUR: \"€\"\n};\n\nexport default function BookingWidget({ currentLanguage, currentCurrency }: BookingWidgetProps) {\n  const [selectedActivity, setSelectedActivity] = useState(\"\");\n  const [selectedDate, setSelectedDate] = useState<Date>();\n  const [groupSize, setGroupSize] = useState(2);\n  const [step, setStep] = useState(1);\n\n  const selectedActivityData = activities.find(a => a.id === selectedActivity);\n  const totalPrice = selectedActivityData ? selectedActivityData.price[currentCurrency as keyof typeof selectedActivityData.price] * groupSize : 0;\n  const depositAmount = Math.round(totalPrice * 0.1);\n\n  const translations = {\n    en: {\n      title: \"Book Your Desert Adventure\",\n      selectActivity: \"Select Activity\", \n      selectDate: \"Select Date\",\n      groupSize: \"Group Size\",\n      people: \"people\",\n      totalPrice: \"Total Price\",\n      deposit: \"Deposit Required (10%)\",\n      bookNow: \"Book Now\",\n      payDeposit: \"Pay Deposit\",\n      nextStep: \"Next Step\",\n      contactWhatsApp: \"Contact WhatsApp\"\n    },\n    fr: {\n      title: \"Réservez Votre Aventure Désertique\",\n      selectActivity: \"Sélectionner l'Activité\",\n      selectDate: \"Sélectionner la Date\", \n      groupSize: \"Taille du Groupe\",\n      people: \"personnes\",\n      totalPrice: \"Prix Total\",\n      deposit: \"Acompte Requis (10%)\",\n      bookNow: \"Réserver Maintenant\",\n      payDeposit: \"Payer l'Acompte\",\n      nextStep: \"Étape Suivante\",\n      contactWhatsApp: \"Contacter WhatsApp\"\n    },\n    de: {\n      title: \"Buchen Sie Ihr Wüstenabenteuer\",\n      selectActivity: \"Aktivität Auswählen\",\n      selectDate: \"Datum Auswählen\",\n      groupSize: \"Gruppengröße\", \n      people: \"Personen\",\n      totalPrice: \"Gesamtpreis\",\n      deposit: \"Anzahlung Erforderlich (10%)\",\n      bookNow: \"Jetzt Buchen\",\n      payDeposit: \"Anzahlung Bezahlen\",\n      nextStep: \"Nächster Schritt\",\n      contactWhatsApp: \"WhatsApp Kontakt\"\n    },\n    ar: {\n      title: \"احجز مغامرتك الصحراوية\",\n      selectActivity: \"اختر النشاط\",\n      selectDate: \"اختر التاريخ\",\n      groupSize: \"حجم المجموعة\",\n      people: \"أشخاص\", \n      totalPrice: \"السعر الإجمالي\",\n      deposit: \"عربون مطلوب (10%)\",\n      bookNow: \"احجز الآن\",\n      payDeposit: \"ادفع العربون\",\n      nextStep: \"الخطوة التالية\",\n      contactWhatsApp: \"تواصل واتساب\"\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n  const isRTL = currentLanguage === 'ar';\n\n  const handleBooking = () => {\n    console.log('Booking submitted:', {\n      activity: selectedActivity,\n      date: selectedDate,\n      groupSize,\n      totalPrice,\n      depositAmount,\n      currency: currentCurrency\n    });\n    alert(`Booking submitted! Total: ${currencySymbols[currentCurrency as keyof typeof currencySymbols]}${totalPrice}, Deposit: ${currencySymbols[currentCurrency as keyof typeof currencySymbols]}${depositAmount}`);\n  };\n\n  const handleWhatsAppContact = () => {\n    const whatsappUrl = \"https://wa.me/21640676420\";\n    window.open(whatsappUrl, '_blank');\n    console.log('WhatsApp contact opened');\n  };\n\n  return (\n    <Card className=\"w-full max-w-md\">\n      <CardHeader>\n        <CardTitle className={`text-xl font-semibold ${isRTL ? 'text-right' : ''}`}>\n          {t.title}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-6\">\n        {/* Step 1: Select Activity */}\n        <div className=\"space-y-3\">\n          <Label htmlFor=\"activity\" className={isRTL ? 'text-right block' : ''}>{t.selectActivity}</Label>\n          <Select value={selectedActivity} onValueChange={setSelectedActivity}>\n            <SelectTrigger data-testid=\"select-activity\">\n              <SelectValue placeholder={t.selectActivity} />\n            </SelectTrigger>\n            <SelectContent>\n              {activities.map((activity) => (\n                <SelectItem key={activity.id} value={activity.id}>\n                  <div className=\"flex justify-between items-center w-full\">\n                    <span>{activity.name}</span>\n                    <span className=\"ml-4 text-muted-foreground\">\n                      {currencySymbols[currentCurrency as keyof typeof currencySymbols]}\n                      {activity.price[currentCurrency as keyof typeof activity.price]}\n                    </span>\n                  </div>\n                </SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n\n        {selectedActivity && (\n          <>\n            {/* Step 2: Select Date */}\n            <div className=\"space-y-3\">\n              <Label className={isRTL ? 'text-right block' : ''}>{t.selectDate}</Label>\n              <Popover>\n                <PopoverTrigger asChild>\n                  <Button variant=\"outline\" className=\"w-full justify-start\" data-testid=\"button-select-date\">\n                    <Calendar className=\"w-4 h-4 mr-2\" />\n                    {selectedDate ? selectedDate.toLocaleDateString() : t.selectDate}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-auto p-0\">\n                  <CalendarComponent\n                    mode=\"single\"\n                    selected={selectedDate}\n                    onSelect={setSelectedDate}\n                    disabled={(date) => date < new Date()}\n                  />\n                </PopoverContent>\n              </Popover>\n            </div>\n\n            {/* Step 3: Group Size */}\n            <div className=\"space-y-3\">\n              <Label className={isRTL ? 'text-right block' : ''}>\n                {t.groupSize} ({t.people})\n              </Label>\n              <div className=\"flex items-center space-x-4\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setGroupSize(Math.max(1, groupSize - 1))}\n                  disabled={groupSize <= 1}\n                  data-testid=\"button-decrease-group-size\"\n                >\n                  -\n                </Button>\n                <span className=\"px-4 py-2 border rounded text-center min-w-16\" data-testid=\"text-group-size\">\n                  {groupSize}\n                </span>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\" \n                  onClick={() => setGroupSize(Math.min(20, groupSize + 1))}\n                  disabled={groupSize >= 20}\n                  data-testid=\"button-increase-group-size\"\n                >\n                  +\n                </Button>\n              </div>\n            </div>\n\n            {/* Price Summary */}\n            <div className=\"border-t pt-4 space-y-2\">\n              <div className={`flex justify-between items-center ${isRTL ? 'flex-row-reverse' : ''}`}>\n                <span className=\"font-medium\">{t.totalPrice}:</span>\n                <span className=\"font-bold text-lg\" data-testid=\"text-total-price\">\n                  {currencySymbols[currentCurrency as keyof typeof currencySymbols]}{totalPrice}\n                </span>\n              </div>\n              <div className={`flex justify-between items-center text-sm text-muted-foreground ${isRTL ? 'flex-row-reverse' : ''}`}>\n                <span>{t.deposit}:</span>\n                <span data-testid=\"text-deposit-amount\">\n                  {currencySymbols[currentCurrency as keyof typeof currencySymbols]}{depositAmount}\n                </span>\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"space-y-3\">\n              <Button \n                className=\"w-full bg-primary hover:bg-primary/90\" \n                onClick={handleBooking}\n                disabled={!selectedDate || !selectedActivity}\n                data-testid=\"button-book-activity\"\n              >\n                <CreditCard className=\"w-4 h-4 mr-2\" />\n                {t.payDeposit}\n              </Button>\n              \n              <Button \n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={handleWhatsAppContact}\n                data-testid=\"button-whatsapp-contact\"\n              >\n                <MessageCircle className=\"w-4 h-4 mr-2\" />\n                {t.contactWhatsApp}\n              </Button>\n            </div>\n          </>\n        )}\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":9788},"client/src/components/CurrencySelector.tsx":{"content":"import { ChevronDown, DollarSign } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface CurrencySelectorProps {\n  currentCurrency: string;\n  onCurrencyChange: (currency: string) => void;\n}\n\nconst currencies = [\n  { code: \"TND\", name: \"Tunisian Dinar\", symbol: \"د.ت\" },\n  { code: \"USD\", name: \"US Dollar\", symbol: \"$\" },\n  { code: \"EUR\", name: \"Euro\", symbol: \"€\" },\n];\n\nexport default function CurrencySelector({ currentCurrency, onCurrencyChange }: CurrencySelectorProps) {\n  const currentCurr = currencies.find(curr => curr.code === currentCurrency) || currencies[0];\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"sm\" className=\"text-muted-foreground\" data-testid=\"button-currency-selector\">\n          <DollarSign className=\"w-4 h-4 mr-1\" />\n          <span className=\"hidden sm:inline\">{currentCurr.code}</span>\n          <span className=\"sm:hidden\">{currentCurr.symbol}</span>\n          <ChevronDown className=\"w-3 h-3 ml-1\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-40\">\n        {currencies.map((currency) => (\n          <DropdownMenuItem\n            key={currency.code}\n            onClick={() => {\n              onCurrencyChange(currency.code);\n              console.log(`Currency changed to ${currency.name}`);\n            }}\n            className={`flex items-center justify-between ${\n              currentCurrency === currency.code ? \"bg-accent\" : \"\"\n            }`}\n            data-testid={`option-currency-${currency.code}`}\n          >\n            <span>{currency.code}</span>\n            <span>{currency.symbol}</span>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}","size_bytes":1914},"client/src/components/Footer.tsx":{"content":"import { MapPin, Phone, Mail, Facebook, Instagram, Youtube } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { LocationDisplay } from \"@/components/LocationDisplay\";\nimport { useSiteSettings } from \"@/hooks/use-site-settings\";\n\ninterface FooterProps {\n  currentLanguage: string;\n}\n\nexport default function Footer({ currentLanguage }: FooterProps) {\n  const isRTL = currentLanguage === 'ar';\n  const { data: settings, isLoading: settingsLoading } = useSiteSettings();\n  \n  // Type assertion to help TypeScript understand the data structure\n  const siteSettings = settings as any;\n\n  const translations = {\n    en: {\n      tagline: \"Authentic Desert Adventures\",\n      quickLinks: \"Quick Links\",\n      activities: \"Activities\", \n      gallery: \"Gallery\",\n      about: \"About Us\",\n      contact: \"Contact\",\n      admin: \"Admin\",\n      contactInfo: \"Contact Information\",\n      address: \"Douz, Kebili Governorate, Tunisia\",\n      followUs: \"Follow Us\",\n      copyright: \"© 2024 Sghayra Tours. All rights reserved.\",\n      links: {\n        home: \"Home\",\n        activities: \"Our Activities\",\n        gallery: \"Photo Gallery\", \n        about: \"About Sghayra Tours\",\n        contact: \"Get in Touch\",\n        admin: \"Admin Dashboard\"\n      }\n    },\n    fr: {\n      tagline: \"Aventures Authentiques du Désert\",\n      quickLinks: \"Liens Rapides\",\n      activities: \"Activités\",\n      gallery: \"Galerie\", \n      about: \"À Propos\",\n      contact: \"Contact\",\n      admin: \"Admin\",\n      contactInfo: \"Informations de Contact\",\n      address: \"Douz, Gouvernorat de Kebili, Tunisie\",\n      followUs: \"Suivez-Nous\", \n      copyright: \"© 2024 Sghayra Tours. Tous droits réservés.\",\n      links: {\n        home: \"Accueil\",\n        activities: \"Nos Activités\", \n        gallery: \"Galerie Photos\",\n        about: \"À Propos de Sghayra Tours\",\n        contact: \"Nous Contacter\",\n        admin: \"Tableau de Bord Admin\"\n      }\n    },\n    de: {\n      tagline: \"Authentische Wüstenabenteuer\",\n      quickLinks: \"Schnelllinks\",\n      activities: \"Aktivitäten\",\n      gallery: \"Galerie\",\n      about: \"Über Uns\", \n      contact: \"Kontakt\",\n      admin: \"Admin\",\n      contactInfo: \"Kontaktinformationen\",\n      address: \"Douz, Gouvernement Kebili, Tunesien\",\n      followUs: \"Folgen Sie Uns\",\n      copyright: \"© 2024 Sghayra Tours. Alle Rechte vorbehalten.\", \n      links: {\n        home: \"Startseite\",\n        activities: \"Unsere Aktivitäten\",\n        gallery: \"Fotogalerie\",\n        about: \"Über Sghayra Tours\", \n        contact: \"Kontakt Aufnehmen\",\n        admin: \"Admin Dashboard\"\n      }\n    },\n    ar: {\n      tagline: \"مغامرات صحراوية أصيلة\",\n      quickLinks: \"روابط سريعة\", \n      activities: \"الأنشطة\",\n      gallery: \"المعرض\",\n      about: \"من نحن\",\n      contact: \"اتصل بنا\",\n      admin: \"الإدارة\",\n      contactInfo: \"معلومات الاتصال\",\n      address: \"دوز، ولاية قبلي، تونس\",\n      followUs: \"تابعنا\",\n      copyright: \"© 2024 سغيرة تورز. جميع الحقوق محفوظة.\",\n      links: {\n        home: \"الرئيسية\",\n        activities: \"أنشطتنا\", \n        gallery: \"معرض الصور\",\n        about: \"حول سغيرة تورز\",\n        contact: \"تواصل معنا\", \n        admin: \"لوحة الإدارة\"\n      }\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  // Dynamic social links from settings\n  const socialLinks = [];\n  if (siteSettings?.social_media) {\n    if (siteSettings.social_media.facebook) {\n      socialLinks.push({ icon: Facebook, href: siteSettings.social_media.facebook, name: \"Facebook\" });\n    }\n    if (siteSettings.social_media.instagram) {\n      socialLinks.push({ icon: Instagram, href: siteSettings.social_media.instagram, name: \"Instagram\" });\n    }\n    if (siteSettings.social_media.twitter) {\n      socialLinks.push({ icon: Youtube, href: siteSettings.social_media.twitter, name: \"Twitter\" });\n    }\n  }\n  \n  // Fallback social links if no settings loaded\n  if (socialLinks.length === 0) {\n    socialLinks.push(\n      { icon: Facebook, href: \"#\", name: \"Facebook\" },\n      { icon: Instagram, href: \"#\", name: \"Instagram\" }, \n      { icon: Youtube, href: \"#\", name: \"YouTube\" }\n    );\n  }\n\n  const quickLinks = [\n    { name: t.links.home, href: \"/\" },\n    { name: t.links.activities, href: \"/activities\" },\n    { name: t.links.gallery, href: \"/gallery\" },\n    { name: t.links.about, href: \"/about\" },\n    { name: t.links.contact, href: \"/contact\" },\n   { name: t.links.admin, href: \"/admin/dashboard\" },\n  ];\n\n  return (\n    <footer className=\"bg-card border-t border-border\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 ${isRTL ? 'text-right' : ''}`}>\n          {/* Brand */}\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"text-2xl font-serif font-bold text-primary\">\n                {siteSettings?.company_info?.name \n                  ? siteSettings.company_info.name[currentLanguage as keyof typeof siteSettings.company_info.name] || siteSettings.company_info.name.en\n                  : \"Sghayra Tours\"}\n              </h3>\n              <p className=\"text-muted-foreground\">\n                {siteSettings?.company_info?.tagline \n                  ? siteSettings.company_info.tagline[currentLanguage as keyof typeof siteSettings.company_info.tagline] || siteSettings.company_info.tagline.en\n                  : t.tagline}\n              </p>\n            </div>\n            <p className=\"text-sm text-muted-foreground max-w-sm\">\n              {siteSettings?.company_info?.about \n                ? siteSettings.company_info.about[currentLanguage as keyof typeof siteSettings.company_info.about] || siteSettings.company_info.about.en\n                : \"Experience the authentic beauty of the Tunisian Sahara with our expert local guides and traditional Berber hospitality.\"}\n            </p>\n          </div>\n\n          {/* Quick Links */}\n          <div className=\"space-y-4\">\n            <h4 className=\"text-lg font-semibold text-foreground\">{t.quickLinks}</h4>\n            <ul className=\"space-y-2\">\n              {quickLinks.map((link) => (\n                <li key={link.href}>\n                  <Link href={link.href}>\n                    <Button \n                      variant=\"ghost\" \n                      className={`p-0 h-auto text-muted-foreground hover:text-primary ${isRTL ? 'justify-end' : 'justify-start'}`}\n                      data-testid={`link-footer-${link.href.slice(1) || 'home'}`}\n                    >\n                      {link.name}\n                    </Button>\n                  </Link>\n                </li>\n              ))}\n            </ul>\n          </div>\n\n          {/* Contact Info */}\n          <div className=\"space-y-4\">\n            <h4 className=\"text-lg font-semibold text-foreground\">{t.contactInfo}</h4>\n            <div className=\"space-y-3\">\n              {/* Location Display */}\n              {siteSettings?.location_info && siteSettings.location_info.isActive && siteSettings.location_info.displayOnFooter && (\n                <LocationDisplay\n                  locationInfo={siteSettings.location_info}\n                  language={currentLanguage as 'en' | 'fr' | 'de' | 'ar'}\n                  variant=\"inline\"\n                  showMapButton={false}\n                  className={isRTL ? 'flex-row-reverse space-x-reverse' : ''}\n                />\n              )}\n              <div className={`flex items-center space-x-3 ${isRTL ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                <Phone className=\"w-5 h-5 text-primary flex-shrink-0\" />\n                <span className=\"text-sm text-muted-foreground\">\n                  {siteSettings?.contact_details?.phone \n                    ? siteSettings.contact_details.phone\n                    : \"+216 XX XXX XXX\"}\n                </span>\n              </div>\n              <div className={`flex items-center space-x-3 ${isRTL ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                <Mail className=\"w-5 h-5 text-primary flex-shrink-0\" />\n                <span className=\"text-sm text-muted-foreground\">\n                  {siteSettings?.contact_details?.email \n                    ? siteSettings.contact_details.email\n                    : \"info@sghayratours.com\"}\n                </span>\n              </div>\n            </div>\n          </div>\n\n          {/* Social Media */}\n          <div className=\"space-y-4\">\n            <h4 className=\"text-lg font-semibold text-foreground\">{t.followUs}</h4>\n            <div className={`flex space-x-4 ${isRTL ? 'flex-row-reverse space-x-reverse' : ''}`}>\n              {socialLinks.map((social) => (\n                <Button\n                  key={social.name}\n                  variant=\"outline\"\n                  size=\"icon\"\n                  className=\"hover:bg-primary hover:text-primary-foreground\"\n                  onClick={() => social.href !== \"#\" ? window.open(social.href, '_blank', 'noopener,noreferrer') : console.log(`Visit ${social.name}`)}\n                  data-testid={`link-social-${social.name.toLowerCase()}`}\n                >\n                  <social.icon className=\"w-5 h-5\" />\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* Bottom bar */}\n        <div className={`mt-12 pt-8 border-t border-border text-center ${isRTL ? 'text-right' : ''}`}>\n          <p className=\"text-sm text-muted-foreground\">{t.copyright}</p>\n        </div>\n      </div>\n    </footer>\n  );\n}","size_bytes":9734},"client/src/components/Gallery.tsx":{"content":"import { useState } from \"react\";\nimport { Play, X, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n} from \"@/components/ui/dialog\";\n\ninterface GalleryItem {\n  id: string;\n  type: 'image' | 'video';\n  src: string;\n  thumbnail: string;\n  title: string;\n  description: string;\n}\n\ninterface GalleryProps {\n  items: GalleryItem[];\n  currentLanguage: string;\n}\n\nexport default function Gallery({ items, currentLanguage }: GalleryProps) {\n  const [selectedItem, setSelectedItem] = useState<GalleryItem | null>(null);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const isRTL = currentLanguage === 'ar';\n\n  const translations = {\n    en: {\n      title: \"Experience Gallery\",\n      subtitle: \"Discover the beauty of our desert adventures\",\n      viewAll: \"View All\",\n      close: \"Close\"\n    },\n    fr: {\n      title: \"Galerie d'Expériences\", \n      subtitle: \"Découvrez la beauté de nos aventures désertiques\",\n      viewAll: \"Voir Tout\",\n      close: \"Fermer\"\n    },\n    de: {\n      title: \"Erlebnis-Galerie\",\n      subtitle: \"Entdecken Sie die Schönheit unserer Wüstenabenteuer\", \n      viewAll: \"Alle Anzeigen\",\n      close: \"Schließen\"\n    },\n    ar: {\n      title: \"معرض التجارب\",\n      subtitle: \"اكتشف جمال مغامراتنا الصحراوية\",\n      viewAll: \"عرض الكل\", \n      close: \"إغلاق\"\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  const openItem = (item: GalleryItem, index: number) => {\n    setSelectedItem(item);\n    setSelectedIndex(index);\n  };\n\n  const navigateItem = (direction: 'prev' | 'next') => {\n    const newIndex = direction === 'prev' \n      ? (selectedIndex - 1 + items.length) % items.length\n      : (selectedIndex + 1) % items.length;\n    setSelectedIndex(newIndex);\n    setSelectedItem(items[newIndex]);\n  };\n\n  return (\n    <section className=\"py-16 bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className={`text-center mb-12 ${isRTL ? 'text-right' : ''}`}>\n          <h2 className=\"text-3xl sm:text-4xl font-serif font-bold text-foreground mb-4\">\n            {t.title}\n          </h2>\n          <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n            {t.subtitle}\n          </p>\n        </div>\n\n        {/* Gallery Grid */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n          {items.map((item, index) => (\n            <div \n              key={item.id}\n              className=\"relative group cursor-pointer hover-elevate rounded-lg overflow-hidden\"\n              onClick={() => openItem(item, index)}\n              data-testid={`gallery-item-${item.id}`}\n            >\n              <div className=\"aspect-square relative\">\n                <img \n                  src={item.thumbnail} \n                  alt={item.title}\n                  className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n                />\n                \n                {/* Overlay */}\n                <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center\">\n                  {item.type === 'video' ? (\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-full p-4\">\n                      <Play className=\"w-8 h-8 text-white fill-white\" />\n                    </div>\n                  ) : (\n                    <div className=\"bg-white/20 backdrop-blur-sm rounded-full p-4\">\n                      <div className=\"w-8 h-8 text-white\">🔍</div>\n                    </div>\n                  )}\n                </div>\n\n                {/* Video indicator */}\n                {item.type === 'video' && (\n                  <div className=\"absolute top-2 right-2 bg-black/60 text-white px-2 py-1 rounded text-xs\">\n                    Video\n                  </div>\n                )}\n              </div>\n\n              {/* Title overlay */}\n              <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4\">\n                <h3 className=\"text-white font-medium text-sm\">{item.title}</h3>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* View All Button */}\n        <div className=\"text-center mt-12\">\n          <Button \n            variant=\"outline\" \n            size=\"lg\"\n            onClick={() => console.log('View all gallery items')}\n            data-testid=\"button-view-all-gallery\"\n          >\n            {t.viewAll}\n          </Button>\n        </div>\n      </div>\n\n      {/* Modal */}\n      <Dialog open={!!selectedItem} onOpenChange={() => setSelectedItem(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] p-0\">\n          {selectedItem && (\n            <div className=\"relative\">\n              {/* Navigation */}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white hover:bg-black/70\"\n                onClick={() => navigateItem('prev')}\n                data-testid=\"button-gallery-prev\"\n              >\n                <ChevronLeft className=\"w-6 h-6\" />\n              </Button>\n              \n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 bg-black/50 text-white hover:bg-black/70\"\n                onClick={() => navigateItem('next')}\n                data-testid=\"button-gallery-next\"\n              >\n                <ChevronRight className=\"w-6 h-6\" />\n              </Button>\n\n              {/* Close button */}\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"absolute top-4 right-4 z-10 bg-black/50 text-white hover:bg-black/70\"\n                onClick={() => setSelectedItem(null)}\n                data-testid=\"button-gallery-close\"\n              >\n                <X className=\"w-6 h-6\" />\n              </Button>\n\n              {/* Content */}\n              <div className=\"relative\">\n                {selectedItem.type === 'video' ? (\n                  <video \n                    src={selectedItem.src}\n                    controls\n                    className=\"w-full max-h-[70vh] object-contain\"\n                    autoPlay\n                  />\n                ) : (\n                  <img \n                    src={selectedItem.src}\n                    alt={selectedItem.title}\n                    className=\"w-full max-h-[70vh] object-contain\"\n                  />\n                )}\n              </div>\n\n              {/* Description */}\n              <div className=\"p-6\">\n                <h3 className=\"text-xl font-semibold mb-2\">{selectedItem.title}</h3>\n                <p className=\"text-muted-foreground\">{selectedItem.description}</p>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </section>\n  );\n}","size_bytes":7169},"client/src/components/Header.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { Menu, X, MapPin, Phone, Mail } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport LanguageSelector from \"./LanguageSelector\";\nimport CurrencySelector from \"./CurrencySelector\";\nimport ThemeToggle from \"./ThemeToggle\";\n\ninterface HeaderProps {\n  currentLanguage: string;\n  currentCurrency: string;\n  onLanguageChange: (language: string) => void;\n  onCurrencyChange: (currency: string) => void;\n}\n\nexport default function Header({ \n  currentLanguage, \n  currentCurrency, \n  onLanguageChange, \n  onCurrencyChange \n}: HeaderProps) {\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n  const navigation = [\n    { name: \"Home\", href: \"/\" },\n    { name: \"Activities\", href: \"/activities\" },\n    { name: \"Gallery\", href: \"/gallery\" },\n    { name: \"About\", href: \"/about\" },\n    { name: \"Contact\", href: \"/contact\" },\n  ];\n\n  return (\n    <header className=\"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border\">\n      {/* Top bar */}\n      <div className=\"border-b border-border/50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-2 text-sm\">\n            <div className=\"hidden md:flex items-center space-x-4 text-muted-foreground\">\n              <div className=\"flex items-center space-x-1\">\n                <Phone className=\"w-3 h-3\" />\n                <span>+216 40 676 420</span>\n              </div>\n              <div className=\"flex items-center space-x-1\">\n                <Mail className=\"w-3 h-3\" />\n                <span>info@sghayratours.com</span>\n              </div>\n              <div className=\"flex items-center space-x-1\">\n                <MapPin className=\"w-3 h-3\" />\n                <span>Douz, Tunisia</span>\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <LanguageSelector \n                currentLanguage={currentLanguage} \n                onLanguageChange={onLanguageChange} \n              />\n              <CurrencySelector \n                currentCurrency={currentCurrency} \n                onCurrencyChange={onCurrencyChange} \n              />\n              <ThemeToggle />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main header */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center py-4\">\n          <Link href=\"/\">\n            <div className=\"flex items-center space-x-2 hover-elevate rounded-md px-2 py-1\">\n              <div className=\"text-2xl font-serif font-bold text-primary\">\n                Sghayra Tours\n              </div>\n              <div className=\"text-xs text-muted-foreground font-medium\">\n                Authentic Desert Adventures\n              </div>\n            </div>\n          </Link>\n\n          {/* Desktop navigation */}\n          <nav className=\"hidden md:flex space-x-8\">\n            {navigation.map((item) => (\n              <Link key={item.name} href={item.href}>\n                <Button variant=\"ghost\" className=\"text-foreground hover:text-primary\">\n                  {item.name}\n                </Button>\n              </Link>\n            ))}\n          </nav>\n\n          {/* Book Now button */}\n          <div className=\"hidden md:flex items-center space-x-4\">\n            <Button asChild data-testid=\"button-book-now\" className=\"bg-primary hover:bg-primary/90\">\n              <Link href=\"/booking\">\n                Book Now\n              </Link>\n            </Button>\n          </div>\n\n          {/* Mobile menu button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"md:hidden\"\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\n            data-testid=\"button-mobile-menu\"\n          >\n            {isMenuOpen ? <X className=\"w-5 h-5\" /> : <Menu className=\"w-5 h-5\" />}\n          </Button>\n        </div>\n      </div>\n\n      {/* Mobile menu */}\n      {isMenuOpen && (\n        <div className=\"md:hidden border-t border-border\">\n          <div className=\"px-4 py-4 space-y-4\">\n            {navigation.map((item) => (\n              <Link key={item.name} href={item.href}>\n                <Button \n                  variant=\"ghost\" \n                  className=\"w-full justify-start text-foreground hover:text-primary\"\n                  onClick={() => setIsMenuOpen(false)}\n                >\n                  {item.name}\n                </Button>\n              </Link>\n            ))}\n            <Button asChild className=\"w-full bg-primary hover:bg-primary/90\" data-testid=\"button-book-now-mobile\">\n              <Link href=\"/booking\">\n                Book Now\n              </Link>\n            </Button>\n          </div>\n        </div>\n      )}\n    </header>\n  );\n}","size_bytes":4893},"client/src/components/Hero.tsx":{"content":"import { useState } from \"react\";\nimport { Link } from \"wouter\";\nimport { Calendar, Users, MapPin, Star } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport BookingWidget from \"./BookingWidget\";\nimport { useSiteSettings } from \"@/hooks/use-site-settings\";\nimport heroImage from \"@assets/generated_images/Sahara_desert_hero_background_840d4412.png\";\n\ninterface HeroProps {\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\nexport default function Hero({ currentLanguage, currentCurrency }: HeroProps) {\n  const [showBooking, setShowBooking] = useState(false);\n  const { data: settings } = useSiteSettings();\n  \n  // Type assertion to help TypeScript understand the data structure\n  const siteSettings = settings as any;\n\n  const translations = {\n    en: {\n      title: \"Discover the Magic of the Sahara\",\n      subtitle: \"Authentic Desert Adventures Await\",\n      description: \"Experience the wonder of Tunisia's Sahara desert with our authentic camel tours, traditional Berber cuisine, and cultural immersion experiences.\",\n      bookNow: \"Book Your Adventure\",\n      learnMore: \"Learn More\",\n      stats: {\n        experience: \"15+ Years Experience\",\n        tours: \"500+ Tours Completed\", \n        rating: \"4.9/5 Rating\",\n        guides: \"Expert Local Guides\"\n      }\n    },\n    fr: {\n      title: \"Découvrez la Magie du Sahara\",\n      subtitle: \"Aventures Authentiques du Désert\",\n      description: \"Vivez la merveille du désert du Sahara tunisien avec nos tours authentiques à dos de chameau, la cuisine berbère traditionnelle et les expériences d'immersion culturelle.\",\n      bookNow: \"Réservez Votre Aventure\",\n      learnMore: \"En Savoir Plus\",\n      stats: {\n        experience: \"15+ Ans d'Expérience\",\n        tours: \"500+ Tours Complétés\",\n        rating: \"4.9/5 Évaluation\", \n        guides: \"Guides Locaux Experts\"\n      }\n    },\n    de: {\n      title: \"Entdecken Sie die Magie der Sahara\",\n      subtitle: \"Authentische Wüstenabenteuer Warten\",\n      description: \"Erleben Sie das Wunder der tunesischen Sahara mit unseren authentischen Kameltouren, traditioneller Berberküche und kulturellen Eintaucherlebnissen.\",\n      bookNow: \"Buchen Sie Ihr Abenteuer\",\n      learnMore: \"Mehr Erfahren\",\n      stats: {\n        experience: \"15+ Jahre Erfahrung\",\n        tours: \"500+ Touren Abgeschlossen\",\n        rating: \"4.9/5 Bewertung\",\n        guides: \"Experten Ortskundige Führer\"\n      }\n    },\n    ar: {\n      title: \"اكتشف سحر الصحراء\",\n      subtitle: \"مغامرات صحراوية أصيلة في انتظارك\",\n      description: \"اختبر عجائب الصحراء التونسية مع جولاتنا الأصيلة على الجمال والمأكولات البربرية التقليدية وتجارب الانغماس الثقافي.\",\n      bookNow: \"احجز مغامرتك\",\n      learnMore: \"اعرف المزيد\", \n      stats: {\n        experience: \"خبرة أكثر من 15 سنة\",\n        tours: \"أكثر من 500 جولة مكتملة\",\n        rating: \"تقييم 4.9/5\",\n        guides: \"مرشدون محليون خبراء\"\n      }\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n  const isRTL = currentLanguage === 'ar';\n\n  return (\n    <div className=\"relative min-h-screen flex items-center overflow-hidden\">\n      {/* Background image with overlay */}\n      <div \n        className=\"absolute inset-0 bg-cover bg-center bg-no-repeat\"\n        style={{ backgroundImage: `url(${heroImage})` }}\n      >\n        <div className=\"absolute inset-0 bg-gradient-to-r from-black/60 via-black/40 to-black/30\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid lg:grid-cols-2 gap-12 items-center\">\n          {/* Left side - Text content */}\n          <div className={`text-white space-y-8 ${isRTL ? 'lg:order-2 text-right' : ''}`}>\n            <div className=\"space-y-4\">\n              <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-serif font-bold leading-tight\">\n                {siteSettings?.company_info?.name\n                  ? siteSettings.company_info.name[currentLanguage as keyof typeof siteSettings.company_info.name] || siteSettings.company_info.name.en\n                  : t.title}\n              </h1>\n              <p className=\"text-xl sm:text-2xl text-white/90 font-medium\">\n                {siteSettings?.company_info?.tagline\n                  ? siteSettings.company_info.tagline[currentLanguage as keyof typeof siteSettings.company_info.tagline] || siteSettings.company_info.tagline.en\n                  : t.subtitle}\n              </p>\n              <p className=\"text-lg text-white/80 max-w-2xl\">\n                {siteSettings?.company_info?.about\n                  ? siteSettings.company_info.about[currentLanguage as keyof typeof siteSettings.company_info.about] || siteSettings.company_info.about.en\n                  : t.description}\n              </p>\n            </div>\n\n            {/* CTA Buttons */}\n            <div className={`flex flex-wrap gap-4 ${isRTL ? 'justify-end' : ''}`}>\n              <Button \n                asChild\n                size=\"lg\" \n                className=\"bg-primary hover:bg-primary/90 text-primary-foreground px-8 py-3 text-lg\"\n              >\n                <Link href=\"/booking\" data-testid=\"button-hero-book-now\">\n                  <Calendar className=\"w-5 h-5 mr-2\" />\n                  {t.bookNow}\n                </Link>\n              </Button>\n              <Button \n                asChild\n                size=\"lg\" \n                variant=\"outline\" \n                className=\"border-white text-white hover:bg-white hover:text-black px-8 py-3 text-lg backdrop-blur-sm\"\n              >\n                <Link href=\"/about\" data-testid=\"button-hero-learn-more\">\n                  {t.learnMore}\n                </Link>\n              </Button>\n            </div>\n\n            {/* Stats */}\n            <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-8\">\n              {Object.values(t.stats).map((stat, index) => (\n                <div key={index} className=\"text-center lg:text-left\">\n                  <div className=\"flex items-center justify-center lg:justify-start mb-2\">\n                    {index === 0 && <Star className=\"w-5 h-5 text-yellow-400 mr-1\" />}\n                    {index === 1 && <Users className=\"w-5 h-5 text-blue-400 mr-1\" />}\n                    {index === 2 && <Star className=\"w-5 h-5 text-yellow-400 mr-1\" />}\n                    {index === 3 && <MapPin className=\"w-5 h-5 text-green-400 mr-1\" />}\n                  </div>\n                  <div className=\"text-sm text-white/90 font-medium\">{stat}</div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Right side - Booking widget */}\n          <div className={`${isRTL ? 'lg:order-1' : ''}`}>\n            {showBooking ? (\n              <Card className=\"backdrop-blur-md bg-white/10 border-white/20\">\n                <CardContent className=\"p-0\">\n                  <BookingWidget \n                    currentLanguage={currentLanguage}\n                    currentCurrency={currentCurrency}\n                  />\n                </CardContent>\n              </Card>\n            ) : (\n              <Card \n                className=\"backdrop-blur-md bg-white/10 border-white/20 hover-elevate cursor-pointer\"\n                onClick={() => setShowBooking(true)}\n                data-testid=\"card-booking-preview\"\n              >\n                <CardContent className=\"p-8 text-center\">\n                  <Calendar className=\"w-12 h-12 text-white mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold text-white mb-2\">Quick Booking</h3>\n                  <p className=\"text-white/80 mb-4\">Click to start your desert adventure</p>\n                  <Button variant=\"outline\" className=\"border-white text-white hover:bg-white hover:text-black\">\n                    Start Booking\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":8262},"client/src/components/LanguageSelector.tsx":{"content":"import { useState } from \"react\";\nimport { ChevronDown, Globe } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface LanguageSelectorProps {\n  currentLanguage: string;\n  onLanguageChange: (language: string) => void;\n}\n\nconst languages = [\n  { code: \"en\", name: \"English\", flag: \"🇺🇸\" },\n  { code: \"fr\", name: \"Français\", flag: \"🇫🇷\" },\n  { code: \"de\", name: \"Deutsch\", flag: \"🇩🇪\" },\n  { code: \"ar\", name: \"العربية\", flag: \"🇹🇳\" },\n];\n\nexport default function LanguageSelector({ currentLanguage, onLanguageChange }: LanguageSelectorProps) {\n  const currentLang = languages.find(lang => lang.code === currentLanguage) || languages[0];\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"sm\" className=\"text-muted-foreground\" data-testid=\"button-language-selector\">\n          <Globe className=\"w-4 h-4 mr-1\" />\n          <span className=\"hidden sm:inline\">{currentLang.name}</span>\n          <span className=\"sm:hidden\">{currentLang.flag}</span>\n          <ChevronDown className=\"w-3 h-3 ml-1\" />\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-40\">\n        {languages.map((language) => (\n          <DropdownMenuItem\n            key={language.code}\n            onClick={() => {\n              onLanguageChange(language.code);\n              console.log(`Language changed to ${language.name}`);\n            }}\n            className={`flex items-center space-x-2 ${\n              currentLanguage === language.code ? \"bg-accent\" : \"\"\n            }`}\n            data-testid={`option-language-${language.code}`}\n          >\n            <span>{language.flag}</span>\n            <span>{language.name}</span>\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}","size_bytes":1986},"client/src/components/ThemeToggle.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default function ThemeToggle() {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n  useEffect(() => {\n    const stored = localStorage.getItem(\"theme\") as \"light\" | \"dark\" | null;\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    const initialTheme = stored || (prefersDark ? \"dark\" : \"light\");\n    setTheme(initialTheme);\n    \n    if (initialTheme === \"dark\") {\n      document.documentElement.classList.add(\"dark\");\n    }\n  }, []);\n\n  const toggleTheme = () => {\n    const newTheme = theme === \"light\" ? \"dark\" : \"light\";\n    setTheme(newTheme);\n    localStorage.setItem(\"theme\", newTheme);\n    \n    if (newTheme === \"dark\") {\n      document.documentElement.classList.add(\"dark\");\n    } else {\n      document.documentElement.classList.remove(\"dark\");\n    }\n    \n    console.log(`Theme changed to ${newTheme}`);\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"icon\"\n      onClick={toggleTheme}\n      className=\"text-muted-foreground hover:text-foreground\"\n      data-testid=\"button-theme-toggle\"\n    >\n      {theme === \"light\" ? (\n        <Moon className=\"w-4 h-4\" />\n      ) : (\n        <Sun className=\"w-4 h-4\" />\n      )}\n    </Button>\n  );\n}","size_bytes":1357},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/AdminActivities.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Plus, \n  Edit, \n  Trash2, \n  Eye, \n  EyeOff,\n  Search,\n  Filter\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface Activity {\n  id: string;\n  title: { en: string; fr: string; de: string; ar: string };\n  description: { en: string; fr: string; de: string; ar: string };\n  category: string;\n  duration: string;\n  groupSize: string;\n  capacity: number;\n  prices: { TND: number; USD: number; EUR: number };\n  imageUrl?: string;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport default function AdminActivities() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n\n  // API helper with auth - using httpOnly cookies\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\", // Include httpOnly cookies\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    // Handle 401 by redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  // Fetch activities\n  const { data: activities = [], isLoading } = useQuery({\n    queryKey: [\"/api/admin/activities\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/activities\");\n      if (!response.ok) throw new Error(\"Failed to fetch activities\");\n      return await response.json() as Activity[];\n    },\n  });\n\n  // Toggle activity status mutation\n  const toggleStatusMutation = useMutation({\n    mutationFn: async ({ id, isActive }: { id: string; isActive: boolean }) => {\n      const response = await authenticatedApiRequest(\"PUT\", `/api/admin/activities/${id}`, {\n        isActive: !isActive\n      });\n      if (!response.ok) throw new Error(\"Failed to update activity status\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/activities\"] });\n      toast({\n        title: \"Activity Updated\",\n        description: \"Activity status has been updated successfully\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update activity status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete activity mutation\n  const deleteActivityMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await authenticatedApiRequest(\"DELETE\", `/api/admin/activities/${id}`);\n      if (!response.ok) throw new Error(\"Failed to delete activity\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/activities\"] });\n      toast({\n        title: \"Activity Deleted\",\n        description: \"Activity has been deleted successfully\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete activity\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleToggleStatus = (activity: Activity) => {\n    toggleStatusMutation.mutate({ id: activity.id, isActive: activity.isActive });\n  };\n\n  const handleDeleteActivity = (activity: Activity) => {\n    if (confirm(`Are you sure you want to delete \"${activity.title.en}\"? This action cannot be undone.`)) {\n      deleteActivityMutation.mutate(activity.id);\n    }\n  };\n\n  // Filter activities\n  const filteredActivities = activities.filter(activity => {\n    const matchesSearch = \n      activity.title.en.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      activity.title.fr.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      activity.category.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesCategory = categoryFilter === \"all\" || activity.category === categoryFilter;\n    \n    return matchesSearch && matchesCategory;\n  });\n\n  const categories = Array.from(new Set(activities.map(a => a.category)));\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => setLocation(\"/admin/dashboard\")}\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n            <h1 className=\"text-xl font-semibold\">Activity Management</h1>\n          </div>\n          <Button \n            onClick={() => setLocation(\"/admin/activities/new\")}\n            data-testid=\"button-add-activity\"\n          >\n            <Plus className=\"h-4 w-4 mr-2\" />\n            Add Activity\n          </Button>\n        </div>\n      </header>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Filters */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Search activities...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                    data-testid=\"input-search\"\n                  />\n                </div>\n              </div>\n              <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"select-category\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"Filter by category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Categories</SelectItem>\n                  {categories.map(category => (\n                    <SelectItem key={category} value={category}>\n                      {category.charAt(0).toUpperCase() + category.slice(1)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Activities Grid */}\n        {isLoading ? (\n          <div className=\"text-center py-8\">Loading activities...</div>\n        ) : filteredActivities.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <p className=\"text-muted-foreground\">\n                {searchTerm || categoryFilter !== \"all\" \n                  ? \"No activities match your search criteria\"\n                  : \"No activities found. Create your first activity!\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {filteredActivities.map((activity) => (\n              <Card key={activity.id} className=\"hover-elevate\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <CardTitle className=\"text-lg line-clamp-2\">\n                        {activity.title.en}\n                      </CardTitle>\n                      <CardDescription>\n                        {activity.category.charAt(0).toUpperCase() + activity.category.slice(1)} • {activity.duration}\n                      </CardDescription>\n                    </div>\n                    <Badge \n                      variant={activity.isActive ? \"default\" : \"secondary\"}\n                      className=\"ml-2\"\n                    >\n                      {activity.isActive ? \"Active\" : \"Inactive\"}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-4\">\n                  <div className=\"text-sm space-y-1\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Capacity:</span>\n                      <span className=\"font-medium\">{activity.capacity} people</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Group Size:</span>\n                      <span className=\"font-medium\">{activity.groupSize}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Price (TND):</span>\n                      <span className=\"font-medium\">{activity.prices.TND} TND</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-between items-center pt-2 border-t\">\n                    <div className=\"flex space-x-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => setLocation(`/admin/activities/${activity.id}/edit`)}\n                        data-testid={`button-edit-${activity.id}`}\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleToggleStatus(activity)}\n                        data-testid={`button-toggle-${activity.id}`}\n                      >\n                        {activity.isActive ? (\n                          <EyeOff className=\"h-4 w-4\" />\n                        ) : (\n                          <Eye className=\"h-4 w-4\" />\n                        )}\n                      </Button>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleDeleteActivity(activity)}\n                        className=\"text-destructive hover:text-destructive\"\n                        data-testid={`button-delete-${activity.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      Created {new Date(activity.createdAt).toLocaleDateString()}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":11812},"client/src/pages/AdminBookings.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Search, \n  Filter,\n  CalendarDays,\n  Users,\n  Mail,\n  Phone,\n  MessageSquare,\n  CheckCircle,\n  XCircle,\n  Clock\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface BookingWithActivity {\n  id: string;\n  customerName: string;\n  customerEmail: string;\n  customerPhone?: string;\n  bookingDate: string;\n  groupSize: number;\n  totalPrice: string;\n  depositAmount: string;\n  currency: string;\n  status: string;\n  paymentStatus: string;\n  paymentMethod?: string;\n  specialRequests?: string;\n  language: string;\n  createdAt: string;\n  updatedAt: string;\n  activity: {\n    id: string;\n    title: { en: string; fr: string; de: string; ar: string };\n    category: string;\n    duration: string;\n  };\n}\n\nexport default function AdminBookings() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [paymentFilter, setPaymentFilter] = useState(\"all\");\n\n  // API helper with auth - using httpOnly cookies\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\", // Include httpOnly cookies\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    // Handle 401 by redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  // Fetch bookings\n  const { data: bookings = [], isLoading } = useQuery({\n    queryKey: [\"/api/admin/bookings\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/bookings\");\n      if (!response.ok) throw new Error(\"Failed to fetch bookings\");\n      return await response.json() as BookingWithActivity[];\n    },\n  });\n\n  // Update booking status mutation\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await authenticatedApiRequest(\"PUT\", `/api/admin/bookings/${id}/status`, {\n        status\n      });\n      if (!response.ok) throw new Error(\"Failed to update booking status\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/bookings\"] });\n      toast({\n        title: \"Booking Updated\",\n        description: \"Booking status has been updated successfully\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update booking status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleStatusUpdate = (booking: BookingWithActivity, newStatus: string) => {\n    if (confirm(`Are you sure you want to ${newStatus} this booking for ${booking.customerName}?`)) {\n      updateStatusMutation.mutate({ id: booking.id, status: newStatus });\n    }\n  };\n\n  // Filter bookings\n  const filteredBookings = bookings.filter(booking => {\n    const matchesSearch = \n      booking.customerName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      booking.customerEmail.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      booking.activity.title.en.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === \"all\" || booking.status === statusFilter;\n    const matchesPayment = paymentFilter === \"all\" || booking.paymentStatus === paymentFilter;\n    \n    return matchesSearch && matchesStatus && matchesPayment;\n  });\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"confirmed\": return \"default\";\n      case \"pending\": return \"secondary\";\n      case \"cancelled\": return \"destructive\";\n      case \"completed\": return \"outline\";\n      default: return \"secondary\";\n    }\n  };\n\n  const getPaymentColor = (paymentStatus: string) => {\n    switch (paymentStatus) {\n      case \"fully_paid\": return \"default\";\n      case \"deposit_paid\": return \"secondary\";\n      case \"unpaid\": return \"destructive\";\n      case \"refunded\": return \"outline\";\n      default: return \"secondary\";\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => setLocation(\"/admin/dashboard\")}\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n            <h1 className=\"text-xl font-semibold\">Booking Management</h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Filters */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col lg:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Search by customer name, email, or activity...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                    data-testid=\"input-search\"\n                  />\n                </div>\n              </div>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-status\">\n                  <Filter className=\"h-4 w-4 mr-2\" />\n                  <SelectValue placeholder=\"Filter by status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Statuses</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"confirmed\">Confirmed</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                  <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                </SelectContent>\n              </Select>\n              <Select value={paymentFilter} onValueChange={setPaymentFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-payment\">\n                  <SelectValue placeholder=\"Filter by payment\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Payments</SelectItem>\n                  <SelectItem value=\"unpaid\">Unpaid</SelectItem>\n                  <SelectItem value=\"deposit_paid\">Deposit Paid</SelectItem>\n                  <SelectItem value=\"fully_paid\">Fully Paid</SelectItem>\n                  <SelectItem value=\"refunded\">Refunded</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Bookings List */}\n        {isLoading ? (\n          <div className=\"text-center py-8\">Loading bookings...</div>\n        ) : filteredBookings.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <p className=\"text-muted-foreground\">\n                {searchTerm || statusFilter !== \"all\" || paymentFilter !== \"all\"\n                  ? \"No bookings match your search criteria\"\n                  : \"No bookings found\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-4\">\n            {filteredBookings.map((booking) => (\n              <Card key={booking.id} className=\"hover-elevate\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"space-y-1\">\n                      <CardTitle className=\"text-lg flex items-center space-x-2\">\n                        <span>{booking.customerName}</span>\n                        <Badge \n                          variant={getStatusColor(booking.status)}\n                          className=\"text-xs\"\n                        >\n                          {booking.status}\n                        </Badge>\n                        <Badge \n                          variant={getPaymentColor(booking.paymentStatus)}\n                          className=\"text-xs\"\n                        >\n                          {booking.paymentStatus.replace('_', ' ')}\n                        </Badge>\n                      </CardTitle>\n                      <CardDescription className=\"flex items-center space-x-4\">\n                        <span className=\"flex items-center space-x-1\">\n                          <Mail className=\"h-4 w-4\" />\n                          <span>{booking.customerEmail}</span>\n                        </span>\n                        {booking.customerPhone && (\n                          <span className=\"flex items-center space-x-1\">\n                            <Phone className=\"h-4 w-4\" />\n                            <span>{booking.customerPhone}</span>\n                          </span>\n                        )}\n                      </CardDescription>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-semibold text-lg\">\n                        {booking.totalPrice} {booking.currency}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        Deposit: {booking.depositAmount} {booking.currency}\n                      </div>\n                    </div>\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-4\">\n                  <div className=\"grid md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-medium\">Activity Details</h4>\n                      <div className=\"text-sm space-y-1\">\n                        <div className=\"flex items-center space-x-2\">\n                          <span className=\"font-medium\">{booking.activity.title.en}</span>\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            {booking.activity.category}\n                          </Badge>\n                        </div>\n                        <div className=\"flex items-center space-x-1 text-muted-foreground\">\n                          <CalendarDays className=\"h-4 w-4\" />\n                          <span>{new Date(booking.bookingDate).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center space-x-1 text-muted-foreground\">\n                          <Users className=\"h-4 w-4\" />\n                          <span>{booking.groupSize} people</span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-medium\">Booking Info</h4>\n                      <div className=\"text-sm space-y-1\">\n                        <div>\n                          <span className=\"text-muted-foreground\">Language:</span> {booking.language.toUpperCase()}\n                        </div>\n                        <div>\n                          <span className=\"text-muted-foreground\">Booked:</span> {new Date(booking.createdAt).toLocaleDateString()}\n                        </div>\n                        {booking.paymentMethod && (\n                          <div>\n                            <span className=\"text-muted-foreground\">Payment:</span> {booking.paymentMethod}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {booking.specialRequests && (\n                    <div className=\"space-y-2\">\n                      <h4 className=\"font-medium flex items-center space-x-1\">\n                        <MessageSquare className=\"h-4 w-4\" />\n                        <span>Special Requests</span>\n                      </h4>\n                      <p className=\"text-sm text-muted-foreground bg-muted p-3 rounded\">\n                        {booking.specialRequests}\n                      </p>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex justify-between items-center pt-4 border-t\">\n                    <div className=\"flex space-x-2\">\n                      {booking.status === \"pending\" && (\n                        <>\n                          <Button\n                            variant=\"default\"\n                            size=\"sm\"\n                            onClick={() => handleStatusUpdate(booking, \"confirmed\")}\n                            data-testid={`button-confirm-${booking.id}`}\n                          >\n                            <CheckCircle className=\"h-4 w-4 mr-1\" />\n                            Confirm\n                          </Button>\n                          <Button\n                            variant=\"destructive\"\n                            size=\"sm\"\n                            onClick={() => handleStatusUpdate(booking, \"cancelled\")}\n                            data-testid={`button-cancel-${booking.id}`}\n                          >\n                            <XCircle className=\"h-4 w-4 mr-1\" />\n                            Cancel\n                          </Button>\n                        </>\n                      )}\n                      {booking.status === \"confirmed\" && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleStatusUpdate(booking, \"completed\")}\n                          data-testid={`button-complete-${booking.id}`}\n                        >\n                          <CheckCircle className=\"h-4 w-4 mr-1\" />\n                          Mark Complete\n                        </Button>\n                      )}\n                    </div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      ID: {booking.id.slice(0, 8)}...\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":15417},"client/src/pages/AdminDashboard.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { \n  BarChart3, \n  CalendarDays, \n  Users, \n  TrendingUp, \n  Activity, \n  BookOpen, \n  LogOut,\n  Settings\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\n// Admin user type\ninterface AdminUser {\n  id: string;\n  username: string;\n  email: string;\n  role: string;\n  createdAt: string;\n  lastLogin: string | null;\n}\n\n// Booking type with activity\ninterface BookingWithActivity {\n  id: string;\n  customerName: string;\n  customerEmail: string;\n  bookingDate: string;\n  groupSize: number;\n  totalPrice: string;\n  depositAmount: string;\n  currency: string;\n  status: string;\n  paymentStatus: string;\n  language: string;\n  createdAt: string;\n  activity: {\n    id: string;\n    title: { en: string; fr: string; de: string; ar: string };\n    category: string;\n  };\n}\n\n// Activity type\ninterface Activity {\n  id: string;\n  title: { en: string; fr: string; de: string; ar: string };\n  category: string;\n  duration: string;\n  capacity: number;\n  prices: { TND: number; USD: number; EUR: number };\n  isActive: boolean;\n  createdAt: string;\n}\n\nexport default function AdminDashboard() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [adminUser, setAdminUser] = useState<AdminUser | null>(null);\n\n  // Check if user info is available (authentication handled by API 401 responses)\n  useEffect(() => {\n    const user = localStorage.getItem(\"admin_user\");\n    \n    if (user) {\n      try {\n        setAdminUser(JSON.parse(user));\n      } catch (error) {\n        console.error(\"Error parsing admin user:\", error);\n        localStorage.removeItem(\"admin_user\");\n        setLocation(\"/admin/login\");\n      }\n    }\n    // Note: If no user info, we'll rely on 401 handling in API calls to redirect to login\n  }, [setLocation]);\n\n  // API helper with auth - using httpOnly cookies\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\", // Include httpOnly cookies\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    // Handle 401 by redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  // Fetch activities\n  const { data: activities = [], isLoading: activitiesLoading } = useQuery({\n    queryKey: [\"/api/admin/activities\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/activities\");\n      if (!response.ok) throw new Error(\"Failed to fetch activities\");\n      return await response.json() as Activity[];\n    },\n  });\n\n  // Fetch bookings\n  const { data: bookings = [], isLoading: bookingsLoading } = useQuery({\n    queryKey: [\"/api/admin/bookings\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/bookings\");\n      if (!response.ok) throw new Error(\"Failed to fetch bookings\");\n      return await response.json() as BookingWithActivity[];\n    },\n  });\n\n  const handleLogout = async () => {\n    try {\n      // Call server logout to clear httpOnly cookie\n      await fetch(\"/api/admin/logout\", {\n        method: \"POST\",\n        credentials: \"include\", // Include cookies\n      });\n      \n      // Clear any local storage\n      localStorage.removeItem(\"admin_user\");\n      \n      toast({\n        title: \"Logged Out\", \n        description: \"You have been successfully logged out\",\n      });\n      \n      setLocation(\"/admin/login\");\n    } catch (error) {\n      // Even if server call fails, clear local state\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n    }\n  };\n\n  // Calculate dashboard stats\n  const totalActivities = activities.length;\n  const activeActivities = activities.filter(a => a.isActive).length;\n  const totalBookings = bookings.length;\n  const pendingBookings = bookings.filter(b => b.status === \"pending\").length;\n  const confirmedBookings = bookings.filter(b => b.status === \"confirmed\").length;\n  const totalRevenue = bookings\n    .filter(b => b.paymentStatus === \"deposit_paid\" || b.paymentStatus === \"fully_paid\")\n    .reduce((sum, b) => sum + parseFloat(b.totalPrice), 0);\n\n  // Recent bookings (last 5)\n  const recentBookings = bookings\n    .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\n    .slice(0, 5);\n\n  if (!adminUser) {\n    return <div className=\"min-h-screen flex items-center justify-center\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <h1 className=\"text-xl font-semibold\">Sghayra Tours Admin</h1>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"text-sm\">\n              <span className=\"text-muted-foreground\">Welcome back,</span>\n              <span className=\"ml-1 font-medium\">{adminUser.username}</span>\n              <Badge variant=\"secondary\" className=\"ml-2 text-xs\">\n                {adminUser.role}\n              </Badge>\n            </div>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={handleLogout}\n              data-testid=\"button-logout\"\n            >\n              <LogOut className=\"h-4 w-4 mr-2\" />\n              Logout\n            </Button>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Dashboard Stats */}\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Activities</CardTitle>\n              <Activity className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"stat-total-activities\">\n                {totalActivities}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {activeActivities} active\n              </p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Bookings</CardTitle>\n              <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid=\"stat-total-bookings\">\n                {totalBookings}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                {confirmedBookings} confirmed\n              </p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Pending Bookings</CardTitle>\n              <CalendarDays className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-orange-600\" data-testid=\"stat-pending-bookings\">\n                {pendingBookings}\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                Require attention\n              </p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <CardTitle className=\"text-sm font-medium\">Total Revenue</CardTitle>\n              <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-green-600\" data-testid=\"stat-total-revenue\">\n                {totalRevenue.toFixed(2)} TND\n              </div>\n              <p className=\"text-xs text-muted-foreground\">\n                From paid bookings\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Navigation Cards */}\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          <Card className=\"hover-elevate cursor-pointer\" onClick={() => setLocation(\"/admin/activities\")}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Activity className=\"h-5 w-5\" />\n                <span>Manage Activities</span>\n              </CardTitle>\n              <CardDescription>\n                Create, edit, and manage tourism activities and tours\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-sm text-muted-foreground\">\n                {activitiesLoading ? \"Loading...\" : `${totalActivities} activities`}\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"hover-elevate cursor-pointer\" onClick={() => setLocation(\"/admin/bookings\")} data-testid=\"card-bookings\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <BookOpen className=\"h-5 w-5\" />\n                <span>Manage Bookings</span>\n              </CardTitle>\n              <CardDescription>\n                View and manage customer bookings and reservations\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-sm text-muted-foreground\">\n                {bookingsLoading ? \"Loading...\" : `${totalBookings} bookings`}\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"hover-elevate cursor-pointer\" onClick={() => setLocation(\"/admin/settings\")} data-testid=\"card-settings\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Settings className=\"h-5 w-5\" />\n                <span>Site Settings</span>\n              </CardTitle>\n              <CardDescription>\n                Manage company information, contact details, and social media\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-sm text-muted-foreground\">\n                Configure website content and branding\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"hover-elevate cursor-pointer\" onClick={() => setLocation(\"/admin/translations\")} data-testid=\"card-translations\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <BarChart3 className=\"h-5 w-5\" />\n                <span>Translation Editor</span>\n              </CardTitle>\n              <CardDescription>\n                Manage multilingual content for activities and tours\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-sm text-muted-foreground\">\n                Edit content in 4 languages (EN/FR/DE/AR)\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"hover-elevate cursor-pointer\" onClick={() => setLocation(\"/admin/gallery\")}>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Users className=\"h-5 w-5\" />\n                <span>Gallery Management</span>\n              </CardTitle>\n              <CardDescription>\n                Upload and manage photos and videos for the website\n              </CardDescription>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-sm text-muted-foreground\">\n                Organize media content with object storage\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Recent Bookings */}\n        <Card>\n          <CardHeader>\n            <CardTitle>Recent Bookings</CardTitle>\n            <CardDescription>\n              Latest customer reservations requiring attention\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {bookingsLoading ? (\n              <div className=\"text-center py-4\">Loading bookings...</div>\n            ) : recentBookings.length === 0 ? (\n              <div className=\"text-center py-4 text-muted-foreground\">\n                No bookings yet\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {recentBookings.map((booking) => (\n                  <div \n                    key={booking.id} \n                    className=\"flex items-center justify-between p-3 border rounded-lg hover-elevate\"\n                  >\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium\">{booking.customerName}</div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        {booking.activity.title.en} • {booking.groupSize} people\n                      </div>\n                      <div className=\"text-xs text-muted-foreground\">\n                        {new Date(booking.bookingDate).toLocaleDateString()}\n                      </div>\n                    </div>\n                    <div className=\"text-right space-y-1\">\n                      <div className=\"font-medium\">\n                        {booking.totalPrice} {booking.currency}\n                      </div>\n                      <Badge \n                        variant={\n                          booking.status === \"confirmed\" ? \"default\" :\n                          booking.status === \"pending\" ? \"secondary\" : \"destructive\"\n                        }\n                        className=\"text-xs\"\n                      >\n                        {booking.status}\n                      </Badge>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":14850},"client/src/pages/AdminLogin.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Loader2, Shield } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\nexport default function AdminLogin() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const [isLoading, setIsLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\",\n  });\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.username || !formData.password) {\n      toast({\n        title: \"Validation Error\",\n        description: \"Please fill in all fields\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const response = await apiRequest(\"POST\", \"/api/admin/login\", formData);\n      \n      if (response.ok) {\n        const result = await response.json();\n        \n        // Only store user info in localStorage (token is httpOnly cookie)\n        localStorage.setItem(\"admin_user\", JSON.stringify(result.admin));\n        \n        toast({\n          title: \"Login Successful\",\n          description: `Welcome back, ${result.admin.username}!`,\n        });\n        \n        // Redirect to admin dashboard\n        setLocation(\"/admin/dashboard\");\n      } else {\n        const error = await response.json();\n        toast({\n          title: \"Login Failed\",\n          description: error.details || \"Invalid credentials\",\n          variant: \"destructive\",\n        });\n      }\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      toast({\n        title: \"Login Error\",\n        description: \"An error occurred while trying to log in\",\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary/5 to-orange-100/30 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"p-3 bg-primary/10 rounded-full\">\n              <Shield className=\"h-8 w-8 text-primary\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl font-bold\">Admin Login</CardTitle>\n          <CardDescription>\n            Sign in to access the Sghayra Tours admin dashboard\n          </CardDescription>\n        </CardHeader>\n        \n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"username\">Username or Email</Label>\n              <Input\n                id=\"username\"\n                name=\"username\"\n                type=\"text\"\n                placeholder=\"Enter your username or email\"\n                value={formData.username}\n                onChange={handleInputChange}\n                disabled={isLoading}\n                data-testid=\"input-username\"\n                required\n              />\n            </div>\n            \n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={formData.password}\n                onChange={handleInputChange}\n                disabled={isLoading}\n                data-testid=\"input-password\"\n                required\n              />\n            </div>\n          </CardContent>\n          \n          <CardFooter>\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Signing in...\n                </>\n              ) : (\n                \"Sign In\"\n              )}\n            </Button>\n          </CardFooter>\n        </form>\n        \n        <div className=\"px-6 pb-6\">\n          <div className=\"text-sm text-muted-foreground text-center\">\n            <p className=\"mb-2\">Default credentials for testing:</p>\n            <p className=\"font-mono bg-muted p-2 rounded text-xs\">\n              Username: admin<br />\n              Password: admin123!\n            </p>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n}","size_bytes":4960},"client/src/pages/AdminTranslations.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Edit, \n  Save,\n  X,\n  Globe,\n  Search,\n  Languages\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface Activity {\n  id: string;\n  title: { en: string; fr: string; de: string; ar: string };\n  description: { en: string; fr: string; de: string; ar: string };\n  highlights: { en: string[]; fr: string[]; de: string[]; ar: string[] };\n  category: string;\n  duration: string;\n  isActive: boolean;\n}\n\nconst languages = [\n  { code: 'en', name: 'English', flag: '🇺🇸' },\n  { code: 'fr', name: 'Français', flag: '🇫🇷' },\n  { code: 'de', name: 'Deutsch', flag: '🇩🇪' },\n  { code: 'ar', name: 'العربية', flag: '🇹🇳' },\n];\n\nexport default function AdminTranslations() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [editingActivity, setEditingActivity] = useState<string | null>(null);\n  const [translations, setTranslations] = useState<any>({});\n\n  // API helper with auth - using httpOnly cookies\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\", // Include httpOnly cookies\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    // Handle 401 by redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  // Fetch activities\n  const { data: activities = [], isLoading } = useQuery({\n    queryKey: [\"/api/admin/activities\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/activities\");\n      if (!response.ok) throw new Error(\"Failed to fetch activities\");\n      const data = await response.json() as Activity[];\n      \n      // Initialize translations state\n      const initialTranslations: any = {};\n      data.forEach(activity => {\n        initialTranslations[activity.id] = {\n          title: { ...activity.title },\n          description: { ...activity.description },\n          highlights: { ...activity.highlights },\n        };\n      });\n      setTranslations(initialTranslations);\n      \n      return data;\n    },\n  });\n\n  // Update activity translations mutation\n  const updateTranslationsMutation = useMutation({\n    mutationFn: async ({ id, translations }: { id: string; translations: any }) => {\n      const response = await authenticatedApiRequest(\"PUT\", `/api/admin/activities/${id}`, translations);\n      if (!response.ok) throw new Error(\"Failed to update translations\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/activities\"] });\n      toast({\n        title: \"Translations Updated\",\n        description: \"Activity translations have been saved successfully\",\n      });\n      setEditingActivity(null);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update translations\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleStartEdit = (activityId: string) => {\n    setEditingActivity(activityId);\n  };\n\n  const handleCancelEdit = () => {\n    // Reset translations to original values\n    const originalTranslations: any = {};\n    activities.forEach(activity => {\n      originalTranslations[activity.id] = {\n        title: { ...activity.title },\n        description: { ...activity.description },\n        highlights: { ...activity.highlights },\n      };\n    });\n    setTranslations(originalTranslations);\n    setEditingActivity(null);\n  };\n\n  const handleSaveTranslations = (activityId: string) => {\n    const activityTranslations = translations[activityId];\n    if (activityTranslations) {\n      updateTranslationsMutation.mutate({\n        id: activityId,\n        translations: activityTranslations,\n      });\n    }\n  };\n\n  const updateTranslation = (activityId: string, field: string, language: string, value: string) => {\n    setTranslations((prev: any) => ({\n      ...prev,\n      [activityId]: {\n        ...prev[activityId],\n        [field]: {\n          ...prev[activityId][field],\n          [language]: value,\n        },\n      },\n    }));\n  };\n\n  const updateHighlight = (activityId: string, language: string, index: number, value: string) => {\n    setTranslations((prev: any) => {\n      const highlights = [...(prev[activityId]?.highlights[language] || [])];\n      highlights[index] = value;\n      return {\n        ...prev,\n        [activityId]: {\n          ...prev[activityId],\n          highlights: {\n            ...prev[activityId].highlights,\n            [language]: highlights,\n          },\n        },\n      };\n    });\n  };\n\n  const addHighlight = (activityId: string, language: string) => {\n    setTranslations((prev: any) => {\n      const highlights = [...(prev[activityId]?.highlights[language] || [])];\n      highlights.push(\"\");\n      return {\n        ...prev,\n        [activityId]: {\n          ...prev[activityId],\n          highlights: {\n            ...prev[activityId].highlights,\n            [language]: highlights,\n          },\n        },\n      };\n    });\n  };\n\n  const removeHighlight = (activityId: string, language: string, index: number) => {\n    setTranslations((prev: any) => {\n      const highlights = [...(prev[activityId]?.highlights[language] || [])];\n      highlights.splice(index, 1);\n      return {\n        ...prev,\n        [activityId]: {\n          ...prev[activityId],\n          highlights: {\n            ...prev[activityId].highlights,\n            [language]: highlights,\n          },\n        },\n      };\n    });\n  };\n\n  // Filter activities\n  const filteredActivities = activities.filter(activity =>\n    activity.title.en.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    activity.title.fr.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    activity.category.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => setLocation(\"/admin/dashboard\")}\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n            <h1 className=\"text-xl font-semibold flex items-center space-x-2\">\n              <Languages className=\"h-5 w-5\" />\n              <span>Translation Editor</span>\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Search */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search activities to translate...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Activities List */}\n        {isLoading ? (\n          <div className=\"text-center py-8\">Loading activities...</div>\n        ) : filteredActivities.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <p className=\"text-muted-foreground\">\n                {searchTerm ? \"No activities match your search\" : \"No activities found\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"space-y-6\">\n            {filteredActivities.map((activity) => (\n              <Card key={activity.id} className=\"hover-elevate\">\n                <CardHeader className=\"pb-3\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"space-y-1\">\n                      <CardTitle className=\"text-lg flex items-center space-x-2\">\n                        <Globe className=\"h-4 w-4\" />\n                        <span>{activity.title.en}</span>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {activity.category}\n                        </Badge>\n                      </CardTitle>\n                      <CardDescription>\n                        Manage translations for this activity across all languages\n                      </CardDescription>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      {editingActivity === activity.id ? (\n                        <>\n                          <Button\n                            variant=\"default\"\n                            size=\"sm\"\n                            onClick={() => handleSaveTranslations(activity.id)}\n                            disabled={updateTranslationsMutation.isPending}\n                            data-testid={`button-save-${activity.id}`}\n                          >\n                            <Save className=\"h-4 w-4 mr-1\" />\n                            Save\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={handleCancelEdit}\n                            data-testid={`button-cancel-${activity.id}`}\n                          >\n                            <X className=\"h-4 w-4 mr-1\" />\n                            Cancel\n                          </Button>\n                        </>\n                      ) : (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleStartEdit(activity.id)}\n                          data-testid={`button-edit-${activity.id}`}\n                        >\n                          <Edit className=\"h-4 w-4 mr-1\" />\n                          Edit Translations\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </CardHeader>\n                \n                <CardContent>\n                  {editingActivity === activity.id ? (\n                    <Tabs defaultValue=\"en\" className=\"w-full\">\n                      <TabsList className=\"grid w-full grid-cols-4\">\n                        {languages.map(lang => (\n                          <TabsTrigger key={lang.code} value={lang.code}>\n                            <span className=\"mr-2\">{lang.flag}</span>\n                            {lang.name}\n                          </TabsTrigger>\n                        ))}\n                      </TabsList>\n                      \n                      {languages.map(lang => (\n                        <TabsContent key={lang.code} value={lang.code} className=\"space-y-4 mt-4\">\n                          <div className=\"space-y-4\">\n                            {/* Title */}\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`title-${lang.code}`}>Title ({lang.name})</Label>\n                              <Input\n                                id={`title-${lang.code}`}\n                                value={translations[activity.id]?.title[lang.code] || ''}\n                                onChange={(e) => updateTranslation(activity.id, 'title', lang.code, e.target.value)}\n                                placeholder={`Enter title in ${lang.name}`}\n                              />\n                            </div>\n                            \n                            {/* Description */}\n                            <div className=\"space-y-2\">\n                              <Label htmlFor={`description-${lang.code}`}>Description ({lang.name})</Label>\n                              <Textarea\n                                id={`description-${lang.code}`}\n                                value={translations[activity.id]?.description[lang.code] || ''}\n                                onChange={(e) => updateTranslation(activity.id, 'description', lang.code, e.target.value)}\n                                placeholder={`Enter description in ${lang.name}`}\n                                rows={4}\n                              />\n                            </div>\n                            \n                            {/* Highlights */}\n                            <div className=\"space-y-2\">\n                              <Label>Highlights ({lang.name})</Label>\n                              <div className=\"space-y-2\">\n                                {(translations[activity.id]?.highlights[lang.code] || []).map((highlight: string, index: number) => (\n                                  <div key={index} className=\"flex items-center space-x-2\">\n                                    <Input\n                                      value={highlight}\n                                      onChange={(e) => updateHighlight(activity.id, lang.code, index, e.target.value)}\n                                      placeholder={`Highlight ${index + 1}`}\n                                    />\n                                    <Button\n                                      variant=\"outline\"\n                                      size=\"sm\"\n                                      onClick={() => removeHighlight(activity.id, lang.code, index)}\n                                    >\n                                      <X className=\"h-4 w-4\" />\n                                    </Button>\n                                  </div>\n                                ))}\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => addHighlight(activity.id, lang.code)}\n                                >\n                                  Add Highlight\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        </TabsContent>\n                      ))}\n                    </Tabs>\n                  ) : (\n                    <div className=\"grid md:grid-cols-2 gap-4\">\n                      {languages.map(lang => (\n                        <div key={lang.code} className=\"space-y-2\">\n                          <h4 className=\"font-medium flex items-center space-x-2\">\n                            <span>{lang.flag}</span>\n                            <span>{lang.name}</span>\n                          </h4>\n                          <div className=\"text-sm space-y-1\">\n                            <div><strong>Title:</strong> {activity.title[lang.code as keyof typeof activity.title]}</div>\n                            <div><strong>Description:</strong> {activity.description[lang.code as keyof typeof activity.description].substring(0, 100)}...</div>\n                            <div><strong>Highlights:</strong> {activity.highlights[lang.code as keyof typeof activity.highlights].length} items</div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":16507},"client/src/pages/Home.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Link } from \"wouter\";\nimport Hero from \"@/components/Hero\";\nimport ActivityCard from \"@/components/ActivityCard\";\nimport Gallery from \"@/components/Gallery\";\nimport { MapLocationDisplay } from \"@/components/MapLocationDisplay\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight, Star, Users, Award, MapPin } from \"lucide-react\";\nimport camelImage from \"@assets/generated_images/Camel_riding_tour_detail_e5164afc.png\";\nimport campImage from \"@assets/generated_images/Desert_camp_dining_experience_e983ce5b.png\";\nimport hennaImage from \"@assets/generated_images/Traditional_henna_art_activity_1883deb4.png\";\nimport heroImage from \"@assets/generated_images/Sahara_desert_hero_background_840d4412.png\";\nimport type { Activity } from \"@shared/schema\";\n\ninterface HomeProps {\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\n// Removed mock data - now using real API data exclusively\n\nconst mockGalleryItems = [\n  {\n    id: \"camel-trek\",\n    type: \"image\" as const,\n    src: camelImage,\n    thumbnail: camelImage,\n    title: \"Camel Trekking Adventure\",\n    description: \"Experience authentic camel riding through the Sahara dunes\"\n  },\n  {\n    id: \"desert-camp\",\n    type: \"image\" as const,\n    src: campImage,\n    thumbnail: campImage,\n    title: \"Desert Camp Experience\", \n    description: \"Traditional Berber camp with authentic dining and music\"\n  },\n  {\n    id: \"henna-art\",\n    type: \"image\" as const,\n    src: hennaImage,\n    thumbnail: hennaImage,\n    title: \"Traditional Henna Art\",\n    description: \"Beautiful henna artistry by local Berber artists\"\n  },\n  {\n    id: \"sahara-sunset\",\n    type: \"image\" as const,\n    src: heroImage,\n    thumbnail: heroImage,\n    title: \"Sahara Desert Sunset\", \n    description: \"Breathtaking sunset views over the golden dunes\"\n  }\n];\n\nexport default function Home({ currentLanguage, currentCurrency }: HomeProps) {\n  const currencySymbols = { TND: \"د.ت\", USD: \"$\", EUR: \"€\" };\n  const currencySymbol = currencySymbols[currentCurrency as keyof typeof currencySymbols];\n\n  // Fetch activities from API\n  const { data: activities, isLoading: activitiesLoading, error: activitiesError } = useQuery({\n    queryKey: ['/api/activities'],\n    select: (data: Activity[]) => {\n      // Transform database activities to frontend format\n      return data.map((activity, index) => {\n        // Map images to activities by category or use fallback\n        const imageMap: Record<string, string> = {\n          'adventure': camelImage,\n          'cultural': index === 1 ? campImage : hennaImage, // Distribute cultural images\n        };\n        \n        const image = imageMap[activity.category] || camelImage;\n        \n        return {\n          id: activity.id,\n          title: (activity.title as any)[currentLanguage] || (activity.title as any).en,\n          description: (activity.description as any)[currentLanguage] || (activity.description as any).en,\n          image: image, // Use mapped images for now until file storage is implemented\n          duration: activity.duration,\n          groupSize: activity.groupSize,\n          price: (activity.prices as any)[currentCurrency] || (activity.prices as any).USD,\n          rating: 4.8 + (Math.random() * 0.2), // Realistic ratings between 4.8-5.0\n          reviews: 89 + index * 25, // Consistent review counts\n          highlights: (activity.highlights as any)[currentLanguage] || (activity.highlights as any).en,\n          category: activity.category\n        };\n      });\n    }\n  });\n\n\n  const translations = {\n    en: {\n      featuredActivities: \"Featured Desert Adventures\",\n      featuredSubtitle: \"Discover our most popular authentic Sahara experiences\",\n      viewAllActivities: \"View All Activities\",\n      whyChooseUs: \"Why Choose Sghayra Tours?\",\n      whySubtitle: \"Authentic experiences with expert local guides\",\n      stats: {\n        experience: { value: \"15+\", label: \"Years Experience\" },\n        tours: { value: \"500+\", label: \"Tours Completed\" },\n        rating: { value: \"4.9\", label: \"Average Rating\" },\n        guides: { value: \"12\", label: \"Expert Guides\" }\n      },\n      features: [\n        {\n          icon: Star,\n          title: \"Authentic Experiences\",\n          description: \"Traditional Berber hospitality and genuine cultural immersion\"\n        },\n        {\n          icon: Users,\n          title: \"Expert Local Guides\",\n          description: \"Born and raised in the Sahara, our guides know every grain of sand\"\n        },\n        {\n          icon: Award,\n          title: \"Award Winning Service\",\n          description: \"Recognized for excellence in desert tourism and customer satisfaction\"\n        },\n        {\n          icon: MapPin,\n          title: \"Perfect Location\",\n          description: \"Based in Douz, the gateway to the Sahara Desert\"\n        }\n      ]\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Hero Section */}\n      <Hero currentLanguage={currentLanguage} currentCurrency={currentCurrency} />\n\n      {/* Featured Activities Section */}\n      <section className=\"py-16 bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl sm:text-4xl font-serif font-bold text-foreground mb-4\">\n              {t.featuredActivities}\n            </h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              {t.featuredSubtitle}\n            </p>\n          </div>\n\n          {/* Loading State */}\n          {activitiesLoading && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12\">\n              {[1, 2, 3].map((i) => (\n                <div key={i} className=\"animate-pulse\">\n                  <div className=\"bg-muted rounded-lg h-64 mb-4\"></div>\n                  <div className=\"h-4 bg-muted rounded mb-2\"></div>\n                  <div className=\"h-4 bg-muted rounded w-3/4\"></div>\n                </div>\n              ))}\n            </div>\n          )}\n          \n          {/* Error State */}\n          {activitiesError && (\n            <div className=\"text-center py-12\">\n              <p className=\"text-destructive mb-4\">\n                {currentLanguage === 'en' ? 'Failed to load activities' : \n                 currentLanguage === 'fr' ? 'Échec du chargement des activités' :\n                 currentLanguage === 'de' ? 'Aktivitäten konnten nicht geladen werden' :\n                 'فشل في تحميل الأنشطة'}\n              </p>\n              <Button onClick={() => window.location.reload()} data-testid=\"button-try-again\">\n                {currentLanguage === 'en' ? 'Try Again' : \n                 currentLanguage === 'fr' ? 'Réessayer' :\n                 currentLanguage === 'de' ? 'Erneut versuchen' :\n                 'حاول مرة أخرى'}\n              </Button>\n            </div>\n          )}\n          \n          {/* Activities Grid */}\n          {activities && activities.length > 0 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12\">\n              {activities.map((activity) => (\n                <ActivityCard\n                  key={activity.id}\n                  activity={activity}\n                  currency={currentCurrency}\n                  currencySymbol={currencySymbol}\n                  currentLanguage={currentLanguage}\n                />\n              ))}\n            </div>\n          )}\n          \n          {/* No Activities State */}\n          {activities && activities.length === 0 && !activitiesLoading && (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground\">\n                {currentLanguage === 'en' ? 'No activities available' : \n                 currentLanguage === 'fr' ? 'Aucune activité disponible' :\n                 currentLanguage === 'de' ? 'Keine Aktivitäten verfügbar' :\n                 'لا توجد أنشطة متاحة'}\n              </p>\n            </div>\n          )}\n\n          <div className=\"text-center\">\n            <Button asChild variant=\"outline\" size=\"lg\">\n              <Link href=\"/activities\" data-testid=\"button-view-all-activities\">\n                {t.viewAllActivities} <ArrowRight className=\"w-4 h-4 ml-2\" />\n              </Link>\n            </Button>\n          </div>\n        </div>\n      </section>\n\n      {/* Why Choose Us Section */}\n      <section className=\"py-16 bg-card\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl sm:text-4xl font-serif font-bold text-foreground mb-4\">\n              {t.whyChooseUs}\n            </h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              {t.whySubtitle}\n            </p>\n          </div>\n\n          {/* Stats */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-8 mb-16\">\n            {Object.entries(t.stats).map(([key, stat]) => (\n              <div key={key} className=\"text-center\">\n                <div className=\"text-3xl sm:text-4xl font-bold text-primary mb-2\">\n                  {stat.value}\n                </div>\n                <div className=\"text-muted-foreground font-medium\">{stat.label}</div>\n              </div>\n            ))}\n          </div>\n\n          {/* Features */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {t.features.map((feature, index) => (\n              <div key={index} className=\"text-center space-y-4\">\n                <div className=\"mx-auto w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center\">\n                  <feature.icon className=\"w-8 h-8 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold text-foreground\">{feature.title}</h3>\n                <p className=\"text-muted-foreground\">{feature.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      {/* Gallery Section */}\n      <Gallery items={mockGalleryItems} currentLanguage={currentLanguage} />\n\n      {/* Location Section */}\n      <section className=\"py-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl sm:text-4xl font-serif font-bold text-foreground mb-4\">\n              {currentLanguage === 'en' ? 'Find Us' : \n               currentLanguage === 'fr' ? 'Nous Trouver' :\n               currentLanguage === 'de' ? 'Finden Sie Uns' :\n               'موقعنا'}\n            </h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              {currentLanguage === 'en' ? 'Visit us at our location in the heart of the Sahara Desert gateway' : \n               currentLanguage === 'fr' ? 'Visitez-nous à notre emplacement au cœur de la porte d\\'entrée du désert du Sahara' :\n               currentLanguage === 'de' ? 'Besuchen Sie uns an unserem Standort im Herzen des Sahara-Wüsten-Tors' :\n               'زورونا في موقعنا في قلب بوابة الصحراء الكبرى'}\n            </p>\n          </div>\n          \n          <div className=\"max-w-4xl mx-auto\">\n            <MapLocationDisplay\n              language={currentLanguage as 'en' | 'fr' | 'de' | 'ar'}\n              height=\"500px\"\n              className=\"shadow-lg\"\n            />\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":11648},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/examples/ActivityCard.tsx":{"content":"import ActivityCard from '../ActivityCard';\nimport camelImage from \"@assets/generated_images/Camel_riding_tour_detail_e5164afc.png\";\n\nconst mockActivity = {\n  id: \"camel-2day\",\n  title: \"2-Day Camel Trek Adventure\", \n  description: \"Experience the magic of the Sahara with our authentic camel trekking adventure through golden dunes.\",\n  image: camelImage,\n  duration: \"2 days, 1 night\",\n  groupSize: \"2-8 people\",\n  price: 150,\n  rating: 4.9,\n  reviews: 127,\n  highlights: [\"Camel Riding\", \"Desert Camp\", \"Traditional Dinner\", \"Stargazing\"],\n  category: \"Adventure\"\n};\n\nexport default function ActivityCardExample() {\n  const handleBookNow = (activityId: string) => {\n    console.log(`Booking activity: ${activityId}`);\n  };\n\n  return (\n    <div className=\"p-8 bg-background\">\n      <div className=\"max-w-sm\">\n        <ActivityCard \n          activity={mockActivity}\n          currency=\"USD\"\n          currencySymbol=\"$\"\n          onBookNow={handleBookNow}\n          currentLanguage=\"en\"\n        />\n      </div>\n    </div>\n  );\n}","size_bytes":1030},"client/src/components/examples/BookingWidget.tsx":{"content":"import BookingWidget from '../BookingWidget';\n\nexport default function BookingWidgetExample() {\n  return (\n    <div className=\"p-8 bg-background flex justify-center\">\n      <BookingWidget \n        currentLanguage=\"en\"\n        currentCurrency=\"USD\"\n      />\n      <div className=\"ml-8 p-4 bg-card rounded-lg max-w-xs\">\n        <h3 className=\"font-semibold mb-2\">Features Added:</h3>\n        <ul className=\"text-sm text-muted-foreground space-y-1\">\n          <li>✓ WhatsApp contact button</li>\n          <li>✓ Multilingual support</li>\n          <li>✓ Opens WhatsApp link</li>\n          <li>✓ Outline button styling</li>\n        </ul>\n      </div>\n    </div>\n  );\n}","size_bytes":671},"client/src/components/examples/CurrencySelector.tsx":{"content":"import { useState } from \"react\";\nimport CurrencySelector from '../CurrencySelector';\n\nexport default function CurrencySelectorExample() {\n  const [currentCurrency, setCurrentCurrency] = useState(\"USD\");\n\n  return (\n    <div className=\"p-8 bg-background\">\n      <CurrencySelector \n        currentCurrency={currentCurrency}\n        onCurrencyChange={setCurrentCurrency}\n      />\n      <p className=\"mt-4 text-muted-foreground\">Current currency: {currentCurrency}</p>\n    </div>\n  );\n}","size_bytes":483},"client/src/components/examples/Footer.tsx":{"content":"import Footer from '../Footer';\n\nexport default function FooterExample() {\n  return (\n    <Footer currentLanguage=\"en\" />\n  );\n}","size_bytes":128},"client/src/components/examples/Gallery.tsx":{"content":"import Gallery from '../Gallery';\nimport camelImage from \"@assets/generated_images/Camel_riding_tour_detail_e5164afc.png\";\nimport campImage from \"@assets/generated_images/Desert_camp_dining_experience_e983ce5b.png\";\nimport hennaImage from \"@assets/generated_images/Traditional_henna_art_activity_1883deb4.png\";\nimport heroImage from \"@assets/generated_images/Sahara_desert_hero_background_840d4412.png\";\n\nconst mockGalleryItems = [\n  {\n    id: \"camel-trek\",\n    type: \"image\" as const,\n    src: camelImage,\n    thumbnail: camelImage,\n    title: \"Camel Trekking Adventure\",\n    description: \"Experience authentic camel riding through the Sahara dunes\"\n  },\n  {\n    id: \"desert-camp\", \n    type: \"image\" as const,\n    src: campImage,\n    thumbnail: campImage,\n    title: \"Desert Camp Experience\",\n    description: \"Traditional Berber camp with authentic dining and music\"\n  },\n  {\n    id: \"henna-art\",\n    type: \"image\" as const, \n    src: hennaImage,\n    thumbnail: hennaImage,\n    title: \"Traditional Henna Art\",\n    description: \"Beautiful henna artistry by local Berber artists\"\n  },\n  {\n    id: \"sahara-sunset\",\n    type: \"image\" as const,\n    src: heroImage,\n    thumbnail: heroImage, \n    title: \"Sahara Desert Sunset\",\n    description: \"Breathtaking sunset views over the golden dunes\"\n  },\n  {\n    id: \"desert-video\",\n    type: \"video\" as const,\n    src: heroImage, // Would be video URL in real app\n    thumbnail: heroImage,\n    title: \"Desert Adventure Video\", \n    description: \"Watch highlights from our desert adventures\"\n  }\n];\n\nexport default function GalleryExample() {\n  return (\n    <Gallery \n      items={mockGalleryItems}\n      currentLanguage=\"en\"\n    />\n  );\n}","size_bytes":1681},"client/src/components/examples/Header.tsx":{"content":"import { useState } from \"react\";\nimport Header from '../Header';\n\nexport default function HeaderExample() {\n  const [language, setLanguage] = useState(\"en\");\n  const [currency, setCurrency] = useState(\"USD\");\n\n  return (\n    <Header \n      currentLanguage={language}\n      currentCurrency={currency}\n      onLanguageChange={setLanguage}\n      onCurrencyChange={setCurrency}\n    />\n  );\n}","size_bytes":388},"client/src/components/examples/Hero.tsx":{"content":"import Hero from '../Hero';\n\nexport default function HeroExample() {\n  return (\n    <Hero \n      currentLanguage=\"en\"\n      currentCurrency=\"USD\"\n    />\n  );\n}","size_bytes":159},"client/src/components/examples/LanguageSelector.tsx":{"content":"import { useState } from \"react\";\nimport LanguageSelector from '../LanguageSelector';\n\nexport default function LanguageSelectorExample() {\n  const [currentLanguage, setCurrentLanguage] = useState(\"en\");\n\n  return (\n    <div className=\"p-8 bg-background\">\n      <LanguageSelector \n        currentLanguage={currentLanguage}\n        onLanguageChange={setCurrentLanguage}\n      />\n      <p className=\"mt-4 text-muted-foreground\">Current language: {currentLanguage}</p>\n    </div>\n  );\n}","size_bytes":482},"client/src/components/examples/ThemeToggle.tsx":{"content":"import ThemeToggle from '../ThemeToggle';\n\nexport default function ThemeToggleExample() {\n  return (\n    <div className=\"p-8 bg-background\">\n      <ThemeToggle />\n      <p className=\"mt-4 text-muted-foreground\">Click to toggle between light and dark themes</p>\n    </div>\n  );\n}","size_bytes":278},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/pages/AdminGallery.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Plus,\n  Search,\n  Edit,\n  Trash2,\n  Upload,\n  Eye,\n  EyeOff,\n  Image,\n  Video,\n  ExternalLink\n} from \"lucide-react\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface GalleryItem {\n  id: string;\n  title: { en: string; fr: string; de: string; ar: string };\n  description: { en: string; fr: string; de: string; ar: string };\n  type: string; // 'image' | 'video'\n  url: string;\n  thumbnailUrl?: string;\n  category?: string;\n  isActive: boolean;\n  sortOrder: number;\n  createdAt: string;\n}\n\nconst languages = [\n  { code: 'en', name: 'English', flag: '🇺🇸' },\n  { code: 'fr', name: 'Français', flag: '🇫🇷' },\n  { code: 'de', name: 'Deutsch', flag: '🇩🇪' },\n  { code: 'ar', name: 'العربية', flag: '🇹🇳' },\n];\n\nconst categories = [\n  \"desert\", \"adventure\", \"cultural\", \"wildlife\", \"landscape\", \"people\", \"sunset\", \"camp\", \"general\"\n];\n\nexport default function AdminGallery() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n  const [typeFilter, setTypeFilter] = useState(\"all\");\n  const [editingItem, setEditingItem] = useState<GalleryItem | null>(null);\n  const [showUploadDialog, setShowUploadDialog] = useState(false);\n  const [newItemData, setNewItemData] = useState({\n    url: \"\",\n    type: \"image\",\n    category: \"general\",\n    title: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n    description: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n  });\n\n  // Upload helper functions\n  const handleGetUploadParameters = async () => {\n    const response = await fetch('/api/admin/objects/upload', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'include',\n    });\n    \n    if (!response.ok) {\n      throw new Error('Failed to get upload URL');\n    }\n    \n    const data = await response.json();\n    return {\n      method: 'PUT' as const,\n      url: data.uploadURL,\n    };\n  };\n\n  const handleFileUploadComplete = async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n    try {\n      if (result.successful && result.successful.length > 0) {\n        const uploadedFile = result.successful[0];\n        const fileURL = uploadedFile.uploadURL;\n        \n        // Set ACL policy for the uploaded file\n        const response = await fetch('/api/admin/objects', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({\n            fileURL: fileURL,\n            visibility: 'public',\n            fileType: uploadedFile.type || 'image'\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to process uploaded file');\n        }\n\n        const data = await response.json();\n        const objectPath = data.objectPath;\n        \n        // Update the URL field and determine type\n        const fileType = uploadedFile.type?.startsWith('video/') ? 'video' : 'image';\n        setNewItemData(prev => ({\n          ...prev,\n          url: objectPath,\n          type: fileType\n        }));\n        \n        toast({\n          title: \"File Uploaded\",\n          description: \"Gallery file uploaded successfully\",\n        });\n      }\n    } catch (error) {\n      console.error('Error processing upload:', error);\n      toast({\n        title: \"Upload Error\",\n        description: \"Failed to process uploaded file\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  // API helper with auth - using httpOnly cookies\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\", // Include httpOnly cookies\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    // Handle 401 by redirecting to login\n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  // Fetch gallery items\n  const { data: galleryItems = [], isLoading } = useQuery({\n    queryKey: [\"/api/admin/gallery\"],\n    queryFn: async () => {\n      const response = await authenticatedApiRequest(\"GET\", \"/api/admin/gallery\");\n      if (!response.ok) throw new Error(\"Failed to fetch gallery items\");\n      return await response.json() as GalleryItem[];\n    },\n  });\n\n  // Create gallery item mutation\n  const createGalleryItemMutation = useMutation({\n    mutationFn: async (itemData: any) => {\n      const response = await authenticatedApiRequest(\"POST\", \"/api/admin/gallery\", itemData);\n      if (!response.ok) throw new Error(\"Failed to create gallery item\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/gallery\"] });\n      toast({\n        title: \"Gallery Item Created\",\n        description: \"Gallery item has been added successfully\",\n      });\n      setShowUploadDialog(false);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create gallery item\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Update gallery item mutation\n  const updateGalleryItemMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const response = await authenticatedApiRequest(\"PUT\", `/api/admin/gallery/${id}`, data);\n      if (!response.ok) throw new Error(\"Failed to update gallery item\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/gallery\"] });\n      toast({\n        title: \"Gallery Item Updated\",\n        description: \"Gallery item has been updated successfully\",\n      });\n      setEditingItem(null);\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update gallery item\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  // Delete gallery item mutation\n  const deleteGalleryItemMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await authenticatedApiRequest(\"DELETE\", `/api/admin/gallery/${id}`);\n      if (!response.ok) throw new Error(\"Failed to delete gallery item\");\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/gallery\"] });\n      toast({\n        title: \"Gallery Item Deleted\",\n        description: \"Gallery item has been deleted successfully\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete gallery item\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleToggleActive = (item: GalleryItem) => {\n    updateGalleryItemMutation.mutate({\n      id: item.id,\n      data: { isActive: !item.isActive }\n    });\n  };\n\n  const handleDelete = (item: GalleryItem) => {\n    if (confirm(`Are you sure you want to delete \"${item.title.en}\"?`)) {\n      deleteGalleryItemMutation.mutate(item.id);\n    }\n  };\n\n  // Filter gallery items\n  const filteredItems = galleryItems.filter(item => {\n    const matchesSearch = \n      item.title.en.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      item.title.fr.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (item.category && item.category.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesCategory = categoryFilter === \"all\" || item.category === categoryFilter;\n    const matchesType = typeFilter === \"all\" || item.type === typeFilter;\n    \n    return matchesSearch && matchesCategory && matchesType;\n  });\n\n  const getTypeIcon = (type: string) => {\n    return type === 'video' ? <Video className=\"h-4 w-4\" /> : <Image className=\"h-4 w-4\" />;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card\">\n        <div className=\"flex h-16 items-center justify-between px-6\">\n          <div className=\"flex items-center space-x-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => setLocation(\"/admin/dashboard\")}\n              data-testid=\"button-back\"\n            >\n              <ArrowLeft className=\"h-4 w-4 mr-2\" />\n              Back to Dashboard\n            </Button>\n            <h1 className=\"text-xl font-semibold\">Gallery Management</h1>\n          </div>\n          <Dialog open={showUploadDialog} onOpenChange={setShowUploadDialog}>\n            <DialogTrigger asChild>\n              <Button data-testid=\"button-upload\">\n                <Plus className=\"h-4 w-4 mr-2\" />\n                Add Item\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-2xl max-h-[80vh] flex flex-col\">\n              <DialogHeader className=\"flex-shrink-0\">\n                <DialogTitle>Add Gallery Item</DialogTitle>\n                <DialogDescription>\n                  Upload your files and add details below.\n                </DialogDescription>\n              </DialogHeader>\n              <div className=\"overflow-auto flex-1 pr-2\">\n                <UploadForm \n                  onSubmit={createGalleryItemMutation.mutate}\n                  isLoading={createGalleryItemMutation.isPending}\n                  newItemData={newItemData}\n                  setNewItemData={setNewItemData}\n                  handleGetUploadParameters={handleGetUploadParameters}\n                  handleFileUploadComplete={handleFileUploadComplete}\n                />\n              </div>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </header>\n\n      <div className=\"p-6 space-y-6\">\n        {/* Filters */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col lg:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Search by title or category...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                    data-testid=\"input-search\"\n                  />\n                </div>\n              </div>\n              <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-category\">\n                  <SelectValue placeholder=\"Filter by category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Categories</SelectItem>\n                  {categories.map(cat => (\n                    <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <Select value={typeFilter} onValueChange={setTypeFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-type\">\n                  <SelectValue placeholder=\"Filter by type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Types</SelectItem>\n                  <SelectItem value=\"image\">Images</SelectItem>\n                  <SelectItem value=\"video\">Videos</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Gallery Grid */}\n        {isLoading ? (\n          <div className=\"text-center py-8\">Loading gallery items...</div>\n        ) : filteredItems.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-8 text-center\">\n              <p className=\"text-muted-foreground\">\n                {searchTerm || categoryFilter !== \"all\" || typeFilter !== \"all\"\n                  ? \"No gallery items match your search criteria\"\n                  : \"No gallery items found. Upload your first item to get started!\"\n                }\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n            {filteredItems.map((item) => (\n              <Card key={item.id} className=\"hover-elevate overflow-hidden\">\n                <div className=\"aspect-video relative bg-muted\">\n                  {item.type === 'image' ? (\n                    <img \n                      src={item.url} \n                      alt={item.title.en}\n                      className=\"w-full h-full object-cover\"\n                      onError={(e) => {\n                        e.currentTarget.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMiAxNkw4IDEyTDEwIDEwTDEyIDEyTDE2IDhMMjAgMTJWMTZIMTJaIiBmaWxsPSIjOWNhM2FmIi8+CjwvcHZnPgo=';\n                      }}\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center bg-gray-100\">\n                      <Video className=\"h-12 w-12 text-gray-400\" />\n                    </div>\n                  )}\n                  <div className=\"absolute top-2 left-2 flex gap-1\">\n                    <Badge variant={item.isActive ? \"default\" : \"secondary\"} className=\"text-xs\">\n                      {item.isActive ? \"Active\" : \"Inactive\"}\n                    </Badge>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {getTypeIcon(item.type)}\n                      <span className=\"ml-1\">{item.type}</span>\n                    </Badge>\n                  </div>\n                </div>\n                \n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-2\">\n                    <h3 className=\"font-medium text-sm line-clamp-2\">{item.title.en}</h3>\n                    {item.category && (\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {item.category}\n                      </Badge>\n                    )}\n                    <div className=\"flex justify-between items-center pt-2\">\n                      <div className=\"flex space-x-1\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleToggleActive(item)}\n                          data-testid={`button-toggle-${item.id}`}\n                        >\n                          {item.isActive ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => setEditingItem(item)}\n                          data-testid={`button-edit-${item.id}`}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleDelete(item)}\n                          data-testid={`button-delete-${item.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => window.open(item.url, '_blank')}\n                      >\n                        <ExternalLink className=\"h-4 w-4\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Edit Dialog */}\n      {editingItem && (\n        <Dialog open={!!editingItem} onOpenChange={() => setEditingItem(null)}>\n          <DialogContent className=\"max-w-2xl max-h-[80vh] flex flex-col\">\n            <DialogHeader className=\"flex-shrink-0\">\n              <DialogTitle>Edit Gallery Item</DialogTitle>\n              <DialogDescription>\n                Update the gallery item details.\n              </DialogDescription>\n            </DialogHeader>\n            <div className=\"overflow-auto flex-1 pr-2\">\n              <EditForm \n                item={editingItem}\n                onSubmit={(data) => updateGalleryItemMutation.mutate({ id: editingItem.id, data })}\n                isLoading={updateGalleryItemMutation.isPending}\n                onCancel={() => setEditingItem(null)}\n              />\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n}\n\n// Upload Form Component\nfunction UploadForm({ \n  onSubmit, \n  isLoading, \n  newItemData, \n  setNewItemData, \n  handleGetUploadParameters, \n  handleFileUploadComplete \n}: { \n  onSubmit: (data: any) => void; \n  isLoading: boolean;\n  newItemData: any;\n  setNewItemData: (data: any) => void;\n  handleGetUploadParameters: () => Promise<any>;\n  handleFileUploadComplete: (result: any) => Promise<void>;\n}) {\n  const [formData, setFormData] = useState({\n    type: newItemData.type || 'image',\n    url: newItemData.url || '',\n    thumbnailUrl: '',\n    category: newItemData.category || '',\n    title: newItemData.title || { en: '', fr: '', de: '', ar: '' },\n    description: newItemData.description || { en: '', fr: '', de: '', ar: '' },\n    sortOrder: 0\n  });\n\n  // Update form data when newItemData changes (from upload)\n  useEffect(() => {\n    if (newItemData.url) {\n      setFormData(prev => ({\n        ...prev,\n        url: newItemData.url,\n        type: newItemData.type || prev.type,\n      }));\n    }\n  }, [newItemData.url, newItemData.type]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-3\">\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <Label htmlFor=\"type\" className=\"text-sm\">Type</Label>\n          <Select value={formData.type} onValueChange={(value) => setFormData(prev => ({ ...prev, type: value }))}>\n            <SelectTrigger className=\"h-8\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"image\">Image</SelectItem>\n              <SelectItem value=\"video\">Video</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor=\"category\" className=\"text-sm\">Category</Label>\n          <Select value={formData.category} onValueChange={(value) => setFormData(prev => ({ ...prev, category: value }))}>\n            <SelectTrigger className=\"h-8\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {categories.map(cat => (\n                <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      <div className=\"space-y-2\">\n        <Label htmlFor=\"url\" className=\"text-sm\">Gallery File</Label>\n        <Input\n          id=\"url\"\n          value={formData.url}\n          onChange={(e) => setFormData(prev => ({ ...prev, url: e.target.value }))}\n          placeholder=\"File URL or upload below\"\n          required\n          className=\"h-8\"\n        />\n        <ObjectUploader\n          maxNumberOfFiles={1}\n          maxFileSize={formData.type === 'video' ? 104857600 : 10485760} // 100MB for videos, 10MB for images\n          allowedFileTypes={formData.type === 'video' \n            ? ['.mp4', '.webm', '.mov'] \n            : ['.jpg', '.jpeg', '.png', '.webp']\n          }\n          onGetUploadParameters={handleGetUploadParameters}\n          onComplete={handleFileUploadComplete}\n          buttonClassName=\"w-full h-8\"\n          data-testid=\"button-upload-gallery-file\"\n        >\n          <Upload className=\"h-3 w-3 mr-2\" />\n          Upload {formData.type === 'video' ? 'Video' : 'Image'}\n        </ObjectUploader>\n        {formData.url && (\n          <div className=\"text-xs text-muted-foreground truncate\">\n            Current: {formData.url}\n          </div>\n        )}\n      </div>\n\n      {formData.type === 'video' && (\n        <div>\n          <Label htmlFor=\"thumbnailUrl\" className=\"text-sm\">Thumbnail URL (Optional)</Label>\n          <Input\n            id=\"thumbnailUrl\"\n            value={formData.thumbnailUrl}\n            onChange={(e) => setFormData(prev => ({ ...prev, thumbnailUrl: e.target.value }))}\n            placeholder=\"https://your-object-storage-url/thumbnail.jpg\"\n            className=\"h-8\"\n          />\n        </div>\n      )}\n\n      <div className=\"space-y-3\">\n        <div className=\"grid grid-cols-2 gap-3\">\n          {languages.map(lang => (\n            <div key={lang.code}>\n              <Label htmlFor={`title-${lang.code}`} className=\"text-sm\">Title ({lang.name}) *</Label>\n              <Input\n                id={`title-${lang.code}`}\n                value={formData.title[lang.code as keyof typeof formData.title]}\n                onChange={(e) => setFormData(prev => ({ \n                  ...prev, \n                  title: { ...prev.title, [lang.code]: e.target.value }\n                }))}\n                required\n                data-testid={`input-title-${lang.code}`}\n                className=\"h-8\"\n              />\n            </div>\n          ))}\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-3\">\n          {languages.map(lang => (\n            <div key={lang.code}>\n              <Label htmlFor={`desc-${lang.code}`} className=\"text-sm\">Description ({lang.name})</Label>\n              <Textarea\n                id={`desc-${lang.code}`}\n                value={formData.description[lang.code as keyof typeof formData.description]}\n                onChange={(e) => setFormData(prev => ({ \n                  ...prev, \n                  description: { ...prev.description, [lang.code]: e.target.value }\n                }))}\n                rows={2}\n                data-testid={`textarea-description-${lang.code}`}\n                className=\"text-sm\"\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"flex justify-end space-x-2 pt-2\">\n        <Button type=\"submit\" disabled={isLoading} data-testid=\"button-create-gallery-item\" className=\"h-8\">\n          {isLoading ? \"Creating...\" : \"Create Gallery Item\"}\n        </Button>\n      </div>\n    </form>\n  );\n}\n\n// Edit Form Component  \nfunction EditForm({ item, onSubmit, isLoading, onCancel }: { \n  item: GalleryItem; \n  onSubmit: (data: any) => void; \n  isLoading: boolean;\n  onCancel: () => void;\n}) {\n  const [formData, setFormData] = useState({\n    title: item.title,\n    description: item.description,\n    category: item.category || '',\n    isActive: item.isActive,\n    sortOrder: item.sortOrder\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit(formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <Label htmlFor=\"category\">Category</Label>\n          <Select value={formData.category} onValueChange={(value) => setFormData(prev => ({ ...prev, category: value }))}>\n            <SelectTrigger>\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              {categories.map(cat => (\n                <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n        </div>\n        <div>\n          <Label htmlFor=\"sortOrder\">Sort Order</Label>\n          <Input\n            id=\"sortOrder\"\n            type=\"number\"\n            value={formData.sortOrder}\n            onChange={(e) => setFormData(prev => ({ ...prev, sortOrder: parseInt(e.target.value) || 0 }))}\n          />\n        </div>\n      </div>\n\n      {languages.map(lang => (\n        <div key={lang.code}>\n          <Label htmlFor={`title-${lang.code}`}>Title ({lang.name}) *</Label>\n          <Input\n            id={`title-${lang.code}`}\n            value={formData.title[lang.code as keyof typeof formData.title]}\n            onChange={(e) => setFormData(prev => ({ \n              ...prev, \n              title: { ...prev.title, [lang.code]: e.target.value }\n            }))}\n            required\n          />\n        </div>\n      ))}\n\n      {languages.map(lang => (\n        <div key={lang.code}>\n          <Label htmlFor={`desc-${lang.code}`}>Description ({lang.name})</Label>\n          <Textarea\n            id={`desc-${lang.code}`}\n            value={formData.description[lang.code as keyof typeof formData.description]}\n            onChange={(e) => setFormData(prev => ({ \n              ...prev, \n              description: { ...prev.description, [lang.code]: e.target.value }\n            }))}\n            rows={3}\n          />\n        </div>\n      ))}\n\n      <div className=\"flex justify-end space-x-2\">\n        <Button type=\"button\" variant=\"outline\" onClick={onCancel}>\n          Cancel\n        </Button>\n        <Button type=\"submit\" disabled={isLoading}>\n          {isLoading ? \"Updating...\" : \"Update Gallery Item\"}\n        </Button>\n      </div>\n    </form>\n  );\n}","size_bytes":26676},"client/src/pages/Gallery.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Search, Image, Video, Eye } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\n\ninterface GalleryItem {\n  id: string;\n  title: { en: string; fr: string; de: string; ar: string };\n  description: { en: string; fr: string; de: string; ar: string };\n  type: string; // 'image' | 'video'\n  url: string;\n  thumbnailUrl?: string;\n  category?: string;\n  isActive: boolean;\n  sortOrder: number;\n  createdAt: string;\n}\n\ninterface GalleryProps {\n  currentLanguage: string;\n}\n\nconst categories = [\n  \"desert\", \"adventure\", \"cultural\", \"wildlife\", \"landscape\", \"people\", \"sunset\", \"camp\", \"general\"\n];\n\nexport default function Gallery({ currentLanguage }: GalleryProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n  const [typeFilter, setTypeFilter] = useState(\"all\");\n  const [selectedItem, setSelectedItem] = useState<GalleryItem | null>(null);\n\n  // Fetch gallery items (only active ones for public display)\n  const { data: galleryItems = [], isLoading, error } = useQuery({\n    queryKey: [\"/api/gallery\"],\n    staleTime: 5 * 60 * 1000, // 5 minutes\n  }) as { data: GalleryItem[]; isLoading: boolean; error: any };\n\n  // Filter gallery items\n  const filteredItems = galleryItems.filter((item: GalleryItem) => {\n    const title = item.title[currentLanguage as keyof typeof item.title] || item.title.en;\n    const description = item.description[currentLanguage as keyof typeof item.description] || item.description.en;\n    \n    const matchesSearch = \n      title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      (item.category && item.category.toLowerCase().includes(searchTerm.toLowerCase()));\n    \n    const matchesCategory = categoryFilter === \"all\" || item.category === categoryFilter;\n    const matchesType = typeFilter === \"all\" || item.type === typeFilter;\n    \n    return matchesSearch && matchesCategory && matchesType;\n  });\n\n  const getTypeIcon = (type: string) => {\n    return type === 'video' ? <Video className=\"h-4 w-4\" /> : <Image className=\"h-4 w-4\" />;\n  };\n\n  const getLocalizedText = (textObj: any, fallback = \"\") => {\n    if (!textObj) return fallback;\n    return textObj[currentLanguage as keyof typeof textObj] || textObj.en || fallback;\n  };\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-4\">\n          <h2 className=\"text-2xl font-bold text-destructive\">Failed to Load Gallery</h2>\n          <p className=\"text-muted-foreground\">We're sorry, but the gallery couldn't be loaded at this time.</p>\n          <Button onClick={() => window.location.reload()}>\n            Try Again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <section className=\"relative bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-950/20 dark:to-orange-950/20 py-16\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center space-y-6\">\n            <h1 className=\"text-4xl md:text-5xl font-bold text-primary\">\n              {currentLanguage === 'fr' ? 'Galerie Photo' : \n               currentLanguage === 'de' ? 'Fotogalerie' :\n               currentLanguage === 'ar' ? 'معرض الصور' : 'Photo Gallery'}\n            </h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              {currentLanguage === 'fr' ? 'Découvrez la beauté du Sahara tunisien à travers notre collection de photos et vidéos captivantes.' :\n               currentLanguage === 'de' ? 'Entdecken Sie die Schönheit der tunesischen Sahara durch unsere fesselnde Sammlung von Fotos und Videos.' :\n               currentLanguage === 'ar' ? 'اكتشف جمال الصحراء التونسية من خلال مجموعتنا الساحرة من الصور ومقاطع الفيديو.' :\n               'Discover the beauty of the Tunisian Sahara through our captivating collection of photos and videos.'}\n            </p>\n          </div>\n        </div>\n      </section>\n\n      <div className=\"container mx-auto px-4 py-8 space-y-8\">\n        {/* Filters */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col lg:flex-row gap-4\">\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                  <Input\n                    placeholder={\n                      currentLanguage === 'fr' ? 'Rechercher par titre ou catégorie...' :\n                      currentLanguage === 'de' ? 'Nach Titel oder Kategorie suchen...' :\n                      currentLanguage === 'ar' ? 'البحث بالعنوان أو الفئة...' :\n                      'Search by title or category...'\n                    }\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                    data-testid=\"input-search\"\n                  />\n                </div>\n              </div>\n              <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-category\">\n                  <SelectValue placeholder={\n                    currentLanguage === 'fr' ? 'Filtrer par catégorie' :\n                    currentLanguage === 'de' ? 'Nach Kategorie filtern' :\n                    currentLanguage === 'ar' ? 'تصفية حسب الفئة' :\n                    'Filter by category'\n                  } />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">\n                    {currentLanguage === 'fr' ? 'Toutes les catégories' :\n                     currentLanguage === 'de' ? 'Alle Kategorien' :\n                     currentLanguage === 'ar' ? 'جميع الفئات' :\n                     'All Categories'}\n                  </SelectItem>\n                  {categories.map(cat => (\n                    <SelectItem key={cat} value={cat}>\n                      {cat.charAt(0).toUpperCase() + cat.slice(1)}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              <Select value={typeFilter} onValueChange={setTypeFilter}>\n                <SelectTrigger className=\"w-full lg:w-48\" data-testid=\"select-type\">\n                  <SelectValue placeholder={\n                    currentLanguage === 'fr' ? 'Filtrer par type' :\n                    currentLanguage === 'de' ? 'Nach Typ filtern' :\n                    currentLanguage === 'ar' ? 'تصفية حسب النوع' :\n                    'Filter by type'\n                  } />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">\n                    {currentLanguage === 'fr' ? 'Tous les types' :\n                     currentLanguage === 'de' ? 'Alle Typen' :\n                     currentLanguage === 'ar' ? 'جميع الأنواع' :\n                     'All Types'}\n                  </SelectItem>\n                  <SelectItem value=\"image\">\n                    {currentLanguage === 'fr' ? 'Images' :\n                     currentLanguage === 'de' ? 'Bilder' :\n                     currentLanguage === 'ar' ? 'صور' :\n                     'Images'}\n                  </SelectItem>\n                  <SelectItem value=\"video\">\n                    {currentLanguage === 'fr' ? 'Vidéos' :\n                     currentLanguage === 'de' ? 'Videos' :\n                     currentLanguage === 'ar' ? 'فيديوهات' :\n                     'Videos'}\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Gallery Grid */}\n        {isLoading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {[...Array(8)].map((_, i) => (\n              <Card key={i} className=\"overflow-hidden\">\n                <div className=\"aspect-video bg-muted animate-pulse\" />\n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"h-4 bg-muted animate-pulse rounded\" />\n                    <div className=\"h-3 bg-muted animate-pulse rounded w-3/4\" />\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : filteredItems.length === 0 ? (\n          <Card>\n            <CardContent className=\"py-16 text-center\">\n              <div className=\"space-y-4\">\n                <Image className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n                <div className=\"space-y-2\">\n                  <h3 className=\"text-lg font-medium\">\n                    {searchTerm || categoryFilter !== \"all\" || typeFilter !== \"all\"\n                      ? (currentLanguage === 'fr' ? 'Aucun résultat trouvé' :\n                         currentLanguage === 'de' ? 'Keine Ergebnisse gefunden' :\n                         currentLanguage === 'ar' ? 'لم يتم العثور على نتائج' :\n                         'No results found')\n                      : (currentLanguage === 'fr' ? 'Galerie vide' :\n                         currentLanguage === 'de' ? 'Galerie leer' :\n                         currentLanguage === 'ar' ? 'المعرض فارغ' :\n                         'Gallery is empty')\n                    }\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    {searchTerm || categoryFilter !== \"all\" || typeFilter !== \"all\"\n                      ? (currentLanguage === 'fr' ? 'Essayez de modifier vos critères de recherche' :\n                         currentLanguage === 'de' ? 'Versuchen Sie, Ihre Suchkriterien zu ändern' :\n                         currentLanguage === 'ar' ? 'حاول تعديل معايير البحث' :\n                         'Try adjusting your search criteria')\n                      : (currentLanguage === 'fr' ? 'Nous ajoutons régulièrement de nouveaux contenus' :\n                         currentLanguage === 'de' ? 'Wir fügen regelmäßig neue Inhalte hinzu' :\n                         currentLanguage === 'ar' ? 'نضيف محتوى جديد بانتظام' :\n                         'We regularly add new content')\n                    }\n                  </p>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {filteredItems.map((item: GalleryItem) => (\n              <Card \n                key={item.id} \n                className=\"hover-elevate overflow-hidden cursor-pointer\"\n                onClick={() => setSelectedItem(item)}\n                data-testid={`gallery-item-${item.id}`}\n              >\n                <div className=\"aspect-video relative bg-muted\">\n                  {item.type === 'image' ? (\n                    <img \n                      src={item.url} \n                      alt={getLocalizedText(item.title)}\n                      className=\"w-full h-full object-cover\"\n                      loading=\"lazy\"\n                      onError={(e) => {\n                        e.currentTarget.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjZjNmNGY2Ii8+CjxwYXRoIGQ9Ik0xMiAxNkw4IDEyTDEwIDEwTDEyIDEyTDE2IDhMMjAgMTJWMTZIMTJaIiBmaWxsPSIjOWNhM2FmIi8+CjwvcHZnPgo=';\n                      }}\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-900\">\n                      <Video className=\"h-12 w-12 text-gray-500\" />\n                    </div>\n                  )}\n                  <div className=\"absolute top-2 left-2\">\n                    <Badge variant=\"secondary\" className=\"text-xs bg-black/50 text-white border-0\">\n                      {getTypeIcon(item.type)}\n                      <span className=\"ml-1\">\n                        {item.type === 'video' ? (\n                          currentLanguage === 'fr' ? 'Vidéo' :\n                          currentLanguage === 'de' ? 'Video' :\n                          currentLanguage === 'ar' ? 'فيديو' :\n                          'Video'\n                        ) : (\n                          currentLanguage === 'fr' ? 'Photo' :\n                          currentLanguage === 'de' ? 'Foto' :\n                          currentLanguage === 'ar' ? 'صورة' :\n                          'Photo'\n                        )}\n                      </span>\n                    </Badge>\n                  </div>\n                  <div className=\"absolute inset-0 bg-black/0 hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 hover:opacity-100\">\n                    <Eye className=\"h-8 w-8 text-white\" />\n                  </div>\n                </div>\n                \n                <CardContent className=\"p-4\">\n                  <div className=\"space-y-2\">\n                    <h3 className=\"font-medium text-sm line-clamp-2 min-h-[2.5rem]\">\n                      {getLocalizedText(item.title)}\n                    </h3>\n                    {item.category && (\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {item.category.charAt(0).toUpperCase() + item.category.slice(1)}\n                      </Badge>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Full Screen View Dialog */}\n      {selectedItem && (\n        <Dialog open={!!selectedItem} onOpenChange={() => setSelectedItem(null)}>\n          <DialogContent className=\"max-w-4xl max-h-[90vh] p-0\">\n            <DialogHeader className=\"p-6 pb-0\">\n              <DialogTitle className=\"text-left\">\n                {getLocalizedText(selectedItem.title)}\n              </DialogTitle>\n            </DialogHeader>\n            <div className=\"p-6 pt-4\">\n              <div className=\"space-y-4\">\n                <div className=\"relative bg-muted rounded-lg overflow-hidden\">\n                  {selectedItem.type === 'image' ? (\n                    <img \n                      src={selectedItem.url} \n                      alt={getLocalizedText(selectedItem.title)}\n                      className=\"w-full max-h-[60vh] object-contain\"\n                    />\n                  ) : (\n                    <video \n                      src={selectedItem.url}\n                      controls\n                      className=\"w-full max-h-[60vh]\"\n                      poster={selectedItem.thumbnailUrl}\n                    >\n                      {currentLanguage === 'fr' ? 'Votre navigateur ne supporte pas les vidéos.' :\n                       currentLanguage === 'de' ? 'Ihr Browser unterstützt keine Videos.' :\n                       currentLanguage === 'ar' ? 'متصفحك لا يدعم الفيديو.' :\n                       'Your browser does not support videos.'}\n                    </video>\n                  )}\n                </div>\n                \n                {getLocalizedText(selectedItem.description) && (\n                  <div className=\"space-y-2\">\n                    <h4 className=\"font-medium\">\n                      {currentLanguage === 'fr' ? 'Description' :\n                       currentLanguage === 'de' ? 'Beschreibung' :\n                       currentLanguage === 'ar' ? 'الوصف' :\n                       'Description'}\n                    </h4>\n                    <p className=\"text-muted-foreground\">\n                      {getLocalizedText(selectedItem.description)}\n                    </p>\n                  </div>\n                )}\n                \n                <div className=\"flex items-center gap-2 pt-2\">\n                  <Badge variant=\"outline\">\n                    {getTypeIcon(selectedItem.type)}\n                    <span className=\"ml-1\">\n                      {selectedItem.type === 'video' ? (\n                        currentLanguage === 'fr' ? 'Vidéo' :\n                        currentLanguage === 'de' ? 'Video' :\n                        currentLanguage === 'ar' ? 'فيديو' :\n                        'Video'\n                      ) : (\n                        currentLanguage === 'fr' ? 'Photo' :\n                        currentLanguage === 'de' ? 'Foto' :\n                        currentLanguage === 'ar' ? 'صورة' :\n                        'Photo'\n                      )}\n                    </span>\n                  </Badge>\n                  {selectedItem.category && (\n                    <Badge variant=\"outline\">\n                      {selectedItem.category.charAt(0).toUpperCase() + selectedItem.category.slice(1)}\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n}","size_bytes":17886},"server/email.ts":{"content":"import { MailService } from '@sendgrid/mail';\n\nconst mailService = new MailService();\n\n// Initialize SendGrid API key at runtime, not import time\nconst initializeMailService = () => {\n  if (!process.env.SENDGRID_API_KEY) {\n    console.warn(\"SENDGRID_API_KEY not found - email notifications will be disabled\");\n    return false;\n  }\n  \n  try {\n    mailService.setApiKey(process.env.SENDGRID_API_KEY);\n    return true;\n  } catch (error) {\n    console.error(\"Failed to initialize SendGrid:\", error);\n    return false;\n  }\n};\n\ninterface EmailParams {\n  to: string;\n  from?: string;\n  subject: string;\n  text?: string;\n  html?: string;\n}\n\nexport async function sendEmail(params: EmailParams): Promise<boolean> {\n  // Check if SendGrid is properly initialized\n  if (!initializeMailService()) {\n    console.log('Email sending disabled - SENDGRID_API_KEY not configured');\n    return false;\n  }\n\n  try {\n    await mailService.send({\n      to: params.to,\n      from: params.from || 'info@sghayratours.com', // Use a more professional from address\n      subject: params.subject,\n      text: params.text,\n      html: params.html,\n    });\n    console.log(`Email sent successfully to ${params.to}`);\n    return true;\n  } catch (error) {\n    console.error('SendGrid email error:', error);\n    return false;\n  }\n}\n\n// Email template system for multilingual notifications\ninterface BookingEmailData {\n  customerName: string;\n  customerEmail: string;\n  activityTitle: string;\n  bookingDate: string;\n  groupSize: number;\n  totalPrice: number;\n  currency: string;\n  depositAmount: number;\n  bookingId: string;\n  paymentStatus: 'unpaid' | 'deposit_paid' | 'fully_paid';\n  status: 'pending' | 'confirmed' | 'cancelled' | 'completed';\n}\n\nconst emailTemplates = {\n  bookingConfirmation: {\n    en: {\n      subject: (data: BookingEmailData) => `Booking Confirmation - ${data.activityTitle}`,\n      html: (data: BookingEmailData) => `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n          <div style=\"background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%); color: white; padding: 30px; text-align: center;\">\n            <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">Sghayra Tours</h1>\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;\">Your Sahara Adventure Awaits</p>\n          </div>\n          \n          <div style=\"padding: 30px;\">\n            <h2 style=\"color: #D97706; margin-bottom: 20px; font-size: 24px;\">Booking Confirmed!</h2>\n            \n            <p style=\"color: #374151; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">\n              Dear ${data.customerName},<br><br>\n              Thank you for booking with Sghayra Tours! We're excited to take you on an unforgettable journey through the Tunisian Sahara.\n            </p>\n            \n            <div style=\"background: #F9FAFB; border-radius: 8px; padding: 20px; margin-bottom: 25px;\">\n              <h3 style=\"color: #D97706; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">Booking Details</h3>\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Activity:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.activityTitle}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Date:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.bookingDate}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Group Size:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.groupSize} ${data.groupSize === 1 ? 'person' : 'people'}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Total Price:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-weight: bold;\">${data.totalPrice} ${data.currency}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Deposit Required:</td>\n                  <td style=\"padding: 8px 0; color: #D97706; font-weight: bold;\">${data.depositAmount} ${data.currency}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Booking ID:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-family: monospace;\">${data.bookingId}</td>\n                </tr>\n              </table>\n            </div>\n            \n            ${data.paymentStatus === 'unpaid' ? `\n            <div style=\"background: #FEF3CD; border: 1px solid #F59E0B; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #D97706; margin: 0 0 10px 0; font-size: 16px;\">⚠️ Payment Required</h4>\n              <p style=\"color: #92400E; margin: 0; font-size: 14px;\">\n                A deposit of ${data.depositAmount} ${data.currency} is required to secure your booking. Please contact us to complete the payment.\n              </p>\n            </div>\n            ` : ''}\n            \n            <div style=\"background: #ECFDF5; border: 1px solid #10B981; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #047857; margin: 0 0 10px 0; font-size: 16px;\">📞 Contact Information</h4>\n              <p style=\"color: #065F46; margin: 0; font-size: 14px;\">\n                Email: info@sghayratours.com<br>\n                WhatsApp:+216 40 676 420 <br>\n                We're here to help with any questions about your adventure!\n              </p>\n            </div>\n            \n            <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n              Thank you for choosing Sghayra Tours. We look forward to sharing the magic of the Sahara with you!\n            </p>\n          </div>\n        </div>\n      `,\n    },\n    fr: {\n      subject: (data: BookingEmailData) => `Confirmation de Réservation - ${data.activityTitle}`,\n      html: (data: BookingEmailData) => `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n          <div style=\"background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%); color: white; padding: 30px; text-align: center;\">\n            <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">Sghayra Tours</h1>\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;\">Votre Aventure au Sahara Vous Attend</p>\n          </div>\n          \n          <div style=\"padding: 30px;\">\n            <h2 style=\"color: #D97706; margin-bottom: 20px; font-size: 24px;\">Réservation Confirmée!</h2>\n            \n            <p style=\"color: #374151; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">\n              Cher/Chère ${data.customerName},<br><br>\n              Merci d'avoir réservé avec Sghayra Tours! Nous sommes ravis de vous emmener dans un voyage inoubliable à travers le Sahara tunisien.\n            </p>\n            \n            <div style=\"background: #F9FAFB; border-radius: 8px; padding: 20px; margin-bottom: 25px;\">\n              <h3 style=\"color: #D97706; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">Détails de la Réservation</h3>\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Activité:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.activityTitle}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Date:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.bookingDate}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Taille du Groupe:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.groupSize} ${data.groupSize === 1 ? 'personne' : 'personnes'}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Prix Total:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-weight: bold;\">${data.totalPrice} ${data.currency}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Acompte Requis:</td>\n                  <td style=\"padding: 8px 0; color: #D97706; font-weight: bold;\">${data.depositAmount} ${data.currency}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">ID de Réservation:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-family: monospace;\">${data.bookingId}</td>\n                </tr>\n              </table>\n            </div>\n            \n            ${data.paymentStatus === 'unpaid' ? `\n            <div style=\"background: #FEF3CD; border: 1px solid #F59E0B; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #D97706; margin: 0 0 10px 0; font-size: 16px;\">⚠️ Paiement Requis</h4>\n              <p style=\"color: #92400E; margin: 0; font-size: 14px;\">\n                Un acompte de ${data.depositAmount} ${data.currency} est requis pour sécuriser votre réservation. Veuillez nous contacter pour finaliser le paiement.\n              </p>\n            </div>\n            ` : ''}\n            \n            <div style=\"background: #ECFDF5; border: 1px solid #10B981; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #047857; margin: 0 0 10px 0; font-size: 16px;\">📞 Informations de Contact</h4>\n              <p style=\"color: #065F46; margin: 0; font-size: 14px;\">\n                Email: info@sghayratours.com<br>\n                WhatsApp: +216 40 676 420<br>\n                Nous sommes là pour répondre à toutes vos questions sur votre aventure!\n              </p>\n            </div>\n            \n            <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n              Merci d'avoir choisi Sghayra Tours. Nous avons hâte de partager la magie du Sahara avec vous!\n            </p>\n          </div>\n        </div>\n      `,\n    },\n    de: {\n      subject: (data: BookingEmailData) => `Buchungsbestätigung - ${data.activityTitle}`,\n      html: (data: BookingEmailData) => `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n          <div style=\"background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%); color: white; padding: 30px; text-align: center;\">\n            <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">Sghayra Tours</h1>\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;\">Ihr Sahara-Abenteuer Wartet</p>\n          </div>\n          \n          <div style=\"padding: 30px;\">\n            <h2 style=\"color: #D97706; margin-bottom: 20px; font-size: 24px;\">Buchung Bestätigt!</h2>\n            \n            <p style=\"color: #374151; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">\n              Liebe/r ${data.customerName},<br><br>\n              Vielen Dank für Ihre Buchung bei Sghayra Tours! Wir freuen uns darauf, Sie auf eine unvergessliche Reise durch die tunesische Sahara mitzunehmen.\n            </p>\n            \n            <div style=\"background: #F9FAFB; border-radius: 8px; padding: 20px; margin-bottom: 25px;\">\n              <h3 style=\"color: #D97706; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">Buchungsdetails</h3>\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Aktivität:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.activityTitle}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Datum:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.bookingDate}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Gruppengröße:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.groupSize} ${data.groupSize === 1 ? 'Person' : 'Personen'}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Gesamtpreis:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-weight: bold;\">${data.totalPrice} ${data.currency}</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Erforderliche Anzahlung:</td>\n                  <td style=\"padding: 8px 0; color: #D97706; font-weight: bold;\">${data.depositAmount} ${data.currency}</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">Buchungs-ID:</td>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-family: monospace;\">${data.bookingId}</td>\n                </tr>\n              </table>\n            </div>\n            \n            ${data.paymentStatus === 'unpaid' ? `\n            <div style=\"background: #FEF3CD; border: 1px solid #F59E0B; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #D97706; margin: 0 0 10px 0; font-size: 16px;\">⚠️ Zahlung Erforderlich</h4>\n              <p style=\"color: #92400E; margin: 0; font-size: 14px;\">\n                Eine Anzahlung von ${data.depositAmount} ${data.currency} ist erforderlich, um Ihre Buchung zu sichern. Bitte kontaktieren Sie uns, um die Zahlung abzuschließen.\n              </p>\n            </div>\n            ` : ''}\n            \n            <div style=\"background: #ECFDF5; border: 1px solid #10B981; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #047857; margin: 0 0 10px 0; font-size: 16px;\">📞 Kontaktinformationen</h4>\n              <p style=\"color: #065F46; margin: 0; font-size: 14px;\">\n                E-Mail: info@sghayratours.com<br>\n                WhatsApp:+216 40 676 420<br>\n                Wir helfen Ihnen gerne bei Fragen zu Ihrem Abenteuer!\n              </p>\n            </div>\n            \n            <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n              Vielen Dank, dass Sie sich für Sghayra Tours entschieden haben. Wir freuen uns darauf, die Magie der Sahara mit Ihnen zu teilen!\n            </p>\n          </div>\n        </div>\n      `,\n    },\n    ar: {\n      subject: (data: BookingEmailData) => `تأكيد الحجز - ${data.activityTitle}`,\n      html: (data: BookingEmailData) => `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); direction: rtl; text-align: right;\">\n          <div style=\"background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%); color: white; padding: 30px; text-align: center;\">\n            <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">سغيرة تورز</h1>\n            <p style=\"margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;\">مغامرتك في الصحراء تنتظرك</p>\n          </div>\n          \n          <div style=\"padding: 30px;\">\n            <h2 style=\"color: #D97706; margin-bottom: 20px; font-size: 24px;\">تم تأكيد الحجز!</h2>\n            \n            <p style=\"color: #374151; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">\n              عزيزي/عزيزتي ${data.customerName}،<br><br>\n              شكرًا لك على الحجز مع سغيرة تورز! نحن متحمسون لاصطحابك في رحلة لا تُنسى عبر الصحراء التونسية.\n            </p>\n            \n            <div style=\"background: #F9FAFB; border-radius: 8px; padding: 20px; margin-bottom: 25px;\">\n              <h3 style=\"color: #D97706; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">تفاصيل الحجز</h3>\n              <table style=\"width: 100%; border-collapse: collapse;\">\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.activityTitle}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:النشاط</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.bookingDate}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:التاريخ</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; color: #6B7280;\">${data.groupSize} ${data.groupSize === 1 ? 'شخص' : 'أشخاص'}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:حجم المجموعة</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; color: #6B7280; font-weight: bold;\">${data.totalPrice} ${data.currency}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:السعر الإجمالي</td>\n                </tr>\n                <tr style=\"border-bottom: 1px solid #E5E7EB;\">\n                  <td style=\"padding: 8px 0; color: #D97706; font-weight: bold;\">${data.depositAmount} ${data.currency}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:العربون المطلوب</td>\n                </tr>\n                <tr>\n                  <td style=\"padding: 8px 0; color: #6B7280; font-family: monospace;\">${data.bookingId}</td>\n                  <td style=\"padding: 8px 0; font-weight: bold; color: #374151;\">:رقم الحجز</td>\n                </tr>\n              </table>\n            </div>\n            \n            ${data.paymentStatus === 'unpaid' ? `\n            <div style=\"background: #FEF3CD; border: 1px solid #F59E0B; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #D97706; margin: 0 0 10px 0; font-size: 16px;\">⚠️ مطلوب دفع</h4>\n              <p style=\"color: #92400E; margin: 0; font-size: 14px;\">\n                عربون قدره ${data.depositAmount} ${data.currency} مطلوب لضمان حجزك. يرجى الاتصال بنا لإكمال الدفع.\n              </p>\n            </div>\n            ` : ''}\n            \n            <div style=\"background: #ECFDF5; border: 1px solid #10B981; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n              <h4 style=\"color: #047857; margin: 0 0 10px 0; font-size: 16px;\">📞 معلومات الاتصال</h4>\n              <p style=\"color: #065F46; margin: 0; font-size: 14px;\">\n                البريد الإلكتروني: info@sghayratours.com<br>\n                واتساب: +216 40 676 420<br>\n                نحن هنا للمساعدة في أي أسئلة حول مغامرتك!\n              </p>\n            </div>\n            \n            <p style=\"color: #6B7280; font-size: 14px; text-align: center; margin-top: 30px;\">\n              شكرًا لاختيارك سغيرة تورز. نتطلع لمشاركة سحر الصحراء معك!\n            </p>\n          </div>\n        </div>\n      `,\n    },\n  },\n  statusUpdate: {\n    en: {\n      subject: (data: BookingEmailData) => `Booking Update - ${data.activityTitle}`,\n      html: (data: BookingEmailData) => {\n        const getStatusMessage = () => {\n          switch (data.status) {\n            case 'confirmed':\n              return 'Your booking has been confirmed! We look forward to your adventure.';\n            case 'cancelled':\n              return 'Your booking has been cancelled. If you have any questions, please contact us.';\n            case 'completed':\n              return 'Thank you for choosing Sghayra Tours! We hope you had an amazing experience.';\n            default:\n              return 'Your booking status has been updated.';\n          }\n        };\n\n        return `\n          <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\">\n            <div style=\"background: linear-gradient(135deg, #D97706 0%, #F59E0B 100%); color: white; padding: 30px; text-align: center;\">\n              <h1 style=\"margin: 0; font-size: 28px; font-weight: bold;\">Sghayra Tours</h1>\n              <p style=\"margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;\">Booking Status Update</p>\n            </div>\n            \n            <div style=\"padding: 30px;\">\n              <h2 style=\"color: #D97706; margin-bottom: 20px; font-size: 24px;\">Status Update</h2>\n              \n              <p style=\"color: #374151; font-size: 16px; line-height: 1.6; margin-bottom: 25px;\">\n                Dear ${data.customerName},<br><br>\n                ${getStatusMessage()}\n              </p>\n              \n              <div style=\"background: #F9FAFB; border-radius: 8px; padding: 20px; margin-bottom: 25px;\">\n                <h3 style=\"color: #D97706; margin-top: 0; margin-bottom: 15px; font-size: 18px;\">Booking Details</h3>\n                <p style=\"color: #6B7280; margin: 0;\"><strong>Booking ID:</strong> ${data.bookingId}</p>\n                <p style=\"color: #6B7280; margin: 5px 0;\"><strong>Activity:</strong> ${data.activityTitle}</p>\n                <p style=\"color: #6B7280; margin: 5px 0;\"><strong>Status:</strong> <span style=\"color: #D97706; font-weight: bold; text-transform: uppercase;\">${data.status}</span></p>\n              </div>\n              \n              <div style=\"background: #ECFDF5; border: 1px solid #10B981; border-radius: 8px; padding: 15px; margin-bottom: 25px;\">\n                <h4 style=\"color: #047857; margin: 0 0 10px 0; font-size: 16px;\">📞 Contact Information</h4>\n                <p style=\"color: #065F46; margin: 0; font-size: 14px;\">\n                  Email: info@sghayratours.com<br>\n                  WhatsApp:+216 40 676 420\n                </p>\n              </div>\n            </div>\n          </div>\n        `;\n      },\n    },\n    // Add other languages...\n  },\n};\n\nexport async function sendBookingConfirmationEmail(\n  bookingData: BookingEmailData,\n  language: 'en' | 'fr' | 'de' | 'ar' = 'en'\n): Promise<boolean> {\n  try {\n    const template = emailTemplates.bookingConfirmation[language];\n    \n    // Format date for display\n    const formattedDate = new Date(bookingData.bookingDate).toLocaleDateString(\n      language === 'ar' ? 'ar-TN' : language === 'fr' ? 'fr-FR' : language === 'de' ? 'de-DE' : 'en-US',\n      { \n        weekday: 'long', \n        year: 'numeric', \n        month: 'long', \n        day: 'numeric' \n      }\n    );\n\n    const emailData = { ...bookingData, bookingDate: formattedDate };\n\n    return await sendEmail({\n      to: bookingData.customerEmail,\n      from: 'noreply@sghayratours.com', // This should be your verified SendGrid sender\n      subject: template.subject(emailData),\n      html: template.html(emailData),\n    });\n  } catch (error) {\n    console.error('Error sending booking confirmation email:', error);\n    return false;\n  }\n}\n\nexport async function sendBookingStatusUpdateEmail(\n  bookingData: BookingEmailData,\n  language: 'en' | 'fr' | 'de' | 'ar' = 'en'\n): Promise<boolean> {\n  try {\n    const template = (emailTemplates.statusUpdate as any)[language] || emailTemplates.statusUpdate.en;\n\n    const formattedDate = new Date(bookingData.bookingDate).toLocaleDateString(\n      language === 'ar' ? 'ar-TN' : language === 'fr' ? 'fr-FR' : language === 'de' ? 'de-DE' : 'en-US',\n      { \n        weekday: 'long', \n        year: 'numeric', \n        month: 'long', \n        day: 'numeric' \n      }\n    );\n\n    const emailData = { ...bookingData, bookingDate: formattedDate };\n\n    return await sendEmail({\n      to: bookingData.customerEmail,\n      from: 'noreply@sghayratours.com',\n      subject: template.subject(emailData),\n      html: template.html(emailData),\n    });\n  } catch (error) {\n    console.error('Error sending status update email:', error);\n    return false;\n  }\n}","size_bytes":25515},"client/src/pages/About.tsx":{"content":"import { MapPin, Star, Users, Calendar } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MapLocationDisplay } from \"@/components/MapLocationDisplay\";\nimport { useSiteSettings } from \"@/hooks/use-site-settings\";\n\ninterface AboutProps {\n  currentLanguage: string;\n}\n\nexport default function About({ currentLanguage }: AboutProps) {\n  const { data: settings } = useSiteSettings();\n\n  // Function to get multilingual content with fallbacks\n  const getContent = (field: string, fallback: string = '') => {\n    const aboutPageContent = settings?.about_page_content;\n    if (aboutPageContent && aboutPageContent.isActive) {\n      const fieldValue = (aboutPageContent as any)[field];\n      if (fieldValue && typeof fieldValue === 'object') {\n        return fieldValue[currentLanguage] || fieldValue.en || fallback;\n      }\n    }\n\n    const companyInfo = settings?.company_info;\n    if (companyInfo && companyInfo.isActive && (field === 'name' || field === 'tagline' || field === 'about')) {\n      const fieldValue = (companyInfo as any)[field];\n      if (fieldValue && typeof fieldValue === 'object') {\n        return fieldValue[currentLanguage] || fieldValue.en || fallback;\n      }\n    }\n\n    return fallback;\n  };\n\n  const defaults = {\n    title: \"About Sghayra Tours\",\n    subtitle: \"Your Gateway to the Sahara Desert\",\n    whoWeAre: \"Who We Are\",\n    whoWeAreDesc: \"We specialize in authentic Sahara Desert experiences.\",\n    ourMission: \"Our Mission\",\n    ourMissionDesc: \"To provide unforgettable desert experiences while respecting local traditions.\",\n    whyChooseUs: \"Why Choose Sghayra Tours\",\n    experience: \"Years of Experience\",\n    experienceDesc: \"Expertise in desert tourism\",\n    localGuides: \"Local Expert Guides\",\n    localGuidesDesc: \"Native guides with deep desert knowledge\",\n    safety: \"Safety First\",\n    safetyDesc: \"All tours follow strict safety protocols\",\n    authentic: \"Authentic Experiences\",\n    authenticDesc: \"Real desert life with local communities\",\n    stats: {\n      toursCompleted: \"1,200+ Tours Completed\",\n      happyCustomers: \"3,500+ Happy Customers\",\n      countries: \"45+ Countries Served\",\n      rating: \"4.9/5 Average Rating\"\n    },\n    ourStory: \"Our Story\",\n    ourStoryDesc: \"Founded by local desert guides with a passion for sharing the magic of the Sahara.\",\n    commitment: \"Our Commitment\",\n    commitmentDesc: \"We are committed to sustainable tourism practices that benefit local communities.\"\n  };\n\n  const features = [\n    {\n      icon: Calendar,\n      title: getContent('experience', defaults.experience),\n      description: getContent('experienceDesc', defaults.experienceDesc)\n    },\n    {\n      icon: Users,\n      title: getContent('localGuides', defaults.localGuides),\n      description: getContent('localGuidesDesc', defaults.localGuidesDesc)\n    },\n    {\n      icon: Star,\n      title: getContent('safety', defaults.safety),\n      description: getContent('safetyDesc', defaults.safetyDesc)\n    },\n    {\n      icon: MapPin,\n      title: getContent('authentic', defaults.authentic),\n      description: getContent('authenticDesc', defaults.authenticDesc)\n    }\n  ];\n\n  const stats = [\n    { number: \"1,200+\", label: getContent('toursCompleted', defaults.stats.toursCompleted) },\n    { number: \"3,500+\", label: getContent('happyCustomers', defaults.stats.happyCustomers) },\n    { number: \"45+\", label: getContent('countries', defaults.stats.countries) },\n    { number: \"4.9/5\", label: getContent('rating', defaults.stats.rating) }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"bg-gradient-to-b from-primary/10 to-background py-20\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-serif font-bold text-foreground mb-4\">\n            {getContent('title', defaults.title)}\n          </h1>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n            {getContent('subtitle', defaults.subtitle)}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-16\">\n        {/* Who We Are */}\n        <div className=\"mb-20\">\n          <h2 className=\"text-3xl font-bold text-foreground mb-6 text-center\">\n            {getContent('whoWeAre', defaults.whoWeAre)}\n          </h2>\n          <p className=\"text-lg text-muted-foreground max-w-4xl mx-auto text-center leading-relaxed\">\n            {getContent('whoWeAreDesc', defaults.whoWeAreDesc)}\n          </p>\n        </div>\n\n        {/* Mission */}\n        <div className=\"mb-20\">\n          <Card className=\"max-w-4xl mx-auto\">\n            <CardHeader>\n              <CardTitle className=\"text-2xl text-center\">{getContent('ourMission', defaults.ourMission)}</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-lg text-muted-foreground text-center leading-relaxed\">\n                {getContent('ourMissionDesc', defaults.ourMissionDesc)}\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Why Choose Us */}\n        <div className=\"mb-20\">\n          <h2 className=\"text-3xl font-bold text-foreground mb-12 text-center\">\n            {getContent('whyChooseUs', defaults.whyChooseUs)}\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {features.map((feature, index) => (\n              <Card key={index} className=\"text-center hover-elevate\">\n                <CardContent className=\"pt-6\">\n                  <feature.icon className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n                    {feature.title}\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    {feature.description}\n                  </p>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n\n        {/* Stats */}\n        <div className=\"mb-20\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {stats.map((stat, index) => (\n              <div key={index} className=\"text-center\">\n                <div className=\"text-4xl font-bold text-primary mb-2\">\n                  {stat.number}\n                </div>\n                <p className=\"text-muted-foreground\">\n                  {stat.label}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Our Story */}\n        <div className=\"mb-20\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center\">\n            <div>\n              <h2 className=\"text-3xl font-bold text-foreground mb-6\">\n                {getContent('ourStory', defaults.ourStory)}\n              </h2>\n              <p className=\"text-lg text-muted-foreground leading-relaxed mb-6\">\n                {getContent('ourStoryDesc', defaults.ourStoryDesc)}\n              </p>\n              <Badge variant=\"secondary\" className=\"text-sm\">\n                Established 2015\n              </Badge>\n            </div>\n            <div className=\"rounded-lg overflow-hidden\">\n              <MapLocationDisplay\n                language={currentLanguage as 'en' | 'fr' | 'de' | 'ar'}\n                height=\"350px\"\n                className=\"shadow-lg\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Commitment */}\n        <div>\n          <Card className=\"bg-primary/5 border-primary/20\">\n            <CardContent className=\"p-8 text-center\">\n              <h2 className=\"text-2xl font-bold text-foreground mb-4\">\n                {getContent('commitment', defaults.commitment)}\n              </h2>\n              <p className=\"text-lg text-muted-foreground leading-relaxed max-w-3xl mx-auto\">\n                {getContent('commitmentDesc', defaults.commitmentDesc)}\n              </p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Location Section */}\n        <div className=\"mt-20\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-3xl sm:text-4xl font-serif font-bold text-foreground mb-4\">\n              {currentLanguage === 'en' ? 'Visit Us' :\n                currentLanguage === 'fr' ? 'Nous Rendre Visite' :\n                  currentLanguage === 'de' ? 'Besuchen Sie Uns' :\n                    'زورونا'}\n            </h2>\n            <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n              {currentLanguage === 'en' ? 'Experience authentic desert hospitality at our location' :\n                currentLanguage === 'fr' ? 'Découvrez l\\'hospitalité authentique du désert à notre emplacement' :\n                  currentLanguage === 'de' ? 'Erleben Sie authentische Wüstengastfreundschaft an unserem Standort' :\n                    'اختبروا الضيافة الصحراوية الأصيلة في موقعنا'}\n            </p>\n          </div>\n\n          <div className=\"max-w-4xl mx-auto\">\n            <MapLocationDisplay\n              language={currentLanguage as 'en' | 'fr' | 'de' | 'ar'}\n              height=\"500px\"\n              className=\"shadow-lg\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","size_bytes":9360},"client/src/pages/Activities.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Search, Filter, MapPin, Clock, Users } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Badge } from \"@/components/ui/badge\";\nimport ActivityCard from \"@/components/ActivityCard\";\nimport type { Activity } from \"@shared/schema\";\n\ninterface ActivitiesProps {\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\nexport default function Activities({ currentLanguage, currentCurrency }: ActivitiesProps) {\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState(\"all\");\n  \n  const currencySymbols = { TND: \"د.ت\", USD: \"$\", EUR: \"€\" };\n  const currencySymbol = currencySymbols[currentCurrency as keyof typeof currencySymbols];\n\n  // Fetch activities from API  \n  const { data: activities, isLoading, error } = useQuery({\n    queryKey: ['/api/activities'],\n    select: (data: Activity[]) => {\n      return data.map((activity, index) => ({\n        id: activity.id,\n        title: (activity.title as any)[currentLanguage] || (activity.title as any).en,\n        description: (activity.description as any)[currentLanguage] || (activity.description as any).en,\n        image: activity.imageUrl || \"/api/placeholder/400/300\", \n        duration: activity.duration,\n        groupSize: activity.groupSize,\n        price: (activity.prices as any)[currentCurrency] || (activity.prices as any).USD,\n        rating: 4.8 + (Math.random() * 0.2),\n        reviews: 89 + index * 25,\n        highlights: (activity.highlights as any)[currentLanguage] || (activity.highlights as any).en || [],\n        category: activity.category\n      }));\n    }\n  });\n\n\n  // Filter activities based on search and category\n  const filteredActivities = activities?.filter((activity) => {\n    const matchesSearch = activity.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         activity.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = categoryFilter === \"all\" || activity.category === categoryFilter;\n    return matchesSearch && matchesCategory;\n  }) || [];\n\n  // Get unique categories for filter\n  const categories = Array.from(new Set(activities?.map(a => a.category) || []));\n\n  const translations = {\n    en: {\n      title: \"Desert Adventures\",\n      subtitle: \"Discover authentic Sahara experiences\",\n      searchPlaceholder: \"Search activities...\",\n      filterByCategory: \"Filter by Category\",\n      allCategories: \"All Categories\",\n      noActivities: \"No activities found\",\n      noActivitiesDesc: \"Try adjusting your search or filter criteria\",\n      loading: \"Loading activities...\",\n      error: \"Failed to load activities\",\n      activitiesCount: \"activities found\",\n      adventure: \"Adventure\",\n      cultural: \"Cultural\",\n      nature: \"Nature\",\n      relaxation: \"Relaxation\"\n    },\n    fr: {\n      title: \"Aventures du Désert\",\n      subtitle: \"Découvrez des expériences authentiques du Sahara\",\n      searchPlaceholder: \"Rechercher des activités...\",\n      filterByCategory: \"Filtrer par Catégorie\",\n      allCategories: \"Toutes les Catégories\",\n      noActivities: \"Aucune activité trouvée\",\n      noActivitiesDesc: \"Essayez d'ajuster votre recherche ou vos critères de filtre\",\n      loading: \"Chargement des activités...\",\n      error: \"Échec du chargement des activités\",\n      activitiesCount: \"activités trouvées\",\n      adventure: \"Aventure\",\n      cultural: \"Culturel\",\n      nature: \"Nature\",\n      relaxation: \"Détente\"\n    },\n    de: {\n      title: \"Wüstenabenteuer\",\n      subtitle: \"Entdecken Sie authentische Sahara-Erlebnisse\",\n      searchPlaceholder: \"Aktivitäten suchen...\",\n      filterByCategory: \"Nach Kategorie filtern\",\n      allCategories: \"Alle Kategorien\",\n      noActivities: \"Keine Aktivitäten gefunden\",\n      noActivitiesDesc: \"Versuchen Sie, Ihre Such- oder Filterkriterien anzupassen\",\n      loading: \"Aktivitäten werden geladen...\",\n      error: \"Fehler beim Laden der Aktivitäten\",\n      activitiesCount: \"Aktivitäten gefunden\",\n      adventure: \"Abenteuer\",\n      cultural: \"Kulturell\",\n      nature: \"Natur\",\n      relaxation: \"Entspannung\"\n    },\n    ar: {\n      title: \"مغامرات الصحراء\",\n      subtitle: \"اكتشف تجارب الصحراء الأصيلة\",\n      searchPlaceholder: \"البحث عن الأنشطة...\",\n      filterByCategory: \"تصفية حسب الفئة\",\n      allCategories: \"جميع الفئات\",\n      noActivities: \"لم يتم العثور على أنشطة\",\n      noActivitiesDesc: \"حاول تعديل معايير البحث أو التصفية\",\n      loading: \"تحميل الأنشطة...\",\n      error: \"فشل في تحميل الأنشطة\",\n      activitiesCount: \"أنشطة موجودة\",\n      adventure: \"مغامرة\",\n      cultural: \"ثقافي\",\n      nature: \"طبيعة\",\n      relaxation: \"استرخاء\"\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n            <p className=\"text-muted-foreground\">{t.loading}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"text-center\">\n            <p className=\"text-destructive mb-4\">{t.error}</p>\n            <Button onClick={() => window.location.reload()} data-testid=\"button-retry\">\n              Try Again\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"bg-gradient-to-b from-primary/10 to-background py-16\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"text-center mb-8\">\n            <h1 className=\"text-4xl md:text-5xl font-serif font-bold text-foreground mb-4\">\n              {t.title}\n            </h1>\n            <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n              {t.subtitle}\n            </p>\n          </div>\n\n          {/* Search and Filter */}\n          <Card className=\"max-w-4xl mx-auto\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex flex-col md:flex-row gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4\" />\n                    <Input\n                      placeholder={t.searchPlaceholder}\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      className=\"pl-10\"\n                      data-testid=\"input-search-activities\"\n                    />\n                  </div>\n                </div>\n                <div className=\"md:w-64\">\n                  <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                    <SelectTrigger data-testid=\"select-category-filter\">\n                      <Filter className=\"h-4 w-4 mr-2\" />\n                      <SelectValue placeholder={t.filterByCategory} />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"all\">{t.allCategories}</SelectItem>\n                      {categories.map((category) => (\n                        <SelectItem key={category} value={category}>\n                          {t[category as keyof typeof t] || category}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Activities Grid */}\n      <div className=\"container mx-auto px-4 py-16\">\n        {/* Results Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-foreground\">\n              {filteredActivities.length} {t.activitiesCount}\n            </h2>\n            {(searchTerm || categoryFilter !== \"all\") && (\n              <div className=\"flex gap-2 mt-2\">\n                {searchTerm && (\n                  <Badge variant=\"secondary\" className=\"gap-2\">\n                    Search: \"{searchTerm}\"\n                    <button \n                      onClick={() => setSearchTerm(\"\")}\n                      className=\"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5\"\n                    >\n                      ×\n                    </button>\n                  </Badge>\n                )}\n                {categoryFilter !== \"all\" && (\n                  <Badge variant=\"secondary\" className=\"gap-2\">\n                    Category: {t[categoryFilter as keyof typeof t] || categoryFilter}\n                    <button \n                      onClick={() => setCategoryFilter(\"all\")}\n                      className=\"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5\"\n                    >\n                      ×\n                    </button>\n                  </Badge>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Activities Grid */}\n        {filteredActivities.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n            {filteredActivities.map((activity) => (\n              <ActivityCard\n                key={activity.id}\n                activity={activity}\n                currency={currentCurrency}\n                currencySymbol={currencySymbol}\n                currentLanguage={currentLanguage}\n              />\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center py-16\">\n            <div className=\"max-w-md mx-auto\">\n              <MapPin className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n                {t.noActivities}\n              </h3>\n              <p className=\"text-muted-foreground mb-4\">\n                {t.noActivitiesDesc}\n              </p>\n              <Button \n                onClick={() => {\n                  setSearchTerm(\"\");\n                  setCategoryFilter(\"all\");\n                }}\n                variant=\"outline\"\n                data-testid=\"button-clear-filters\"\n              >\n                Clear Filters\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":11109},"client/src/pages/ActivityDetail.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Clock, \n  Users, \n  MapPin, \n  Star, \n  Calendar, \n  CreditCard,\n  CheckCircle,\n  AlertCircle,\n  Phone,\n  Mail\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport type { Activity } from \"@shared/schema\";\n\ninterface ActivityDetailProps {\n  activityId: string;\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\n// Form validation schema\nconst bookingSchema = z.object({\n  customerName: z.string().min(2, \"Name must be at least 2 characters\"),\n  customerEmail: z.string().email(\"Please enter a valid email address\"),\n  customerPhone: z.string().optional(),\n  bookingDate: z.string().min(1, \"Please select a booking date\"),\n  groupSize: z.coerce.number().min(1, \"Group size must be at least 1\").max(20, \"Group size cannot exceed 20\"),\n  specialRequests: z.string().optional(),\n});\n\ntype BookingFormData = z.infer<typeof bookingSchema>;\n\nexport default function ActivityDetail({ activityId, currentLanguage, currentCurrency }: ActivityDetailProps) {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [showBookingForm, setShowBookingForm] = useState(false);\n  const [bookingSuccess, setBookingSuccess] = useState(false);\n\n  const currencySymbols = { TND: \"د.ت\", USD: \"$\", EUR: \"€\" };\n  const currencySymbol = currencySymbols[currentCurrency as keyof typeof currencySymbols];\n\n  // Form setup\n  const form = useForm<BookingFormData>({\n    resolver: zodResolver(bookingSchema),\n    defaultValues: {\n      customerName: \"\",\n      customerEmail: \"\",\n      customerPhone: \"\",\n      bookingDate: \"\",\n      groupSize: 2,\n      specialRequests: \"\",\n    },\n  });\n\n  // Fetch activity details\n  const { data: activity, isLoading, error } = useQuery({\n    queryKey: ['/api/activities', activityId],\n    queryFn: async () => {\n      const response = await fetch(`/api/activities/${activityId}`);\n      if (!response.ok) throw new Error('Failed to fetch activity');\n      return await response.json() as Activity;\n    },\n    enabled: !!activityId,\n  });\n\n  // Fetch gallery items for this activity\n  const { data: galleryItems = [] } = useQuery({\n    queryKey: ['/api/gallery'],\n    select: (data: any[]) => {\n      return data.filter(item => \n        item.category === activity?.category || \n        item.category === 'general'\n      ).slice(0, 6); // Show max 6 gallery images\n    },\n    enabled: !!activity,\n  });\n\n  // Booking mutation\n  const bookingMutation = useMutation({\n    mutationFn: async (bookingData: BookingFormData) => {\n      const response = await fetch('/api/bookings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...bookingData,\n          activityId,\n          currency: currentCurrency,\n          language: currentLanguage,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create booking');\n      }\n      \n      return await response.json();\n    },\n    onSuccess: (data) => {\n      setBookingSuccess(true);\n      setShowBookingForm(false);\n      form.reset();\n      \n      toast({\n        title: \"Booking Confirmed!\",\n        description: `Your booking has been created. Booking ID: ${data.id}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Booking Failed\",\n        description: error.message || \"Failed to create booking. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (data: BookingFormData) => {\n    bookingMutation.mutate(data);\n  };\n\n  const getLocalizedText = (textObj: any, fallback = \"\") => {\n    if (!textObj) return fallback;\n    return textObj[currentLanguage as keyof typeof textObj] || textObj.en || fallback;\n  };\n\n  const getMinBookingDate = () => {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return tomorrow.toISOString().split('T')[0];\n  };\n\n  // Translations\n  const translations = {\n    en: {\n      duration: \"Duration\",\n      groupSize: \"Group Size\",\n      capacity: \"Max Capacity\",\n      price: \"Price\",\n      perPerson: \"per person\",\n      bookNow: \"Book Now\",\n      highlights: \"Highlights\",\n      description: \"Description\",\n      gallery: \"Gallery\",\n      bookingForm: \"Book This Experience\",\n      customerName: \"Full Name\",\n      customerEmail: \"Email Address\",\n      customerPhone: \"Phone Number (Optional)\",\n      bookingDate: \"Preferred Date\",\n      specialRequests: \"Special Requests (Optional)\",\n      submitBooking: \"Confirm Booking\",\n      cancel: \"Cancel\",\n      backToActivities: \"Back to Activities\",\n      bookingSuccess: \"Booking Confirmed!\",\n      bookingSuccessMessage: \"Thank you for your booking! You will receive a confirmation email shortly.\",\n      contactInfo: \"Contact Information\",\n      notFound: \"Activity not found\",\n      loadingError: \"Failed to load activity details\",\n    },\n    fr: {\n      duration: \"Durée\",\n      groupSize: \"Taille du Groupe\",\n      capacity: \"Capacité Max\",\n      price: \"Prix\",\n      perPerson: \"par personne\",\n      bookNow: \"Réserver\",\n      highlights: \"Points Forts\",\n      description: \"Description\",\n      gallery: \"Galerie\",\n      bookingForm: \"Réserver cette Expérience\",\n      customerName: \"Nom Complet\",\n      customerEmail: \"Adresse Email\",\n      customerPhone: \"Numéro de Téléphone (Optionnel)\",\n      bookingDate: \"Date Préférée\",\n      specialRequests: \"Demandes Spéciales (Optionnel)\",\n      submitBooking: \"Confirmer la Réservation\",\n      cancel: \"Annuler\",\n      backToActivities: \"Retour aux Activités\",\n      bookingSuccess: \"Réservation Confirmée!\",\n      bookingSuccessMessage: \"Merci pour votre réservation! Vous recevrez un email de confirmation sous peu.\",\n      contactInfo: \"Informations de Contact\",\n      notFound: \"Activité non trouvée\",\n      loadingError: \"Échec du chargement des détails de l'activité\",\n    },\n    de: {\n      duration: \"Dauer\",\n      groupSize: \"Gruppengröße\",\n      capacity: \"Max. Kapazität\",\n      price: \"Preis\",\n      perPerson: \"pro Person\",\n      bookNow: \"Jetzt Buchen\",\n      highlights: \"Highlights\",\n      description: \"Beschreibung\",\n      gallery: \"Galerie\",\n      bookingForm: \"Diese Erfahrung Buchen\",\n      customerName: \"Vollständiger Name\",\n      customerEmail: \"E-Mail-Adresse\",\n      customerPhone: \"Telefonnummer (Optional)\",\n      bookingDate: \"Bevorzugtes Datum\",\n      specialRequests: \"Spezielle Wünsche (Optional)\",\n      submitBooking: \"Buchung Bestätigen\",\n      cancel: \"Stornieren\",\n      backToActivities: \"Zurück zu Aktivitäten\",\n      bookingSuccess: \"Buchung Bestätigt!\",\n      bookingSuccessMessage: \"Vielen Dank für Ihre Buchung! Sie erhalten in Kürze eine Bestätigungs-E-Mail.\",\n      contactInfo: \"Kontaktinformationen\",\n      notFound: \"Aktivität nicht gefunden\",\n      loadingError: \"Fehler beim Laden der Aktivitätsdetails\",\n    },\n    ar: {\n      duration: \"المدة\",\n      groupSize: \"حجم المجموعة\",\n      capacity: \"السعة القصوى\",\n      price: \"السعر\",\n      perPerson: \"للشخص الواحد\",\n      bookNow: \"احجز الآن\",\n      highlights: \"المميزات\",\n      description: \"الوصف\",\n      gallery: \"المعرض\",\n      bookingForm: \"احجز هذه التجربة\",\n      customerName: \"الاسم الكامل\",\n      customerEmail: \"عنوان البريد الإلكتروني\",\n      customerPhone: \"رقم الهاتف (اختياري)\",\n      bookingDate: \"التاريخ المفضل\",\n      specialRequests: \"طلبات خاصة (اختياري)\",\n      submitBooking: \"تأكيد الحجز\",\n      cancel: \"إلغاء\",\n      backToActivities: \"العودة إلى الأنشطة\",\n      bookingSuccess: \"تم تأكيد الحجز!\",\n      bookingSuccessMessage: \"شكرًا لك على حجزك! ستتلقى رسالة تأكيد عبر البريد الإلكتروني قريبًا.\",\n      contactInfo: \"معلومات الاتصال\",\n      notFound: \"النشاط غير موجود\",\n      loadingError: \"فشل في تحميل تفاصيل النشاط\",\n    },\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"text-muted-foreground\">Loading activity details...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error || !activity) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-4\">\n          <AlertCircle className=\"h-12 w-12 text-destructive mx-auto\" />\n          <h2 className=\"text-2xl font-bold\">{t.notFound}</h2>\n          <p className=\"text-muted-foreground\">{t.loadingError}</p>\n          <Button onClick={() => setLocation(\"/\")}>\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            {t.backToActivities}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  const title = getLocalizedText(activity.title);\n  const description = getLocalizedText(activity.description);\n  const highlights = getLocalizedText(activity.highlights) || [];\n  const price = (activity.prices as any)[currentCurrency] || (activity.prices as any).USD;\n\n  if (bookingSuccess) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center space-y-6 max-w-md mx-auto p-8\">\n          <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto\" />\n          <h2 className=\"text-2xl font-bold text-green-600\">{t.bookingSuccess}</h2>\n          <p className=\"text-muted-foreground\">{t.bookingSuccessMessage}</p>\n          <div className=\"space-y-2\">\n            <Button onClick={() => setLocation(\"/\")} className=\"w-full\">\n              {t.backToActivities}\n            </Button>\n            <Button \n              variant=\"outline\" \n              onClick={() => setBookingSuccess(false)} \n              className=\"w-full\"\n            >\n              View Activity Details\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <div className=\"border-b bg-card\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <Button \n            variant=\"ghost\" \n            onClick={() => setLocation(\"/\")}\n            className=\"mb-4\"\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            {t.backToActivities}\n          </Button>\n          \n          <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">{title}</h1>\n              <div className=\"flex items-center gap-4 mt-2 text-muted-foreground\">\n                <div className=\"flex items-center gap-1\">\n                  <MapPin className=\"h-4 w-4\" />\n                  <span>Douz, Tunisia</span>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <Star className=\"h-4 w-4 fill-yellow-400 text-yellow-400\" />\n                  <span>4.9 (120+ reviews)</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"text-right\">\n              <div className=\"text-3xl font-bold text-primary\">\n                {currencySymbol}{price}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">{t.perPerson}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-8\">\n            {/* Hero Image */}\n            <div className=\"aspect-video bg-muted rounded-lg overflow-hidden\">\n              <img \n                src={activity.imageUrl || \"/api/placeholder/800/400\"} \n                alt={title}\n                className=\"w-full h-full object-cover\"\n              />\n            </div>\n\n            {/* Description */}\n            <Card>\n              <CardHeader>\n                <CardTitle>{t.description}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <p className=\"text-muted-foreground leading-relaxed\">{description}</p>\n              </CardContent>\n            </Card>\n\n            {/* Highlights */}\n            {highlights.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>{t.highlights}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <ul className=\"space-y-2\">\n                    {highlights.map((highlight: string, index: number) => (\n                      <li key={index} className=\"flex items-start gap-2\">\n                        <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0\" />\n                        <span>{highlight}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Gallery */}\n            {galleryItems.length > 0 && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>{t.gallery}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                    {galleryItems.map((item: any) => (\n                      <div key={item.id} className=\"aspect-square bg-muted rounded-lg overflow-hidden\">\n                        <img \n                          src={item.url} \n                          alt={getLocalizedText(item.title)}\n                          className=\"w-full h-full object-cover hover:scale-105 transition-transform cursor-pointer\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Activity Info */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Activity Details</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center gap-3\">\n                  <Clock className=\"h-5 w-5 text-muted-foreground\" />\n                  <div>\n                    <div className=\"font-medium\">{t.duration}</div>\n                    <div className=\"text-sm text-muted-foreground\">{activity.duration}</div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Users className=\"h-5 w-5 text-muted-foreground\" />\n                  <div>\n                    <div className=\"font-medium\">{t.groupSize}</div>\n                    <div className=\"text-sm text-muted-foreground\">{activity.groupSize}</div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Badge variant=\"outline\">{t.capacity}: {activity.capacity}</Badge>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Booking Card */}\n            {!showBookingForm ? (\n              <Card>\n                <CardContent className=\"p-6\">\n                  <Button \n                    onClick={() => setShowBookingForm(true)} \n                    className=\"w-full\"\n                    size=\"lg\"\n                    data-testid=\"button-book-now\"\n                  >\n                    <Calendar className=\"h-4 w-4 mr-2\" />\n                    {t.bookNow}\n                  </Button>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card>\n                <CardHeader>\n                  <CardTitle>{t.bookingForm}</CardTitle>\n                  <CardDescription>\n                    {currencySymbol}{price} {t.perPerson}\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                    <div>\n                      <Label htmlFor=\"customerName\">{t.customerName}</Label>\n                      <Input\n                        id=\"customerName\"\n                        {...form.register(\"customerName\")}\n                        data-testid=\"input-customer-name\"\n                      />\n                      {form.formState.errors.customerName && (\n                        <p className=\"text-sm text-destructive mt-1\">\n                          {form.formState.errors.customerName.message}\n                        </p>\n                      )}\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"customerEmail\">{t.customerEmail}</Label>\n                      <Input\n                        id=\"customerEmail\"\n                        type=\"email\"\n                        {...form.register(\"customerEmail\")}\n                        data-testid=\"input-customer-email\"\n                      />\n                      {form.formState.errors.customerEmail && (\n                        <p className=\"text-sm text-destructive mt-1\">\n                          {form.formState.errors.customerEmail.message}\n                        </p>\n                      )}\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"customerPhone\">{t.customerPhone}</Label>\n                      <Input\n                        id=\"customerPhone\"\n                        type=\"tel\"\n                        {...form.register(\"customerPhone\")}\n                        data-testid=\"input-customer-phone\"\n                      />\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"bookingDate\">{t.bookingDate}</Label>\n                      <Input\n                        id=\"bookingDate\"\n                        type=\"date\"\n                        min={getMinBookingDate()}\n                        {...form.register(\"bookingDate\")}\n                        data-testid=\"input-booking-date\"\n                      />\n                      {form.formState.errors.bookingDate && (\n                        <p className=\"text-sm text-destructive mt-1\">\n                          {form.formState.errors.bookingDate.message}\n                        </p>\n                      )}\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"groupSize\">{t.groupSize}</Label>\n                      <Select \n                        value={form.watch(\"groupSize\").toString()} \n                        onValueChange={(value) => form.setValue(\"groupSize\", parseInt(value))}\n                      >\n                        <SelectTrigger data-testid=\"select-group-size\">\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {Array.from({ length: Math.min(activity.capacity, 20) }, (_, i) => i + 1).map((num) => (\n                            <SelectItem key={num} value={num.toString()}>\n                              {num} {num === 1 ? 'person' : 'people'}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      {form.formState.errors.groupSize && (\n                        <p className=\"text-sm text-destructive mt-1\">\n                          {form.formState.errors.groupSize.message}\n                        </p>\n                      )}\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"specialRequests\">{t.specialRequests}</Label>\n                      <Textarea\n                        id=\"specialRequests\"\n                        {...form.register(\"specialRequests\")}\n                        rows={3}\n                        data-testid=\"textarea-special-requests\"\n                      />\n                    </div>\n\n                    <div className=\"flex gap-2 pt-4\">\n                      <Button \n                        type=\"button\" \n                        variant=\"outline\" \n                        onClick={() => setShowBookingForm(false)}\n                        className=\"flex-1\"\n                      >\n                        {t.cancel}\n                      </Button>\n                      <Button \n                        type=\"submit\" \n                        disabled={bookingMutation.isPending}\n                        className=\"flex-1\"\n                        data-testid=\"button-submit-booking\"\n                      >\n                        {bookingMutation.isPending ? \n                          \"Booking...\" : \n                          `${t.submitBooking} (${currencySymbol}${(price * form.watch(\"groupSize\")).toFixed(2)})`\n                        }\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Contact Info */}\n            <Card>\n              <CardHeader>\n                <CardTitle>{t.contactInfo}</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"flex items-center gap-3\">\n                  <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">+216 XX XXX XXX</span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">info@sghayratours.com</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":22907},"client/src/pages/Contact.tsx":{"content":"import { useState } from \"react\";\nimport { Phone, Mail, MapPin, Clock, Send } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { LocationDisplay } from \"@/components/LocationDisplay\";\nimport { useSiteSettings } from \"@/hooks/use-site-settings\";\n\ninterface ContactProps {\n  currentLanguage: string;\n}\n\nexport default function Contact({ currentLanguage }: ContactProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const { toast } = useToast();\n  const { data: settings } = useSiteSettings();\n  \n  // Type assertion to help TypeScript understand the data structure\n  const siteSettings = settings as any;\n  \n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n    subject: \"\",\n    message: \"\"\n  });\n\n  const translations = {\n    en: {\n      title: \"Contact Sghayra Tours\",\n      subtitle: \"Get in touch with our team for your desert adventure\",\n      getInTouch: \"Get in Touch\",\n      contactInfo: \"Contact Information\",\n      phone: \"Phone\",\n      email: \"Email\",\n      address: \"Address\",\n      hours: \"Business Hours\",\n      form: {\n        name: \"Full Name\",\n        namePlaceholder: \"Enter your full name\",\n        email: \"Email Address\",\n        emailPlaceholder: \"Enter your email address\",\n        phone: \"Phone Number\",\n        phonePlaceholder: \"Enter your phone number\",\n        subject: \"Subject\",\n        subjectPlaceholder: \"What can we help you with?\",\n        message: \"Message\",\n        messagePlaceholder: \"Tell us about your dream desert experience...\",\n        submit: \"Send Message\",\n        submitting: \"Sending...\"\n      },\n      contactMethods: [\n        {\n          icon: Phone,\n          title: \"Call Us\",\n          value: siteSettings?.contact_details?.phone || \"+216 12 345 678\",\n          description: \"Mon-Fri 9AM-6PM GMT+1\"\n        },\n        {\n          icon: Mail,\n          title: \"Email Us\",\n          value: siteSettings?.contact_details?.email || \"info@sghayratours.com\",\n          description: \"We'll respond within 24 hours\"\n        },\n        {\n          icon: Clock,\n          title: \"Business Hours\",\n          value: \"9:00 AM - 6:00 PM\",\n          description: \"Monday to Friday (GMT+1)\"\n        }\n      ],\n      successMessage: \"Message sent successfully! We'll get back to you soon.\",\n      errorMessage: \"Failed to send message. Please try again.\"\n    },\n    fr: {\n      title: \"Contacter Sghayra Tours\",\n      subtitle: \"Contactez notre équipe pour votre aventure dans le désert\",\n      getInTouch: \"Nous Contacter\",\n      contactInfo: \"Informations de Contact\",\n      phone: \"Téléphone\",\n      email: \"Email\",\n      address: \"Adresse\",\n      hours: \"Heures d'Ouverture\",\n      form: {\n        name: \"Nom Complet\",\n        namePlaceholder: \"Entrez votre nom complet\",\n        email: \"Adresse Email\",\n        emailPlaceholder: \"Entrez votre adresse email\",\n        phone: \"Numéro de Téléphone\",\n        phonePlaceholder: \"Entrez votre numéro de téléphone\",\n        subject: \"Sujet\",\n        subjectPlaceholder: \"Comment pouvons-nous vous aider?\",\n        message: \"Message\",\n        messagePlaceholder: \"Parlez-nous de votre expérience de rêve dans le désert...\",\n        submit: \"Envoyer le Message\",\n        submitting: \"Envoi...\"\n      },\n      contactMethods: [\n        {\n          icon: Phone,\n          title: \"Appelez-Nous\",\n          value: siteSettings?.contact_details?.phone || \"+216 12 345 678\",\n          description: \"Lun-Ven 9h-18h GMT+1\"\n        },\n        {\n          icon: Mail,\n          title: \"Envoyez-Nous un Email\",\n          value: siteSettings?.contact_details?.email || \"info@sghayratours.com\",\n          description: \"Nous répondrons dans les 24 heures\"\n        },\n        {\n          icon: Clock,\n          title: \"Heures d'Ouverture\",\n          value: \"9h00 - 18h00\",\n          description: \"Lundi au Vendredi (GMT+1)\"\n        }\n      ],\n      successMessage: \"Message envoyé avec succès! Nous vous répondrons bientôt.\",\n      errorMessage: \"Échec de l'envoi du message. Veuillez réessayer.\"\n    },\n    de: {\n      title: \"Sghayra Tours Kontaktieren\",\n      subtitle: \"Kontaktieren Sie unser Team für Ihr Wüstenabenteuer\",\n      getInTouch: \"Kontakt Aufnehmen\",\n      contactInfo: \"Kontaktinformationen\",\n      phone: \"Telefon\",\n      email: \"E-Mail\",\n      address: \"Adresse\",\n      hours: \"Geschäftszeiten\",\n      form: {\n        name: \"Vollständiger Name\",\n        namePlaceholder: \"Geben Sie Ihren vollständigen Namen ein\",\n        email: \"E-Mail-Adresse\",\n        emailPlaceholder: \"Geben Sie Ihre E-Mail-Adresse ein\",\n        phone: \"Telefonnummer\",\n        phonePlaceholder: \"Geben Sie Ihre Telefonnummer ein\",\n        subject: \"Betreff\",\n        subjectPlaceholder: \"Womit können wir Ihnen helfen?\",\n        message: \"Nachricht\",\n        messagePlaceholder: \"Erzählen Sie uns von Ihrem Traum-Wüstenerlebnis...\",\n        submit: \"Nachricht Senden\",\n        submitting: \"Senden...\"\n      },\n      contactMethods: [\n        {\n          icon: Phone,\n          title: \"Rufen Sie Uns An\",\n          value: siteSettings?.contact_details?.phone || \"+216 12 345 678\",\n          description: \"Mo-Fr 9-18 Uhr GMT+1\"\n        },\n        {\n          icon: Mail,\n          title: \"E-Mail Senden\",\n          value: siteSettings?.contact_details?.email || \"info@sghayratours.com\",\n          description: \"Wir antworten innerhalb von 24 Stunden\"\n        },\n        {\n          icon: Clock,\n          title: \"Geschäftszeiten\",\n          value: \"9:00 - 18:00 Uhr\",\n          description: \"Montag bis Freitag (GMT+1)\"\n        }\n      ],\n      successMessage: \"Nachricht erfolgreich gesendet! Wir melden uns bald bei Ihnen.\",\n      errorMessage: \"Nachricht konnte nicht gesendet werden. Bitte versuchen Sie es erneut.\"\n    },\n    ar: {\n      title: \"اتصل بسغايرة تورز\",\n      subtitle: \"تواصل مع فريقنا لمغامرتك في الصحراء\",\n      getInTouch: \"تواصل معنا\",\n      contactInfo: \"معلومات الاتصال\",\n      phone: \"الهاتف\",\n      email: \"البريد الإلكتروني\",\n      address: \"العنوان\",\n      hours: \"ساعات العمل\",\n      form: {\n        name: \"الاسم الكامل\",\n        namePlaceholder: \"أدخل اسمك الكامل\",\n        email: \"عنوان البريد الإلكتروني\",\n        emailPlaceholder: \"أدخل عنوان بريدك الإلكتروني\",\n        phone: \"رقم الهاتف\",\n        phonePlaceholder: \"أدخل رقم هاتفك\",\n        subject: \"الموضوع\",\n        subjectPlaceholder: \"كيف يمكننا مساعدتك؟\",\n        message: \"الرسالة\",\n        messagePlaceholder: \"أخبرنا عن تجربة أحلامك في الصحراء...\",\n        submit: \"إرسال الرسالة\",\n        submitting: \"جاري الإرسال...\"\n      },\n      contactMethods: [\n        {\n          icon: Phone,\n          title: \"اتصل بنا\",\n          value: siteSettings?.contact_details?.phone || \"+216 12 345 678\",\n          description: \"الإثنين-الجمعة 9ص-6م GMT+1\"\n        },\n        {\n          icon: Mail,\n          title: \"راسلنا\",\n          value: siteSettings?.contact_details?.email || \"info@sghayratours.com\",\n          description: \"سنرد خلال 24 ساعة\"\n        },\n        {\n          icon: Clock,\n          title: \"ساعات العمل\",\n          value: \"9:00 ص - 6:00 م\",\n          description: \"الإثنين إلى الجمعة (GMT+1)\"\n        }\n      ],\n      successMessage: \"تم إرسال الرسالة بنجاح! سنتواصل معك قريباً.\",\n      errorMessage: \"فشل في إرسال الرسالة. يرجى المحاولة مرة أخرى.\"\n    }\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n\n    try {\n      // Simulate form submission\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      toast({\n        title: \"Success!\",\n        description: t.successMessage,\n      });\n      \n      // Reset form\n      setFormData({\n        name: \"\",\n        email: \"\",\n        phone: \"\",\n        subject: \"\",\n        message: \"\"\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: t.errorMessage,\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"bg-gradient-to-b from-primary/10 to-background py-20\">\n        <div className=\"container mx-auto px-4 text-center\">\n          <h1 className=\"text-4xl md:text-5xl font-serif font-bold text-foreground mb-4\">\n            {t.title}\n          </h1>\n          <p className=\"text-xl text-muted-foreground max-w-2xl mx-auto\">\n            {t.subtitle}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-16\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16\">\n          {/* Contact Information */}\n          <div>\n            <h2 className=\"text-3xl font-bold text-foreground mb-8\">\n              {t.contactInfo}\n            </h2>\n            \n            <div className=\"space-y-6\">\n              {t.contactMethods.map((method, index) => (\n                <Card key={index} className=\"hover-elevate\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-start space-x-4\">\n                      <div className=\"bg-primary/10 p-3 rounded-lg\">\n                        <method.icon className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-foreground mb-1\">\n                          {method.title}\n                        </h3>\n                        <p className=\"text-lg text-foreground font-medium\">\n                          {method.value}\n                        </p>\n                        <p className=\"text-muted-foreground\">\n                          {method.description}\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n              \n              {/* Location Display */}\n              {siteSettings?.location_info && siteSettings.location_info.isActive && siteSettings.location_info.displayOnContact && (\n                <LocationDisplay\n                  locationInfo={siteSettings.location_info}\n                  language={currentLanguage as 'en' | 'fr' | 'de' | 'ar'}\n                  variant=\"full\"\n                  className=\"mt-6\"\n                />\n              )}\n            </div>\n          </div>\n\n          {/* Contact Form */}\n          <div>\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-2xl\">{t.getInTouch}</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-foreground mb-2 block\">\n                        {t.form.name}\n                      </label>\n                      <Input\n                        value={formData.name}\n                        onChange={(e) => handleInputChange(\"name\", e.target.value)}\n                        placeholder={t.form.namePlaceholder}\n                        required\n                        data-testid=\"input-contact-name\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-foreground mb-2 block\">\n                        {t.form.email}\n                      </label>\n                      <Input\n                        type=\"email\"\n                        value={formData.email}\n                        onChange={(e) => handleInputChange(\"email\", e.target.value)}\n                        placeholder={t.form.emailPlaceholder}\n                        required\n                        data-testid=\"input-contact-email\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"text-sm font-medium text-foreground mb-2 block\">\n                        {t.form.phone}\n                      </label>\n                      <Input\n                        type=\"tel\"\n                        value={formData.phone}\n                        onChange={(e) => handleInputChange(\"phone\", e.target.value)}\n                        placeholder={t.form.phonePlaceholder}\n                        data-testid=\"input-contact-phone\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"text-sm font-medium text-foreground mb-2 block\">\n                        {t.form.subject}\n                      </label>\n                      <Input\n                        value={formData.subject}\n                        onChange={(e) => handleInputChange(\"subject\", e.target.value)}\n                        placeholder={t.form.subjectPlaceholder}\n                        required\n                        data-testid=\"input-contact-subject\"\n                      />\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"text-sm font-medium text-foreground mb-2 block\">\n                      {t.form.message}\n                    </label>\n                    <Textarea\n                      value={formData.message}\n                      onChange={(e) => handleInputChange(\"message\", e.target.value)}\n                      placeholder={t.form.messagePlaceholder}\n                      rows={6}\n                      required\n                      data-testid=\"textarea-contact-message\"\n                    />\n                  </div>\n\n                  <Button \n                    type=\"submit\" \n                    className=\"w-full\" \n                    disabled={isSubmitting}\n                    data-testid=\"button-contact-submit\"\n                  >\n                    {isSubmitting ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        {t.form.submitting}\n                      </>\n                    ) : (\n                      <>\n                        <Send className=\"h-4 w-4 mr-2\" />\n                        {t.form.submit}\n                      </>\n                    )}\n                  </Button>\n                </form>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":15353},"replit.md":{"content":"# Sghayra Tours - Multilingual Tourism Website\n\n## Recent Changes\n\n### December 2024 - File Upload System Implementation\n- **Comprehensive Admin File Upload**: Added complete file upload functionality to admin dashboard\n- **Media Management Tab**: New dedicated tab with three upload sections (photos, videos, documents)\n- **Enhanced Logo Upload**: Company Info tab now includes direct file upload for logos\n- **File Type Restrictions**: Enforced file type validation for different upload categories\n- **Multi-File Support**: Proper handling of multiple file uploads with progress tracking\n- **Security & Performance**: Memory leak prevention, proper cleanup, and secure upload flows\n\n## Overview\n\nSghayra Tours is a comprehensive multilingual tourism platform specializing in authentic Sahara desert experiences. The application provides a booking system for various desert activities including camel trekking, traditional dining, and cultural activities, with support for multiple languages (English, French, German, Arabic) and currencies (TND, USD, EUR). The platform features a public-facing website for customers and a secure admin dashboard for content and booking management.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript, using Vite as the build tool\n- **Routing**: Wouter for lightweight client-side routing\n- **UI Framework**: shadcn/ui components built on Radix UI primitives with Tailwind CSS\n- **State Management**: TanStack Query (React Query) for server state and caching\n- **Styling**: Tailwind CSS with custom desert-inspired design system featuring warm sand/ochre colors\n- **Internationalization**: Multilingual support for 4 languages with RTL support for Arabic\n- **Forms**: React Hook Form with Zod validation for type-safe form handling\n\n### Backend Architecture\n- **Runtime**: Node.js with Express.js RESTful API\n- **Database**: PostgreSQL with Drizzle ORM for type-safe database operations\n- **Authentication**: JWT-based authentication with httpOnly cookies for admin users\n- **File Structure**: Shared schema definitions between frontend and backend using TypeScript\n\n### Database Design\n- **Schema**: Defined in shared/schema.ts using Drizzle ORM\n- **Tables**: Users, AdminUsers, Activities, Bookings, GalleryItems, Availability\n- **Features**: Multilingual content storage using JSONB fields, price management across multiple currencies\n- **Migrations**: Managed through Drizzle Kit with PostgreSQL as the target database\n\n### Authentication & Authorization\n- **Admin Authentication**: JWT tokens stored in httpOnly cookies for security\n- **Password Security**: bcryptjs for password hashing with salt rounds\n- **Route Protection**: Middleware-based authentication for admin endpoints\n- **Default Admin**: Automatic creation of default admin user on first startup\n\n### API Design\n- **RESTful Architecture**: Conventional REST endpoints for all resources\n- **Error Handling**: Standardized error responses with proper HTTP status codes\n- **Validation**: Zod schemas for request/response validation\n- **CORS**: Configured for cross-origin requests with credentials support\n\n### Design System\n- **Color Palette**: Desert-inspired theme with sand, ochre, and blue night colors\n- **Typography**: Inter for body text, Playfair Display for headings\n- **Components**: Consistent spacing using Tailwind's 4-unit system\n- **Responsive**: Mobile-first design with adaptive layouts\n- **Dark Mode**: Full dark mode support with CSS custom properties\n\n## External Dependencies\n\n### Database Services\n- **Neon Database**: PostgreSQL hosting service via @neondatabase/serverless\n- **Connection Pooling**: WebSocket-based connections for optimal performance\n\n### Payment Processing\n- **Stripe**: Primary payment processor with React Stripe.js integration\n- **PayPal**: Secondary payment option via PayPal Server SDK\n- **Payment Features**: 10% deposit system, multi-currency support, webhook handling\n\n### Email Services\n- **SendGrid**: Email delivery service for booking confirmations and notifications\n- **Email Templates**: Multilingual email support for customer communications\n\n### File Storage & Media\n- **Asset Management**: Local file storage with planned cloud storage integration\n- **Image Handling**: Support for gallery images and activity photos\n- **Upload System**: Multer-based file upload capabilities (planned)\n\n### Development & Build Tools\n- **Vite**: Fast development server and build tool with React plugin\n- **TypeScript**: Full TypeScript support across frontend and backend\n- **ESBuild**: Production bundling for server-side code\n- **Tailwind CSS**: Utility-first CSS framework with PostCSS\n\n### Monitoring & Development\n- **Replit Integration**: Development environment plugins and runtime error handling\n- **Query Devtools**: TanStack Query development tools for debugging\n- **Type Safety**: End-to-end TypeScript with shared schemas\n\n### UI Component Libraries\n- **Radix UI**: Accessible component primitives for complex UI elements\n- **Lucide React**: Consistent icon system\n- **React Hook Form**: Performant form management with validation\n- **Class Variance Authority**: Type-safe component variant management","size_bytes":5279},"client/src/pages/AdminSettings.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { companyInfoSchema, contactInfoSchema, socialMediaSchema, bookingInfoSchema, locationInfoSchema, aboutPageContentSchema } from \"@shared/schema\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport { Upload, Image, Video, FileText, MapPin } from \"lucide-react\";\nimport type { UploadResult } from \"@uppy/core\";\n\n// Form schemas derived from shared schemas to ensure consistency\nconst companyFormSchema = companyInfoSchema.extend({\n  isActive: z.boolean().default(true)\n}).partial({ tagline: true }); // Make tagline optional to match server\n\nconst contactFormSchema = contactInfoSchema.extend({\n  isActive: z.boolean().default(true)\n});\n\nconst socialFormSchema = socialMediaSchema.extend({\n  isActive: z.boolean().default(true)\n});\n\nconst bookingFormSchema = bookingInfoSchema.extend({\n  isActive: z.boolean().default(true)\n});\n\nconst locationFormSchema = locationInfoSchema.extend({\n  isActive: z.boolean().default(true)\n});\n\nconst aboutPageFormSchema = aboutPageContentSchema.extend({\n  isActive: z.boolean().default(true)\n});\n\ntype CompanyFormData = z.infer<typeof companyFormSchema>;\ntype ContactFormData = z.infer<typeof contactFormSchema>;\ntype SocialFormData = z.infer<typeof socialFormSchema>;\ntype BookingFormData = z.infer<typeof bookingFormSchema>;\ntype LocationFormData = z.infer<typeof locationFormSchema>;\ntype AboutPageFormData = z.infer<typeof aboutPageFormSchema>;\n\nexport default function AdminSettings() {\n  const { toast } = useToast();\n  const [activeTab, setActiveTab] = useState(\"company\");\n  const [uploadedFiles, setUploadedFiles] = useState<string[]>([]);\n\n  // Upload helper functions\n  const handleGetUploadParameters = async () => {\n    const response = await fetch('/api/admin/objects/upload', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'include',\n    });\n    \n    if (!response.ok) {\n      throw new Error('Failed to get upload URL');\n    }\n    \n    const data = await response.json();\n    return {\n      method: 'PUT' as const,\n      url: data.uploadURL,\n    };\n  };\n\n  const handleUploadComplete = async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n    try {\n      if (result.successful && result.successful.length > 0) {\n        const objectPaths: string[] = [];\n        \n        // Process all successfully uploaded files\n        for (const uploadedFile of result.successful) {\n          const fileURL = uploadedFile.uploadURL;\n          \n          // Set ACL policy for the uploaded file\n          const response = await fetch('/api/admin/objects', {\n            method: 'PUT',\n            headers: { 'Content-Type': 'application/json' },\n            credentials: 'include',\n            body: JSON.stringify({\n              fileURL: fileURL,\n              visibility: 'public',\n              fileType: uploadedFile.type || 'file'\n            }),\n          });\n\n          if (!response.ok) {\n            throw new Error(`Failed to process uploaded file: ${uploadedFile.name}`);\n          }\n\n          const data = await response.json();\n          const objectPath = data.objectPath;\n          objectPaths.push(objectPath);\n        }\n        \n        setUploadedFiles(prev => [...prev, ...objectPaths]);\n        \n        toast({\n          title: \"Upload Successful\",\n          description: `${result.successful.length} file(s) uploaded successfully`,\n        });\n\n        return objectPaths;\n      }\n    } catch (error) {\n      console.error('Error processing upload:', error);\n      toast({\n        title: \"Upload Error\",\n        description: \"Failed to process uploaded file\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const handleLogoUploadComplete = async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n    const objectPaths = await handleUploadComplete(result);\n    if (objectPaths && objectPaths.length > 0) {\n      // Update the logo URL field with the first uploaded file\n      companyForm.setValue('logoUrl', objectPaths[0]);\n      toast({\n        title: \"Logo Updated\",\n        description: \"Logo uploaded successfully and form updated\",\n      });\n    }\n  };\n\n  // Fetch all settings\n  const { data: allSettings, isLoading } = useQuery({\n    queryKey: [\"/api/admin/settings\"],\n  });\n\n  // Company Info Form\n  const companyForm = useForm<CompanyFormData>({\n    resolver: zodResolver(companyFormSchema),\n    defaultValues: {\n      name: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      tagline: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      about: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      logoUrl: \"\",\n      faviconUrl: \"\",\n      isActive: true\n    }\n  });\n\n  // Contact Details Form\n  const contactForm = useForm<ContactFormData>({\n    resolver: zodResolver(contactFormSchema),\n    defaultValues: {\n      phone: \"\",\n      email: \"\",\n      whatsapp: \"\",\n      address: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      isActive: true\n    }\n  });\n\n  // Social Media Form\n  const socialForm = useForm<SocialFormData>({\n    resolver: zodResolver(socialFormSchema),\n    defaultValues: {\n      facebook: \"\",\n      instagram: \"\",\n      twitter: \"\",\n      isActive: true\n    }\n  });\n\n  // Booking Settings Form\n  const bookingForm = useForm<BookingFormData>({\n    resolver: zodResolver(bookingFormSchema),\n    defaultValues: {\n      termsAndConditions: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      privacyPolicy: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      cancellationPolicy: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      bookingInstructions: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      contactEmail: \"\",\n      contactPhone: \"\",\n      depositPercentage: 10,\n      isBookingEnabled: true,\n      isActive: true\n    }\n  });\n\n  // Location Info Form\n  const locationForm = useForm<LocationFormData>({\n    resolver: zodResolver(locationFormSchema),\n    defaultValues: {\n      address: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      latitude: 0,\n      longitude: 0,\n      googleMapsUrl: \"\",\n      displayOnFooter: true,\n      displayOnContact: true,\n      isActive: true\n    }\n  });\n\n  // About Page Form\n  const aboutPageForm = useForm<AboutPageFormData>({\n    resolver: zodResolver(aboutPageFormSchema),\n    defaultValues: {\n      title: { en: \"\" },\n      subtitle: { en: \"\" },\n      whoWeAre: { en: \"\" },\n      whoWeAreDesc: { en: \"\" },\n      ourMission: { en: \"\" },\n      ourMissionDesc: { en: \"\" },\n      whyChooseUs: { en: \"\" },\n      experience: { en: \"\" },\n      experienceDesc: { en: \"\" },\n      localGuides: { en: \"\" },\n      localGuidesDesc: { en: \"\" },\n      safety: { en: \"\" },\n      safetyDesc: { en: \"\" },\n      authentic: { en: \"\" },\n      authenticDesc: { en: \"\" },\n      toursCompleted: { en: \"\" },\n      happyCustomers: { en: \"\" },\n      countries: { en: \"\" },\n      rating: { en: \"\" },\n      ourStory: { en: \"\" },\n      ourStoryDesc: { en: \"\" },\n      commitment: { en: \"\" },\n      commitmentDesc: { en: \"\" },\n      isActive: true\n    }\n  });\n\n  // Update forms when data loads\n  useEffect(() => {\n    const settingsData = allSettings as Record<string, any> || {};\n    \n    if (settingsData.company_info) {\n      const { type, ...companyData } = settingsData.company_info;\n      companyForm.reset({ ...companyData, isActive: settingsData.company_info.isActive ?? true });\n    }\n    if (settingsData.contact_details) {\n      const { type, ...contactData } = settingsData.contact_details;\n      contactForm.reset({ ...contactData, isActive: settingsData.contact_details.isActive ?? true });\n    }\n    if (settingsData.social_media) {\n      const { type, ...socialData } = settingsData.social_media;\n      socialForm.reset({ ...socialData, isActive: settingsData.social_media.isActive ?? true });\n    }\n    if (settingsData.booking_info) {\n      const { type, ...bookingData } = settingsData.booking_info;\n      bookingForm.reset({ ...bookingData, isActive: settingsData.booking_info.isActive ?? true });\n    }\n    if (settingsData.location_info) {\n      const { type, ...locationData } = settingsData.location_info;\n      locationForm.reset({ ...locationData, isActive: settingsData.location_info.isActive ?? true });\n    }\n    if (settingsData.about_page_content) {\n      const { type, ...aboutPageData } = settingsData.about_page_content;\n      aboutPageForm.reset({ ...aboutPageData, isActive: settingsData.about_page_content.isActive ?? true });\n    }\n  }, [allSettings, companyForm, contactForm, socialForm, bookingForm, locationForm, aboutPageForm]);\n\n  // Mutations for updating settings\n  const updateCompanyMutation = useMutation({\n    mutationFn: async (data: CompanyFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"company_info\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/company_info\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      // Force refetch by removing from cache completely\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"Company information updated successfully\" });\n    },\n    onError: async (error: any) => {\n      console.error(\"Company update error:\", error);\n      \n      // Try to parse server validation details\n      let errorMessage = \"Failed to update company information\";\n      if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast({ \n        title: \"Error\", \n        description: errorMessage,\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateContactMutation = useMutation({\n    mutationFn: async (data: ContactFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"contact_details\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/contact_details\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      // Force refetch by removing from cache completely\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"Contact details updated successfully\" });\n    },\n    onError: async (error: any) => {\n      console.error(\"Contact update error:\", error);\n      \n      // Try to parse server validation details\n      let errorMessage = \"Failed to update contact details\";\n      if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast({ \n        title: \"Error\", \n        description: errorMessage,\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateSocialMutation = useMutation({\n    mutationFn: async (data: SocialFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"social_media\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/social_media\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      // Force refetch by removing from cache completely\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"Social media settings updated successfully\" });\n    },\n    onError: async (error: any) => {\n      console.error(\"Social media update error:\", error);\n      \n      // Try to parse server validation details\n      let errorMessage = \"Failed to update social media settings\";\n      if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast({ \n        title: \"Error\", \n        description: errorMessage,\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateBookingMutation = useMutation({\n    mutationFn: async (data: BookingFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"booking_info\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/booking_info\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      // Force refetch by removing from cache completely\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"Booking settings updated successfully\" });\n    },\n    onError: async (error: any) => {\n      console.error(\"Booking settings update error:\", error);\n      \n      // Try to parse server validation details\n      let errorMessage = \"Failed to update booking settings\";\n      if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      toast({ \n        title: \"Error\", \n        description: errorMessage,\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateLocationMutation = useMutation({\n    mutationFn: async (data: LocationFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"location_info\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/location_info\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"Location information updated successfully\" });\n    },\n    onError: (error: any) => {\n      console.error(\"Location update error:\", error);\n      toast({ \n        title: \"Error\", \n        description: error.message || \"Failed to update location information\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  const updateAboutPageMutation = useMutation({\n    mutationFn: async (data: AboutPageFormData) => {\n      const { isActive, ...value } = data;\n      const valueWithType = { type: \"about_page_content\", ...value };\n      return apiRequest(\"PUT\", \"/api/admin/settings/about_page_content\", { value: valueWithType, isActive });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/settings\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      queryClient.removeQueries({ queryKey: [\"/api/settings\"] });\n      toast({ title: \"Success\", description: \"About page content updated successfully\" });\n    },\n    onError: (error: any) => {\n      console.error(\"About page update error:\", error);\n      toast({ \n        title: \"Error\", \n        description: error.message || \"Failed to update about page content\",\n        variant: \"destructive\" \n      });\n    }\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background p-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          <div className=\"flex items-center justify-center h-96\">\n            <div className=\"text-muted-foreground\">Loading settings...</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"border-b bg-card\">\n        <div className=\"max-w-6xl mx-auto px-8 py-6\">\n          <div className=\"flex items-center gap-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={() => window.history.back()}\n              data-testid=\"button-back\"\n            >\n              ← Back\n            </Button>\n            <div>\n              <h1 className=\"text-2xl font-bold\">Site Settings</h1>\n              <p className=\"text-muted-foreground\">Manage your website content and configuration</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-6xl mx-auto p-8\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-7\">\n            <TabsTrigger value=\"company\" data-testid=\"tab-company\">Company Info</TabsTrigger>\n            <TabsTrigger value=\"contact\" data-testid=\"tab-contact\">Contact Details</TabsTrigger>\n            <TabsTrigger value=\"location\" data-testid=\"tab-location\">Location</TabsTrigger>\n            <TabsTrigger value=\"about\" data-testid=\"tab-about\">About Page</TabsTrigger>\n            <TabsTrigger value=\"social\" data-testid=\"tab-social\">Social Media</TabsTrigger>\n            <TabsTrigger value=\"booking\" data-testid=\"tab-booking\">Booking Settings</TabsTrigger>\n            <TabsTrigger value=\"media\" data-testid=\"tab-media\">Media Management</TabsTrigger>\n          </TabsList>\n\n          {/* Company Info Tab */}\n          <TabsContent value=\"company\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Company Information</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Form {...companyForm}>\n                  <form onSubmit={companyForm.handleSubmit((data) => updateCompanyMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={companyForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable Company Information</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Make company information visible on the website\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-company-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      {/* Company Name */}\n                      <div className=\"space-y-4\">\n                        <h3 className=\"font-medium\">Company Name</h3>\n                        <FormField\n                          control={companyForm.control}\n                          name=\"name.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Company name in English\" data-testid=\"input-company-name-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"name.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Nom de l'entreprise en français\" data-testid=\"input-company-name-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"name.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Firmenname auf Deutsch\" data-testid=\"input-company-name-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"name.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"اسم الشركة بالعربية\" dir=\"rtl\" data-testid=\"input-company-name-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n\n                      {/* Tagline */}\n                      <div className=\"space-y-4\">\n                        <h3 className=\"font-medium\">Tagline</h3>\n                        <FormField\n                          control={companyForm.control}\n                          name=\"tagline.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Company tagline in English\" data-testid=\"input-tagline-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"tagline.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Slogan de l'entreprise en français\" data-testid=\"input-tagline-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"tagline.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Firmen-Slogan auf Deutsch\" data-testid=\"input-tagline-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"tagline.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"شعار الشركة بالعربية\" dir=\"rtl\" data-testid=\"input-tagline-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* About Section */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">About Description</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={companyForm.control}\n                          name=\"about.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea \n                                  {...field} \n                                  placeholder=\"Company description in English\"\n                                  className=\"min-h-[100px]\"\n                                  data-testid=\"textarea-about-en\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"about.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea \n                                  {...field} \n                                  placeholder=\"Description de l'entreprise en français\"\n                                  className=\"min-h-[100px]\"\n                                  data-testid=\"textarea-about-fr\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"about.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea \n                                  {...field} \n                                  placeholder=\"Firmenbeschreibung auf Deutsch\"\n                                  className=\"min-h-[100px]\"\n                                  data-testid=\"textarea-about-de\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={companyForm.control}\n                          name=\"about.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea \n                                  {...field} \n                                  placeholder=\"وصف الشركة بالعربية\"\n                                  className=\"min-h-[100px]\"\n                                  dir=\"rtl\"\n                                  data-testid=\"textarea-about-ar\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Logo and Favicon */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <FormField\n                        control={companyForm.control}\n                        name=\"logoUrl\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Logo URL</FormLabel>\n                            <div className=\"space-y-2\">\n                              <FormControl>\n                                <Input {...field} placeholder=\"/logo.png\" data-testid=\"input-logo-url\" />\n                              </FormControl>\n                              <ObjectUploader\n                                maxNumberOfFiles={1}\n                                maxFileSize={5242880} // 5MB\n                                allowedFileTypes={['.jpg', '.jpeg', '.png', '.webp', '.gif']}\n                                onGetUploadParameters={handleGetUploadParameters}\n                                onComplete={handleLogoUploadComplete}\n                                buttonClassName=\"w-full\"\n                                data-testid=\"button-upload-logo\"\n                              >\n                                <Upload className=\"h-4 w-4 mr-2\" />\n                                Upload Logo\n                              </ObjectUploader>\n                              {field.value && (\n                                <div className=\"text-sm text-muted-foreground\">\n                                  Current: {field.value}\n                                </div>\n                              )}\n                            </div>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={companyForm.control}\n                        name=\"faviconUrl\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Favicon URL</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"/favicon.ico\" data-testid=\"input-favicon-url\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateCompanyMutation.isPending} data-testid=\"button-save-company\">\n                      {updateCompanyMutation.isPending ? \"Saving...\" : \"Save Company Information\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Contact Details Tab */}\n          <TabsContent value=\"contact\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Contact Information</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Form {...contactForm}>\n                  <form onSubmit={contactForm.handleSubmit((data) => updateContactMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={contactForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable Contact Information</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Make contact information visible on the website\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-contact-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <FormField\n                        control={contactForm.control}\n                        name=\"phone\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Phone Number</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"+216 98 123 456\" data-testid=\"input-phone\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={contactForm.control}\n                        name=\"email\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Email Address</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"info@company.com\" type=\"email\" data-testid=\"input-email\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={contactForm.control}\n                        name=\"whatsapp\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>WhatsApp Number</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"+216 98 123 456\" data-testid=\"input-whatsapp\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    {/* Address */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Address</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={contactForm.control}\n                          name=\"address.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Address in English\" data-testid=\"input-address-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={contactForm.control}\n                          name=\"address.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Adresse en français\" data-testid=\"input-address-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={contactForm.control}\n                          name=\"address.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"Adresse auf Deutsch\" data-testid=\"input-address-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={contactForm.control}\n                          name=\"address.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Input {...field} placeholder=\"العنوان بالعربية\" dir=\"rtl\" data-testid=\"input-address-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateContactMutation.isPending} data-testid=\"button-save-contact\">\n                      {updateContactMutation.isPending ? \"Saving...\" : \"Save Contact Information\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Location Tab */}\n          <TabsContent value=\"location\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MapPin className=\"h-5 w-5\" />\n                  Location Information\n                </CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                  Manage your company's physical location and map integration.\n                </p>\n              </CardHeader>\n              <CardContent>\n                <Form {...locationForm}>\n                  <form onSubmit={locationForm.handleSubmit((data) => updateLocationMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={locationForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable Location Display</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Show location information on website footer and contact pages\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-location-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    {/* Address Section */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Address</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={locationForm.control}\n                          name=\"address.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Complete address in English\" rows={3} data-testid=\"input-address-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={locationForm.control}\n                          name=\"address.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Adresse complète en français\" rows={3} data-testid=\"input-address-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={locationForm.control}\n                          name=\"address.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Vollständige Adresse auf Deutsch\" rows={3} data-testid=\"input-address-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={locationForm.control}\n                          name=\"address.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"العنوان الكامل بالعربية\" dir=\"rtl\" rows={3} data-testid=\"input-address-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Coordinates Section */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Map Coordinates</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={locationForm.control}\n                          name=\"latitude\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Latitude</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  type=\"number\" \n                                  step=\"any\" \n                                  placeholder=\"33.8869\" \n                                  onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                                  data-testid=\"input-latitude\" \n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={locationForm.control}\n                          name=\"longitude\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Longitude</FormLabel>\n                              <FormControl>\n                                <Input \n                                  {...field} \n                                  type=\"number\" \n                                  step=\"any\" \n                                  placeholder=\"9.5375\" \n                                  onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                                  data-testid=\"input-longitude\" \n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Get coordinates from Google Maps by right-clicking on your location and selecting coordinates.\n                      </p>\n                    </div>\n\n                    {/* Optional Google Maps URL */}\n                    <FormField\n                      control={locationForm.control}\n                      name=\"googleMapsUrl\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>Google Maps URL (Optional)</FormLabel>\n                          <FormControl>\n                            <Input {...field} placeholder=\"https://maps.google.com/...\" data-testid=\"input-google-maps-url\" />\n                          </FormControl>\n                          <FormMessage />\n                          <p className=\"text-sm text-muted-foreground\">\n                            Link to your business on Google Maps for additional information.\n                          </p>\n                        </FormItem>\n                      )}\n                    />\n\n                    {/* Display Options */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Display Options</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <FormField\n                          control={locationForm.control}\n                          name=\"displayOnFooter\"\n                          render={({ field }) => (\n                            <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3\">\n                              <div className=\"space-y-0.5\">\n                                <FormLabel>Show in Footer</FormLabel>\n                                <div className=\"text-sm text-muted-foreground\">\n                                  Display location in website footer\n                                </div>\n                              </div>\n                              <FormControl>\n                                <Switch \n                                  checked={field.value} \n                                  onCheckedChange={field.onChange}\n                                  data-testid=\"switch-display-footer\"\n                                />\n                              </FormControl>\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={locationForm.control}\n                          name=\"displayOnContact\"\n                          render={({ field }) => (\n                            <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-3\">\n                              <div className=\"space-y-0.5\">\n                                <FormLabel>Show on Contact Page</FormLabel>\n                                <div className=\"text-sm text-muted-foreground\">\n                                  Display location on contact page\n                                </div>\n                              </div>\n                              <FormControl>\n                                <Switch \n                                  checked={field.value} \n                                  onCheckedChange={field.onChange}\n                                  data-testid=\"switch-display-contact\"\n                                />\n                              </FormControl>\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateLocationMutation.isPending} data-testid=\"button-save-location\">\n                      {updateLocationMutation.isPending ? \"Saving...\" : \"Save Location Information\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* About Page Tab */}\n          <TabsContent value=\"about\">\n            <Card>\n              <CardHeader>\n                <CardTitle>About Page Content</CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                  Manage all content displayed on your About page across all languages.\n                </p>\n              </CardHeader>\n              <CardContent>\n                <Form {...aboutPageForm}>\n                  <form onSubmit={aboutPageForm.handleSubmit((data) => updateAboutPageMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={aboutPageForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable About Page Content</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Make custom about page content visible on the website\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-about-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid gap-8\">\n                      {/* Page Header */}\n                      <div className=\"space-y-4\">\n                        <h3 className=\"font-medium\">Page Header</h3>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          {/* Title */}\n                          <div className=\"space-y-3\">\n                            <h4 className=\"text-sm font-medium\">Page Title</h4>\n                            <FormField control={aboutPageForm.control} name=\"title.en\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>English</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"About Sghayra Tours\" data-testid=\"input-about-title-en\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"title.fr\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>French</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"À Propos de Sghayra Tours\" data-testid=\"input-about-title-fr\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"title.de\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>German</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"Über Sghayra Tours\" data-testid=\"input-about-title-de\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"title.ar\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Arabic</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"حول سغايرة تورز\" data-testid=\"input-about-title-ar\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                          </div>\n\n                          {/* Subtitle */}\n                          <div className=\"space-y-3\">\n                            <h4 className=\"text-sm font-medium\">Page Subtitle</h4>\n                            <FormField control={aboutPageForm.control} name=\"subtitle.en\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>English</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"Your Gateway to the Sahara Desert\" data-testid=\"input-about-subtitle-en\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"subtitle.fr\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>French</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"Votre Porte d'Entrée vers le Désert du Sahara\" data-testid=\"input-about-subtitle-fr\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"subtitle.de\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>German</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"Ihr Tor zur Sahara-Wüste\" data-testid=\"input-about-subtitle-de\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                            <FormField control={aboutPageForm.control} name=\"subtitle.ar\" render={({ field }) => (\n                              <FormItem>\n                                <FormLabel>Arabic</FormLabel>\n                                <FormControl>\n                                  <Input {...field} placeholder=\"بوابتك إلى الصحراء الكبرى\" data-testid=\"input-about-subtitle-ar\" />\n                                </FormControl>\n                                <FormMessage />\n                              </FormItem>\n                            )} />\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Main Content Sections */}\n                      <div className=\"space-y-6\">\n                        <h3 className=\"font-medium\">Main Content Sections</h3>\n                        \n                        {/* Who We Are */}\n                        <div className=\"space-y-4\">\n                          <h4 className=\"text-sm font-medium\">Who We Are Section</h4>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div className=\"space-y-3\">\n                              <FormField control={aboutPageForm.control} name=\"whoWeAre.en\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (English)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Who We Are\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAre.fr\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (French)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Qui Nous Sommes\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAre.de\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (German)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Wer Wir Sind\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAre.ar\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (Arabic)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"من نحن\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                            </div>\n                            <div className=\"space-y-3\">\n                              <FormField control={aboutPageForm.control} name=\"whoWeAreDesc.en\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (English)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Describe your company...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAreDesc.fr\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (French)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Décrivez votre entreprise...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAreDesc.de\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (German)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Beschreiben Sie Ihr Unternehmen...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"whoWeAreDesc.ar\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (Arabic)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"اوصف شركتك...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                            </div>\n                          </div>\n                        </div>\n\n                        {/* Our Story */}\n                        <div className=\"space-y-4\">\n                          <h4 className=\"text-sm font-medium\">Our Story Section</h4>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                            <div className=\"space-y-3\">\n                              <FormField control={aboutPageForm.control} name=\"ourStory.en\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (English)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Our Story\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStory.fr\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (French)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Notre Histoire\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStory.de\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (German)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"Unsere Geschichte\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStory.ar\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Title (Arabic)</FormLabel>\n                                  <FormControl>\n                                    <Input {...field} placeholder=\"قصتنا\" />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                            </div>\n                            <div className=\"space-y-3\">\n                              <FormField control={aboutPageForm.control} name=\"ourStoryDesc.en\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (English)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Tell your company story...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStoryDesc.fr\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (French)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Racontez l'histoire de votre entreprise...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStoryDesc.de\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (German)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"Erzählen Sie Ihre Unternehmensgeschichte...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                              <FormField control={aboutPageForm.control} name=\"ourStoryDesc.ar\" render={({ field }) => (\n                                <FormItem>\n                                  <FormLabel>Description (Arabic)</FormLabel>\n                                  <FormControl>\n                                    <Textarea {...field} placeholder=\"احك قصة شركتك...\" rows={3} />\n                                  </FormControl>\n                                  <FormMessage />\n                                </FormItem>\n                              )} />\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateAboutPageMutation.isPending} data-testid=\"button-save-about\">\n                      {updateAboutPageMutation.isPending ? \"Saving...\" : \"Save About Page Content\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Social Media Tab */}\n          <TabsContent value=\"social\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Social Media Links</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Form {...socialForm}>\n                  <form onSubmit={socialForm.handleSubmit((data) => updateSocialMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={socialForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable Social Media Links</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Make social media links visible on the website\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-social-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <FormField\n                        control={socialForm.control}\n                        name=\"facebook\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Facebook</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"https://facebook.com/yourcompany\" data-testid=\"input-facebook\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={socialForm.control}\n                        name=\"instagram\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Instagram</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"https://instagram.com/yourcompany\" data-testid=\"input-instagram\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={socialForm.control}\n                        name=\"twitter\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Twitter</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"https://twitter.com/yourcompany\" data-testid=\"input-twitter\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateSocialMutation.isPending} data-testid=\"button-save-social\">\n                      {updateSocialMutation.isPending ? \"Saving...\" : \"Save Social Media Settings\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Booking Settings Tab */}\n          <TabsContent value=\"booking\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Booking Settings</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Form {...bookingForm}>\n                  <form onSubmit={bookingForm.handleSubmit((data) => updateBookingMutation.mutate(data))} className=\"space-y-6\">\n                    <FormField\n                      control={bookingForm.control}\n                      name=\"isActive\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Enable Booking System</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Make the booking system available to customers\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-booking-active\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={bookingForm.control}\n                      name=\"isBookingEnabled\"\n                      render={({ field }) => (\n                        <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                          <div className=\"space-y-0.5\">\n                            <FormLabel className=\"text-base\">Accept New Bookings</FormLabel>\n                            <div className=\"text-sm text-muted-foreground\">\n                              Allow customers to make new bookings\n                            </div>\n                          </div>\n                          <FormControl>\n                            <Switch \n                              checked={field.value} \n                              onCheckedChange={field.onChange}\n                              data-testid=\"switch-booking-enabled\"\n                            />\n                          </FormControl>\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <FormField\n                        control={bookingForm.control}\n                        name=\"contactEmail\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Contact Email</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"bookings@example.com\" data-testid=\"input-contact-email\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={bookingForm.control}\n                        name=\"contactPhone\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Contact Phone</FormLabel>\n                            <FormControl>\n                              <Input {...field} placeholder=\"+216 12 345 678\" data-testid=\"input-contact-phone\" />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={bookingForm.control}\n                        name=\"depositPercentage\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>Deposit Percentage</FormLabel>\n                            <FormControl>\n                              <Input \n                                {...field} \n                                type=\"number\" \n                                min=\"1\" \n                                max=\"100\" \n                                placeholder=\"10\" \n                                data-testid=\"input-deposit-percentage\"\n                                onChange={(e) => field.onChange(Number(e.target.value))}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    {/* Terms and Conditions */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Terms and Conditions</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"termsAndConditions.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Terms and conditions in English...\" rows={4} data-testid=\"textarea-terms-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"termsAndConditions.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Conditions générales en français...\" rows={4} data-testid=\"textarea-terms-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"termsAndConditions.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Geschäftsbedingungen auf Deutsch...\" rows={4} data-testid=\"textarea-terms-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"termsAndConditions.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"الشروط والأحكام باللغة العربية...\" rows={4} data-testid=\"textarea-terms-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Privacy Policy */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Privacy Policy</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"privacyPolicy.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Privacy policy in English...\" rows={4} data-testid=\"textarea-privacy-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"privacyPolicy.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Politique de confidentialité en français...\" rows={4} data-testid=\"textarea-privacy-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"privacyPolicy.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Datenschutzerklärung auf Deutsch...\" rows={4} data-testid=\"textarea-privacy-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"privacyPolicy.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"سياسة الخصوصية باللغة العربية...\" rows={4} data-testid=\"textarea-privacy-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Cancellation Policy */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Cancellation Policy</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"cancellationPolicy.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Cancellation policy in English...\" rows={4} data-testid=\"textarea-cancellation-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"cancellationPolicy.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Politique d'annulation en français...\" rows={4} data-testid=\"textarea-cancellation-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"cancellationPolicy.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Stornierungsrichtlinie auf Deutsch...\" rows={4} data-testid=\"textarea-cancellation-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"cancellationPolicy.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"سياسة الإلغاء باللغة العربية...\" rows={4} data-testid=\"textarea-cancellation-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    {/* Booking Instructions */}\n                    <div className=\"space-y-4\">\n                      <h3 className=\"font-medium\">Booking Instructions (Optional)</h3>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"bookingInstructions.en\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>English</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Special instructions for customers...\" rows={3} data-testid=\"textarea-instructions-en\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"bookingInstructions.fr\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>French</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Instructions spéciales pour les clients...\" rows={3} data-testid=\"textarea-instructions-fr\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"bookingInstructions.de\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>German</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"Besondere Anweisungen für Kunden...\" rows={3} data-testid=\"textarea-instructions-de\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                        <FormField\n                          control={bookingForm.control}\n                          name=\"bookingInstructions.ar\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>Arabic</FormLabel>\n                              <FormControl>\n                                <Textarea {...field} placeholder=\"تعليمات خاصة للعملاء...\" rows={3} data-testid=\"textarea-instructions-ar\" />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n                      </div>\n                    </div>\n\n                    <Button type=\"submit\" disabled={updateBookingMutation.isPending} data-testid=\"button-save-booking\">\n                      {updateBookingMutation.isPending ? \"Saving...\" : \"Save Booking Settings\"}\n                    </Button>\n                  </form>\n                </Form>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          {/* Media Management Tab */}\n          <TabsContent value=\"media\">\n            <div className=\"space-y-6\">\n              {/* Photos Section */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Image className=\"h-5 w-5\" />\n                    Photo Management\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Upload and manage photos for activities, galleries, and other content. Supported formats: JPG, PNG, WebP.\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <ObjectUploader\n                      maxNumberOfFiles={10}\n                      maxFileSize={10485760} // 10MB\n                      allowedFileTypes={['.jpg', '.jpeg', '.png', '.webp']}\n                      onGetUploadParameters={handleGetUploadParameters}\n                      onComplete={handleUploadComplete}\n                      buttonClassName=\"w-full\"\n                      data-testid=\"button-upload-photos\"\n                    >\n                      <Upload className=\"h-4 w-4 mr-2\" />\n                      Upload Photos\n                    </ObjectUploader>\n                    \n                    {uploadedFiles.length > 0 && (\n                      <div className=\"mt-4\">\n                        <h4 className=\"font-medium mb-2\">Recently Uploaded Files</h4>\n                        <div className=\"space-y-2\">\n                          {uploadedFiles.slice(-5).map((filePath, index) => (\n                            <div key={index} className=\"flex items-center justify-between bg-muted p-3 rounded border\">\n                              <div className=\"flex-1 min-w-0\">\n                                <div className=\"text-sm font-medium truncate\">{filePath.split('/').pop()}</div>\n                                <code className=\"text-xs text-muted-foreground break-all\">{filePath}</code>\n                              </div>\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => {\n                                  navigator.clipboard.writeText(filePath);\n                                  toast({\n                                    title: \"Copied!\",\n                                    description: \"File path copied to clipboard\",\n                                  });\n                                }}\n                                className=\"ml-2 flex-shrink-0\"\n                              >\n                                Copy Path\n                              </Button>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n\n              {/* Videos Section */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Video className=\"h-5 w-5\" />\n                    Video Management\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Upload and manage video content. Supported formats: MP4, WebM, MOV.\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  <ObjectUploader\n                    maxNumberOfFiles={5}\n                    maxFileSize={104857600} // 100MB\n                    allowedFileTypes={['.mp4', '.webm', '.mov']}\n                    onGetUploadParameters={handleGetUploadParameters}\n                    onComplete={handleUploadComplete}\n                    buttonClassName=\"w-full\"\n                    data-testid=\"button-upload-videos\"\n                  >\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Upload Videos\n                  </ObjectUploader>\n                </CardContent>\n              </Card>\n\n              {/* Documents Section */}\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <FileText className=\"h-5 w-5\" />\n                    Document Management\n                  </CardTitle>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Upload documents, PDFs, and other files. Supported formats: PDF, DOC, DOCX, TXT.\n                  </p>\n                </CardHeader>\n                <CardContent>\n                  <ObjectUploader\n                    maxNumberOfFiles={10}\n                    maxFileSize={20971520} // 20MB\n                    allowedFileTypes={['.pdf', '.doc', '.docx', '.txt']}\n                    onGetUploadParameters={handleGetUploadParameters}\n                    onComplete={handleUploadComplete}\n                    buttonClassName=\"w-full\"\n                    data-testid=\"button-upload-documents\"\n                  >\n                    <Upload className=\"h-4 w-4 mr-2\" />\n                    Upload Documents\n                  </ObjectUploader>\n                </CardContent>\n              </Card>\n\n              {/* Usage Instructions */}\n              <Card>\n                <CardHeader>\n                  <CardTitle>How to Use Uploaded Files</CardTitle>\n                </CardHeader>\n                <CardContent className=\"prose prose-sm max-w-none\">\n                  <div className=\"space-y-4 text-sm\">\n                    <div>\n                      <h4 className=\"font-medium\">Using Files in Content</h4>\n                      <p className=\"text-muted-foreground\">\n                        After uploading files, you can reference them in your activity descriptions, company information, and other content areas using the provided file paths.\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium\">Logo Updates</h4>\n                      <p className=\"text-muted-foreground\">\n                        Uploaded logo images can be automatically used by copying the file path to the Logo URL field in the Company Info tab.\n                      </p>\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium\">File Security</h4>\n                      <p className=\"text-muted-foreground\">\n                        All uploaded files are stored securely with proper access controls. Public files are accessible for website display, while private files require authentication.\n                      </p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}","size_bytes":94467},"client/src/hooks/use-site-settings.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\n\nexport interface SiteSettings {\n  company_info?: {\n    name: { en: string; fr: string; de: string; ar: string };\n    tagline?: { en: string; fr: string; de: string; ar: string };\n    about: { en: string; fr: string; de: string; ar: string };\n    logoUrl?: string;\n    faviconUrl?: string;\n    isActive: boolean;\n  };\n  contact_details?: {\n    phone: string;\n    email: string;\n    whatsapp?: string;\n    address: { en: string; fr: string; de: string; ar: string };\n    isActive: boolean;\n  };\n  social_media?: {\n    facebook?: string;\n    instagram?: string;\n    twitter?: string;\n    isActive: boolean;\n  };\n  booking_info?: {\n    termsAndConditions: { en: string; fr: string; de: string; ar: string };\n    privacyPolicy: { en: string; fr: string; de: string; ar: string };\n    cancellationPolicy: { en: string; fr: string; de: string; ar: string };\n    bookingInstructions?: { en: string; fr: string; de: string; ar: string };\n    contactEmail?: string;\n    contactPhone?: string;\n    depositPercentage: number;\n    isBookingEnabled: boolean;\n    isActive: boolean;\n  };\n  location_info?: {\n    address: { en: string; fr: string; de: string; ar: string };\n    latitude: number;\n    longitude: number;\n    googleMapsUrl?: string;\n    displayOnFooter: boolean;\n    displayOnContact: boolean;\n    isActive: boolean;\n  };\n  about_page_content?: {\n    type: \"about_page_content\";\n    title: { en: string; fr?: string; de?: string; ar?: string };\n    subtitle: { en: string; fr?: string; de?: string; ar?: string };\n    whoWeAre: { en: string; fr?: string; de?: string; ar?: string };\n    whoWeAreDesc: { en: string; fr?: string; de?: string; ar?: string };\n    ourMission: { en: string; fr?: string; de?: string; ar?: string };\n    ourMissionDesc: { en: string; fr?: string; de?: string; ar?: string };\n    whyChooseUs: { en: string; fr?: string; de?: string; ar?: string };\n    experience: { en: string; fr?: string; de?: string; ar?: string };\n    experienceDesc: { en: string; fr?: string; de?: string; ar?: string };\n    localGuides: { en: string; fr?: string; de?: string; ar?: string };\n    localGuidesDesc: { en: string; fr?: string; de?: string; ar?: string };\n    safety: { en: string; fr?: string; de?: string; ar?: string };\n    safetyDesc: { en: string; fr?: string; de?: string; ar?: string };\n    authentic: { en: string; fr?: string; de?: string; ar?: string };\n    authenticDesc: { en: string; fr?: string; de?: string; ar?: string };\n    toursCompleted: { en: string; fr?: string; de?: string; ar?: string };\n    happyCustomers: { en: string; fr?: string; de?: string; ar?: string };\n    countries: { en: string; fr?: string; de?: string; ar?: string };\n    rating: { en: string; fr?: string; de?: string; ar?: string };\n    ourStory: { en: string; fr?: string; de?: string; ar?: string };\n    ourStoryDesc: { en: string; fr?: string; de?: string; ar?: string };\n    commitment: { en: string; fr?: string; de?: string; ar?: string };\n    commitmentDesc: { en: string; fr?: string; de?: string; ar?: string };\n    isActive: boolean;\n  };\n}\n\nexport const useSiteSettings = () => {\n  return useQuery<SiteSettings>({\n    queryKey: [\"/api/settings\"],\n    staleTime: 0, // No cache - always fresh\n    gcTime: 0, // Don't cache at all (was cacheTime in v4)\n    refetchOnMount: \"always\", // Always refetch when component mounts\n    refetchOnWindowFocus: true, // Refetch when window gains focus\n  });\n};","size_bytes":3460},"client/src/pages/BookingDetails.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { \n  ArrowLeft, \n  Clock, \n  Users, \n  MapPin, \n  Star, \n  Calendar, \n  CreditCard,\n  CheckCircle,\n  AlertCircle,\n  Phone,\n  Mail,\n  Shield,\n  FileText,\n  Globe,\n  MessageCircle\n} from \"lucide-react\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useSiteSettings } from \"@/hooks/use-site-settings\";\nimport type { Activity } from \"@shared/schema\";\n\ninterface BookingDetailsProps {\n  currentLanguage: string;\n  currentCurrency: string;\n}\n\n// Form validation schema\nconst bookingSchema = z.object({\n  customerName: z.string().min(2, \"Name must be at least 2 characters\"),\n  customerEmail: z.string().email(\"Please enter a valid email address\"),\n  customerPhone: z.string().optional(),\n  activityId: z.string().min(1, \"Please select an activity\"),\n  bookingDate: z.string().min(1, \"Please select a booking date\"),\n  groupSize: z.coerce.number().min(1, \"Group size must be at least 1\").max(20, \"Group size cannot exceed 20\"),\n  specialRequests: z.string().optional(),\n});\n\ntype BookingFormData = z.infer<typeof bookingSchema>;\n\nexport default function BookingDetails({ currentLanguage, currentCurrency }: BookingDetailsProps) {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [selectedActivityId, setSelectedActivityId] = useState(\"\");\n  const [bookingSuccess, setBookingSuccess] = useState(false);\n  const [bookingId, setBookingId] = useState(\"\");\n\n  const { data: settings } = useSiteSettings();\n  const currencySymbols = { TND: \"د.ت\", USD: \"$\", EUR: \"€\" };\n  const currencySymbol = currencySymbols[currentCurrency as keyof typeof currencySymbols];\n\n  // Check if booking is enabled\n  const isBookingEnabled = settings?.booking_info?.isBookingEnabled ?? true;\n\n  // Form setup\n  const form = useForm<BookingFormData>({\n    resolver: zodResolver(bookingSchema),\n    defaultValues: {\n      customerName: \"\",\n      customerEmail: \"\",\n      customerPhone: \"\",\n      activityId: \"\",\n      bookingDate: \"\",\n      groupSize: 2,\n      specialRequests: \"\",\n    },\n  });\n\n  // Fetch activities\n  const { data: activities = [], isLoading } = useQuery({\n    queryKey: ['/api/activities'],\n    select: (data: Activity[]) => data.filter(activity => activity.isActive),\n  });\n\n  // Get selected activity details\n  const selectedActivity = activities.find(activity => activity.id === selectedActivityId);\n\n  // Booking mutation\n  const bookingMutation = useMutation({\n    mutationFn: async (bookingData: BookingFormData) => {\n      const response = await fetch('/api/bookings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          ...bookingData,\n          currency: currentCurrency,\n          language: currentLanguage,\n        }),\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create booking');\n      }\n      \n      return await response.json();\n    },\n    onSuccess: (data) => {\n      setBookingSuccess(true);\n      setBookingId(data.id);\n      form.reset();\n      \n      toast({\n        title: \"Booking Confirmed!\",\n        description: `Your booking has been created. Booking ID: ${data.id}`,\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: \"Booking Failed\",\n        description: error.message || \"Failed to create booking. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleActivitySelect = (activityId: string) => {\n    setSelectedActivityId(activityId);\n    form.setValue(\"activityId\", activityId);\n  };\n\n  const handleSubmit = (data: BookingFormData) => {\n    bookingMutation.mutate(data);\n  };\n\n  const getLocalizedText = (textObj: any, fallback = \"\") => {\n    if (!textObj) return fallback;\n    return textObj[currentLanguage as keyof typeof textObj] || textObj.en || fallback;\n  };\n\n  const getMinBookingDate = () => {\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    return tomorrow.toISOString().split('T')[0];\n  };\n\n  const calculateTotalPrice = () => {\n    if (!selectedActivity) return 0;\n    const price = (selectedActivity.prices as any)[currentCurrency] || (selectedActivity.prices as any).USD;\n    return price * form.watch(\"groupSize\");\n  };\n\n  const calculateDepositAmount = () => {\n    const depositPercentage = settings?.booking_info?.depositPercentage || 10;\n    return Math.round(calculateTotalPrice() * (depositPercentage / 100));\n  };\n\n  // Helper to get policy text from admin settings or fallback to translations\n  const getPolicyText = (policyType: 'cancellationPolicy' | 'termsAndConditions' | 'privacyPolicy', fallback: string) => {\n    if (settings?.booking_info?.[policyType]) {\n      return getLocalizedText(settings.booking_info[policyType], fallback);\n    }\n    return fallback;\n  };\n\n  const getDepositText = () => {\n    const percentage = settings?.booking_info?.depositPercentage || 10;\n    const translations = {\n      en: `Only ${percentage}% deposit required to secure your booking`,\n      fr: `Seulement ${percentage}% d'acompte requis pour sécuriser votre réservation`,\n      de: `Nur ${percentage}% Anzahlung erforderlich, um Ihre Buchung zu sichern`,\n      ar: `يُطلب ${percentage}% فقط كدفعة مقدمة لتأمين حجزك`\n    };\n    return translations[currentLanguage as keyof typeof translations] || translations.en;\n  };\n\n  // WhatsApp booking function\n  const handleWhatsAppBooking = () => {\n    if (!selectedActivity) return;\n    \n    const activityTitle = getLocalizedText(selectedActivity.title);\n    const totalPrice = calculateTotalPrice();\n    const depositAmount = calculateDepositAmount();\n    const groupSize = form.watch(\"groupSize\");\n    const bookingDate = form.watch(\"bookingDate\");\n    const customerName = form.watch(\"customerName\");\n    const customerEmail = form.watch(\"customerEmail\");\n    const specialRequests = form.watch(\"specialRequests\");\n\n    const messageTranslations = {\n      en: `Hello! I would like to book the following activity:\n\n🏜️ *Activity:* ${activityTitle}\n👥 *Group Size:* ${groupSize} ${groupSize === 1 ? 'person' : 'people'}\n📅 *Date:* ${bookingDate}\n💰 *Total Price:* ${currencySymbol}${totalPrice.toFixed(2)}\n💳 *Deposit Required:* ${currencySymbol}${depositAmount.toFixed(2)}\n\n📋 *Customer Details:*\nName: ${customerName || 'Not provided'}\nEmail: ${customerEmail || 'Not provided'}\n${specialRequests ? `Special Requests: ${specialRequests}` : ''}\n\nPlease confirm availability and provide payment details. Thank you!`,\n      \n      fr: `Bonjour! Je souhaiterais réserver l'activité suivante:\n\n🏜️ *Activité:* ${activityTitle}\n👥 *Taille du groupe:* ${groupSize} ${groupSize === 1 ? 'personne' : 'personnes'}\n📅 *Date:* ${bookingDate}\n💰 *Prix total:* ${currencySymbol}${totalPrice.toFixed(2)}\n💳 *Acompte requis:* ${currencySymbol}${depositAmount.toFixed(2)}\n\n📋 *Détails client:*\nNom: ${customerName || 'Non fourni'}\nEmail: ${customerEmail || 'Non fourni'}\n${specialRequests ? `Demandes spéciales: ${specialRequests}` : ''}\n\nVeuillez confirmer la disponibilité et fournir les détails de paiement. Merci!`,\n\n      de: `Hallo! Ich möchte die folgende Aktivität buchen:\n\n🏜️ *Aktivität:* ${activityTitle}\n👥 *Gruppengröße:* ${groupSize} ${groupSize === 1 ? 'Person' : 'Personen'}\n📅 *Datum:* ${bookingDate}\n💰 *Gesamtpreis:* ${currencySymbol}${totalPrice.toFixed(2)}\n💳 *Anzahlung erforderlich:* ${currencySymbol}${depositAmount.toFixed(2)}\n\n📋 *Kundendetails:*\nName: ${customerName || 'Nicht angegeben'}\nEmail: ${customerEmail || 'Nicht angegeben'}\n${specialRequests ? `Spezielle Wünsche: ${specialRequests}` : ''}\n\nBitte bestätigen Sie die Verfügbarkeit und geben Sie Zahlungsdetails an. Danke!`,\n\n      ar: `مرحبا! أود حجز النشاط التالي:\n\n🏜️ *النشاط:* ${activityTitle}\n👥 *حجم المجموعة:* ${groupSize} ${groupSize === 1 ? 'شخص' : 'أشخاص'}\n📅 *التاريخ:* ${bookingDate}\n💰 *السعر الإجمالي:* ${currencySymbol}${totalPrice.toFixed(2)}\n💳 *العربون المطلوب:* ${currencySymbol}${depositAmount.toFixed(2)}\n\n📋 *تفاصيل العميل:*\nالاسم: ${customerName || 'غير محدد'}\nالبريد الإلكتروني: ${customerEmail || 'غير محدد'}\n${specialRequests ? `طلبات خاصة: ${specialRequests}` : ''}\n\nيرجى تأكيد التوفر وتقديم تفاصيل الدفع. شكرا لك!`\n    };\n\n    const message = messageTranslations[currentLanguage as keyof typeof messageTranslations] || messageTranslations.en;\n    const encodedMessage = encodeURIComponent(message);\n    const whatsappUrl = `http://wa.me/21640676420?text=${encodedMessage}`;\n    \n    window.open(whatsappUrl, '_blank');\n  };\n\n  // Translations\n  const translations = {\n    en: {\n      title: \"Book Your Desert Adventure\",\n      subtitle: \"Choose your activity and reserve your spot\",\n      selectActivity: \"Select Activity\",\n      activityDetails: \"Activity Details\",\n      duration: \"Duration\",\n      groupSize: \"Group Size\",\n      capacity: \"Max Capacity\",\n      price: \"Price\",\n      perPerson: \"per person\",\n      customerInfo: \"Customer Information\",\n      customerName: \"Full Name\",\n      customerEmail: \"Email Address\",\n      customerPhone: \"Phone Number (Optional)\",\n      bookingDate: \"Preferred Date\",\n      specialRequests: \"Special Requests (Optional)\",\n      totalPrice: \"Total Price\",\n      depositRequired: \"Deposit Required (10%)\",\n      submitBooking: \"Confirm Booking\",\n      contactWhatsApp: \"Contact via WhatsApp\",\n      whatsappBooking: \"Book via WhatsApp\",\n      bookingSuccess: \"Booking Confirmed!\",\n      bookingSuccessMessage: \"Thank you for your booking! You will receive a confirmation email shortly.\",\n      bookingId: \"Booking ID\",\n      backToHome: \"Back to Home\",\n      contactInfo: \"Contact Information\",\n      bookingPolicies: \"Booking Policies\",\n      cancellationPolicy: \"Free cancellation up to 24 hours before the trip\",\n      paymentPolicy: \"Only 10% deposit required to secure your booking\",\n      safetyPolicy: \"All activities are conducted with professional guides\",\n      languageSupport: \"Multilingual guide support available\",\n      viewBooking: \"View Booking Details\",\n      noActivities: \"No activities available\",\n      loadingActivities: \"Loading available activities...\",\n    },\n    fr: {\n      title: \"Réservez Votre Aventure Désertique\",\n      subtitle: \"Choisissez votre activité et réservez votre place\",\n      selectActivity: \"Sélectionner une Activité\",\n      activityDetails: \"Détails de l'Activité\",\n      duration: \"Durée\",\n      groupSize: \"Taille du Groupe\",\n      capacity: \"Capacité Max\",\n      price: \"Prix\",\n      perPerson: \"par personne\",\n      customerInfo: \"Informations Client\",\n      customerName: \"Nom Complet\",\n      customerEmail: \"Adresse Email\",\n      customerPhone: \"Numéro de Téléphone (Optionnel)\",\n      bookingDate: \"Date Préférée\",\n      specialRequests: \"Demandes Spéciales (Optionnel)\",\n      totalPrice: \"Prix Total\",\n      depositRequired: \"Acompte Requis (10%)\",\n      submitBooking: \"Confirmer la Réservation\",\n      contactWhatsApp: \"Contacter via WhatsApp\",\n      whatsappBooking: \"Réserver via WhatsApp\",\n      bookingSuccess: \"Réservation Confirmée!\",\n      bookingSuccessMessage: \"Merci pour votre réservation! Vous recevrez un email de confirmation sous peu.\",\n      bookingId: \"ID de Réservation\",\n      backToHome: \"Retour à l'Accueil\",\n      contactInfo: \"Informations de Contact\",\n      bookingPolicies: \"Politiques de Réservation\",\n      cancellationPolicy: \"Annulation gratuite jusqu'à 24 heures avant le voyage\",\n      paymentPolicy: \"Seulement 10% d'acompte requis pour sécuriser votre réservation\",\n      safetyPolicy: \"Toutes les activités sont menées avec des guides professionnels\",\n      languageSupport: \"Support de guide multilingue disponible\",\n      viewBooking: \"Voir les Détails de la Réservation\",\n      noActivities: \"Aucune activité disponible\",\n      loadingActivities: \"Chargement des activités disponibles...\",\n    },\n    de: {\n      title: \"Buchen Sie Ihr Wüstenabenteuer\",\n      subtitle: \"Wählen Sie Ihre Aktivität und reservieren Sie Ihren Platz\",\n      selectActivity: \"Aktivität Auswählen\",\n      activityDetails: \"Aktivitätsdetails\",\n      duration: \"Dauer\",\n      groupSize: \"Gruppengröße\",\n      capacity: \"Max. Kapazität\",\n      price: \"Preis\",\n      perPerson: \"pro Person\",\n      customerInfo: \"Kundeninformationen\",\n      customerName: \"Vollständiger Name\",\n      customerEmail: \"E-Mail-Adresse\",\n      customerPhone: \"Telefonnummer (Optional)\",\n      bookingDate: \"Bevorzugtes Datum\",\n      specialRequests: \"Spezielle Wünsche (Optional)\",\n      totalPrice: \"Gesamtpreis\",\n      depositRequired: \"Anzahlung Erforderlich (10%)\",\n      submitBooking: \"Buchung Bestätigen\",\n      contactWhatsApp: \"Kontakt über WhatsApp\",\n      whatsappBooking: \"Über WhatsApp buchen\",\n      bookingSuccess: \"Buchung Bestätigt!\",\n      bookingSuccessMessage: \"Vielen Dank für Ihre Buchung! Sie erhalten in Kürze eine Bestätigungs-E-Mail.\",\n      bookingId: \"Buchungs-ID\",\n      backToHome: \"Zurück zur Startseite\",\n      contactInfo: \"Kontaktinformationen\",\n      bookingPolicies: \"Buchungsrichtlinien\",\n      cancellationPolicy: \"Kostenlose Stornierung bis 24 Stunden vor der Reise\",\n      paymentPolicy: \"Nur 10% Anzahlung erforderlich, um Ihre Buchung zu sichern\",\n      safetyPolicy: \"Alle Aktivitäten werden mit professionellen Führern durchgeführt\",\n      languageSupport: \"Mehrsprachige Führungsunterstützung verfügbar\",\n      viewBooking: \"Buchungsdetails Anzeigen\",\n      noActivities: \"Keine Aktivitäten verfügbar\",\n      loadingActivities: \"Verfügbare Aktivitäten werden geladen...\",\n    },\n    ar: {\n      title: \"احجز مغامرتك الصحراوية\",\n      subtitle: \"اختر نشاطك واحجز مكانك\",\n      selectActivity: \"اختر النشاط\",\n      activityDetails: \"تفاصيل النشاط\",\n      duration: \"المدة\",\n      groupSize: \"حجم المجموعة\",\n      capacity: \"السعة القصوى\",\n      price: \"السعر\",\n      perPerson: \"للشخص الواحد\",\n      customerInfo: \"معلومات العميل\",\n      customerName: \"الاسم الكامل\",\n      customerEmail: \"عنوان البريد الإلكتروني\",\n      customerPhone: \"رقم الهاتف (اختياري)\",\n      bookingDate: \"التاريخ المفضل\",\n      specialRequests: \"طلبات خاصة (اختياري)\",\n      totalPrice: \"السعر الإجمالي\",\n      depositRequired: \"عربون مطلوب (10%)\",\n      submitBooking: \"تأكيد الحجز\",\n      contactWhatsApp: \"التواصل عبر واتساب\",\n      whatsappBooking: \"احجز عبر واتساب\",\n      bookingSuccess: \"تم تأكيد الحجز!\",\n      bookingSuccessMessage: \"شكرًا لك على حجزك! ستتلقى رسالة تأكيد عبر البريد الإلكتروني قريبًا.\",\n      bookingId: \"رقم الحجز\",\n      backToHome: \"العودة للرئيسية\",\n      contactInfo: \"معلومات الاتصال\",\n      bookingPolicies: \"سياسات الحجز\",\n      cancellationPolicy: \"إلغاء مجاني حتى 24 ساعة قبل الرحلة\",\n      paymentPolicy: \"فقط 10% عربون مطلوب لتأمين حجزك\",\n      safetyPolicy: \"جميع الأنشطة تُقام مع مرشدين محترفين\",\n      languageSupport: \"دعم المرشد متعدد اللغات متاح\",\n      viewBooking: \"عرض تفاصيل الحجز\",\n      noActivities: \"لا توجد أنشطة متاحة\",\n      loadingActivities: \"جاري تحميل الأنشطة المتاحة...\",\n    },\n  };\n\n  const t = translations[currentLanguage as keyof typeof translations] || translations.en;\n  const isRTL = currentLanguage === 'ar';\n\n  if (bookingSuccess) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center p-4\">\n        <Card className=\"w-full max-w-md\">\n          <CardContent className=\"p-8 text-center space-y-6\">\n            <CheckCircle className=\"h-16 w-16 text-green-500 mx-auto\" />\n            <div>\n              <h2 className=\"text-2xl font-bold text-green-600 mb-2\">{t.bookingSuccess}</h2>\n              <p className=\"text-muted-foreground mb-4\">{t.bookingSuccessMessage}</p>\n              <div className=\"bg-muted p-3 rounded-lg\">\n                <div className=\"text-sm font-medium\">{t.bookingId}</div>\n                <div className=\"text-lg font-mono text-primary\">{bookingId}</div>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <Button onClick={() => setLocation(\"/\")} className=\"w-full\">\n                {t.backToHome}\n              </Button>\n              <Button \n                variant=\"outline\" \n                onClick={() => setBookingSuccess(false)} \n                className=\"w-full\"\n              >\n                {t.viewBooking}\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`min-h-screen bg-background ${isRTL ? 'rtl' : 'ltr'}`}>\n      {/* Header */}\n      <div className=\"border-b bg-card\">\n        <div className=\"container mx-auto px-4 py-6\">\n          <Button \n            variant=\"ghost\" \n            onClick={() => setLocation(\"/\")}\n            className=\"mb-4\"\n            data-testid=\"button-back-home\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            {t.backToHome}\n          </Button>\n          \n          <div className=\"text-center space-y-2\">\n            <h1 className=\"text-3xl font-bold\">{t.title}</h1>\n            <p className=\"text-muted-foreground\">{t.subtitle}</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Content */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* Activity Selection */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Calendar className=\"h-5 w-5\" />\n                  {t.selectActivity}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {isLoading ? (\n                  <div className=\"text-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4\"></div>\n                    <p className=\"text-muted-foreground\">{t.loadingActivities}</p>\n                  </div>\n                ) : activities.length === 0 ? (\n                  <div className=\"text-center py-8\">\n                    <AlertCircle className=\"h-8 w-8 text-muted-foreground mx-auto mb-4\" />\n                    <p className=\"text-muted-foreground\">{t.noActivities}</p>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {activities.map((activity) => {\n                      const title = getLocalizedText(activity.title);\n                      const price = (activity.prices as any)[currentCurrency] || (activity.prices as any).USD;\n                      const isSelected = selectedActivityId === activity.id;\n                      \n                      return (\n                        <Card \n                          key={activity.id}\n                          className={`cursor-pointer transition-all hover-elevate ${isSelected ? 'ring-2 ring-primary' : ''}`}\n                          onClick={() => handleActivitySelect(activity.id)}\n                          data-testid={`card-activity-${activity.id}`}\n                        >\n                          <CardContent className=\"p-4\">\n                            <div className=\"aspect-video bg-muted rounded-lg overflow-hidden mb-3\">\n                              <img \n                                src={activity.imageUrl || \"/api/placeholder/300/200\"} \n                                alt={title}\n                                className=\"w-full h-full object-cover\"\n                              />\n                            </div>\n                            <h3 className=\"font-semibold mb-2\">{title}</h3>\n                            <div className=\"flex items-center justify-between text-sm text-muted-foreground mb-2\">\n                              <div className=\"flex items-center gap-1\">\n                                <Clock className=\"h-4 w-4\" />\n                                {activity.duration}\n                              </div>\n                              <div className=\"flex items-center gap-1\">\n                                <Users className=\"h-4 w-4\" />\n                                {activity.groupSize}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"text-lg font-bold text-primary\">\n                                {currencySymbol}{price}\n                              </div>\n                              <Badge variant={isSelected ? \"default\" : \"outline\"}>\n                                {isSelected ? \"Selected\" : \"Select\"}\n                              </Badge>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      );\n                    })}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Customer Information Form */}\n            {selectedActivity && isBookingEnabled && (\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Users className=\"h-5 w-5\" />\n                    {t.customerInfo}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <Label htmlFor=\"customerName\">{t.customerName}</Label>\n                        <Input\n                          id=\"customerName\"\n                          {...form.register(\"customerName\")}\n                          data-testid=\"input-customer-name\"\n                        />\n                        {form.formState.errors.customerName && (\n                          <p className=\"text-sm text-destructive mt-1\">\n                            {form.formState.errors.customerName.message}\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <Label htmlFor=\"customerEmail\">{t.customerEmail}</Label>\n                        <Input\n                          id=\"customerEmail\"\n                          type=\"email\"\n                          {...form.register(\"customerEmail\")}\n                          data-testid=\"input-customer-email\"\n                        />\n                        {form.formState.errors.customerEmail && (\n                          <p className=\"text-sm text-destructive mt-1\">\n                            {form.formState.errors.customerEmail.message}\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <Label htmlFor=\"customerPhone\">{t.customerPhone}</Label>\n                        <Input\n                          id=\"customerPhone\"\n                          type=\"tel\"\n                          {...form.register(\"customerPhone\")}\n                          data-testid=\"input-customer-phone\"\n                        />\n                      </div>\n\n                      <div>\n                        <Label htmlFor=\"bookingDate\">{t.bookingDate}</Label>\n                        <Input\n                          id=\"bookingDate\"\n                          type=\"date\"\n                          min={getMinBookingDate()}\n                          {...form.register(\"bookingDate\")}\n                          data-testid=\"input-booking-date\"\n                        />\n                        {form.formState.errors.bookingDate && (\n                          <p className=\"text-sm text-destructive mt-1\">\n                            {form.formState.errors.bookingDate.message}\n                          </p>\n                        )}\n                      </div>\n\n                      <div>\n                        <Label htmlFor=\"groupSize\">{t.groupSize}</Label>\n                        <Select \n                          value={form.watch(\"groupSize\").toString()} \n                          onValueChange={(value) => form.setValue(\"groupSize\", parseInt(value))}\n                        >\n                          <SelectTrigger data-testid=\"select-group-size\">\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {Array.from({ length: Math.min(selectedActivity.capacity, 20) }, (_, i) => i + 1).map((num) => (\n                              <SelectItem key={num} value={num.toString()}>\n                                {num} {num === 1 ? 'person' : 'people'}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        {form.formState.errors.groupSize && (\n                          <p className=\"text-sm text-destructive mt-1\">\n                            {form.formState.errors.groupSize.message}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div>\n                      <Label htmlFor=\"specialRequests\">{t.specialRequests}</Label>\n                      <Textarea\n                        id=\"specialRequests\"\n                        {...form.register(\"specialRequests\")}\n                        rows={3}\n                        data-testid=\"textarea-special-requests\"\n                      />\n                    </div>\n\n                    {/* Booking Action Buttons */}\n                    <div className=\"space-y-3\">\n                      <Button \n                        type=\"submit\" \n                        disabled={bookingMutation.isPending}\n                        className=\"w-full\"\n                        size=\"lg\"\n                        data-testid=\"button-submit-booking\"\n                      >\n                        <CreditCard className=\"h-4 w-4 mr-2\" />\n                        {bookingMutation.isPending ? \n                          \"Processing...\" : \n                          `${t.submitBooking} (${currencySymbol}${calculateTotalPrice().toFixed(2)})`\n                        }\n                      </Button>\n                      \n                      <Button \n                        type=\"button\"\n                        variant=\"outline\"\n                        onClick={handleWhatsAppBooking}\n                        disabled={!selectedActivity || !form.watch(\"customerName\") || !form.watch(\"bookingDate\")}\n                        className=\"w-full bg-green-50 border-green-200 text-green-700 hover:bg-green-100 hover:border-green-300\"\n                        size=\"lg\"\n                        data-testid=\"button-whatsapp-booking\"\n                      >\n                        <MessageCircle className=\"h-4 w-4 mr-2\" />\n                        {t.whatsappBooking}\n                      </Button>\n                    </div>\n                  </form>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          {/* Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Selected Activity Details */}\n            {selectedActivity && (\n              <Card>\n                <CardHeader>\n                  <CardTitle>{t.activityDetails}</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <h3 className=\"font-semibold mb-2\">{getLocalizedText(selectedActivity.title)}</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {getLocalizedText(selectedActivity.description).substring(0, 100)}...\n                    </p>\n                  </div>\n                  <Separator />\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">{t.duration}</span>\n                      <span className=\"text-sm font-medium\">{selectedActivity.duration}</span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">{t.capacity}</span>\n                      <span className=\"text-sm font-medium\">{selectedActivity.capacity} people</span>\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm\">{t.price}</span>\n                      <span className=\"text-sm font-medium\">\n                        {currencySymbol}{(selectedActivity.prices as any)[currentCurrency] || (selectedActivity.prices as any).USD} {t.perPerson}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  {form.watch(\"groupSize\") > 0 && (\n                    <>\n                      <Separator />\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm\">{t.totalPrice}</span>\n                          <span className=\"text-lg font-bold text-primary\">\n                            {currencySymbol}{calculateTotalPrice().toFixed(2)}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between text-sm\">\n                          <span>{t.depositRequired}</span>\n                          <span className=\"font-medium text-green-600\">\n                            {currencySymbol}{calculateDepositAmount().toFixed(2)}\n                          </span>\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Booking Disabled Message */}\n            {selectedActivity && !isBookingEnabled && (\n              <Card>\n                <CardContent className=\"p-8 text-center\">\n                  <AlertCircle className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-semibold mb-2\">\n                    {currentLanguage === 'en' && \"Booking Currently Unavailable\"}\n                    {currentLanguage === 'fr' && \"Réservation Actuellement Indisponible\"}\n                    {currentLanguage === 'de' && \"Buchung Derzeit Nicht Verfügbar\"}\n                    {currentLanguage === 'ar' && \"الحجز غير متاح حاليا\"}\n                  </h3>\n                  <p className=\"text-muted-foreground\">\n                    {currentLanguage === 'en' && \"New bookings are temporarily disabled. Please contact us directly for assistance.\"}\n                    {currentLanguage === 'fr' && \"Les nouvelles réservations sont temporairement désactivées. Veuillez nous contacter directement pour assistance.\"}\n                    {currentLanguage === 'de' && \"Neue Buchungen sind vorübergehend deaktiviert. Bitte kontaktieren Sie uns direkt für Unterstützung.\"}\n                    {currentLanguage === 'ar' && \"الحجوزات الجديدة معطلة مؤقتا. يرجى الاتصال بنا مباشرة للمساعدة.\"}\n                  </p>\n                </CardContent>\n              </Card>\n            )}\n\n            {/* Contact Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Phone className=\"h-5 w-5\" />\n                  {t.contactInfo}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"flex items-center gap-3\">\n                  <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">\n                    {settings?.booking_info?.contactPhone || settings?.contact_details?.phone || \"+216 40 676 420\"}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <Mail className=\"h-4 w-4 text-muted-foreground\" />\n                  <span className=\"text-sm\">\n                    {settings?.booking_info?.contactEmail || settings?.contact_details?.email || \"info@sghayratours.com\"}\n                  </span>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                  <span className=\"text-sm\">{getLocalizedText(settings?.contact_details?.address) || \"Douz, Tunisia\"}</span>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Booking Policies */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Shield className=\"h-5 w-5\" />\n                  {t.bookingPolicies}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"flex items-start gap-3\">\n                  <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5\" />\n                  <span className=\"text-sm\">\n                    {getPolicyText('cancellationPolicy', t.cancellationPolicy)}\n                  </span>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <CreditCard className=\"h-4 w-4 text-blue-500 mt-0.5\" />\n                  <span className=\"text-sm\">\n                    {getDepositText()}\n                  </span>\n                </div>\n                <div className=\"flex items-start gap-3\">\n                  <Shield className=\"h-4 w-4 text-orange-500 mt-0.5\" />\n                  <span className=\"text-sm\">\n                    {getPolicyText('termsAndConditions', t.safetyPolicy)}\n                  </span>\n                </div>\n                {settings?.booking_info?.bookingInstructions && getLocalizedText(settings.booking_info.bookingInstructions) && (\n                  <div className=\"flex items-start gap-3\">\n                    <Globe className=\"h-4 w-4 text-purple-500 mt-0.5\" />\n                    <span className=\"text-sm\">\n                      {getLocalizedText(settings.booking_info.bookingInstructions)}\n                    </span>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":36089},"client/src/components/ObjectUploader.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport type { ReactNode } from \"react\";\nimport Uppy from \"@uppy/core\";\nimport { DashboardModal } from \"@uppy/react\";\nimport AwsS3 from \"@uppy/aws-s3\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface ObjectUploaderProps {\n  maxNumberOfFiles?: number;\n  maxFileSize?: number;\n  allowedFileTypes?: string[];\n  onGetUploadParameters: () => Promise<{\n    method: \"PUT\";\n    url: string;\n  }>;\n  onComplete?: (\n    result: UploadResult<Record<string, unknown>, Record<string, unknown>>\n  ) => void;\n  buttonClassName?: string;\n  children: ReactNode;\n}\n\n/**\n * A file upload component that renders as a button and provides a modal interface for\n * file management.\n * \n * Features:\n * - Renders as a customizable button that opens a file upload modal\n * - Provides a modal interface for:\n *   - File selection\n *   - File preview\n *   - Upload progress tracking\n *   - Upload status display\n * \n * The component uses Uppy under the hood to handle all file upload functionality.\n * All file management features are automatically handled by the Uppy dashboard modal.\n * \n * @param props - Component props\n * @param props.maxNumberOfFiles - Maximum number of files allowed to be uploaded\n *   (default: 1)\n * @param props.maxFileSize - Maximum file size in bytes (default: 10MB)\n * @param props.onGetUploadParameters - Function to get upload parameters (method and URL).\n *   Typically used to fetch a presigned URL from the backend server for direct-to-S3\n *   uploads.\n * @param props.onComplete - Callback function called when upload is complete. Typically\n *   used to make post-upload API calls to update server state and set object ACL\n *   policies.\n * @param props.buttonClassName - Optional CSS class name for the button\n * @param props.children - Content to be rendered inside the button\n */\nexport function ObjectUploader({\n  maxNumberOfFiles = 1,\n  maxFileSize = 10485760, // 10MB default\n  allowedFileTypes,\n  onGetUploadParameters,\n  onComplete,\n  buttonClassName,\n  children,\n  'data-testid': dataTestId,\n}: ObjectUploaderProps) {\n  const [showModal, setShowModal] = useState(false);\n  const [uppy] = useState(() =>\n    new Uppy({\n      restrictions: {\n        maxNumberOfFiles,\n        maxFileSize,\n        allowedFileTypes: allowedFileTypes || undefined,\n      },\n      autoProceed: false,\n    })\n      .use(AwsS3, {\n        shouldUseMultipart: false,\n        getUploadParameters: onGetUploadParameters,\n      })\n      .on(\"complete\", (result) => {\n        onComplete?.(result);\n      })\n  );\n\n  // Cleanup Uppy instance on unmount\n  useEffect(() => {\n    return () => {\n      if (uppy && typeof uppy.destroy === 'function') {\n        uppy.destroy();\n      }\n    };\n  }, [uppy]);\n\n  return (\n    <div>\n      <Button \n        onClick={() => setShowModal(true)} \n        className={buttonClassName}\n        data-testid={dataTestId}\n      >\n        {children}\n      </Button>\n\n      <DashboardModal\n        uppy={uppy}\n        open={showModal}\n        onRequestClose={() => setShowModal(false)}\n        proudlyDisplayPoweredByUppy={false}\n      />\n    </div>\n  );\n}","size_bytes":3174},"server/objectAcl.ts":{"content":"import { File } from \"@google-cloud/storage\";\n\nconst ACL_POLICY_METADATA_KEY = \"custom:aclPolicy\";\n\n// The type of the access group.\nexport enum ObjectAccessGroupType {\n  // Example types can be added as needed\n}\n\n// The logic user group that can access the object.\nexport interface ObjectAccessGroup {\n  type: ObjectAccessGroupType;\n  id: string;\n}\n\nexport enum ObjectPermission {\n  READ = \"read\",\n  WRITE = \"write\",\n}\n\nexport interface ObjectAclRule {\n  group: ObjectAccessGroup;\n  permission: ObjectPermission;\n}\n\n// The ACL policy of the object.\nexport interface ObjectAclPolicy {\n  owner: string;\n  visibility: \"public\" | \"private\";\n  aclRules?: Array<ObjectAclRule>;\n}\n\n// Check if the requested permission is allowed based on the granted permission.\nfunction isPermissionAllowed(\n  requested: ObjectPermission,\n  granted: ObjectPermission,\n): boolean {\n  // Users granted with read or write permissions can read the object.\n  if (requested === ObjectPermission.READ) {\n    return [ObjectPermission.READ, ObjectPermission.WRITE].includes(granted);\n  }\n\n  // Only users granted with write permissions can write the object.\n  return granted === ObjectPermission.WRITE;\n}\n\n// The base class for all access groups.\nabstract class BaseObjectAccessGroup implements ObjectAccessGroup {\n  constructor(\n    public readonly type: ObjectAccessGroupType,\n    public readonly id: string,\n  ) {}\n\n  // Check if the user is a member of the group.\n  public abstract hasMember(userId: string): Promise<boolean>;\n}\n\nfunction createObjectAccessGroup(\n  group: ObjectAccessGroup,\n): BaseObjectAccessGroup {\n  switch (group.type) {\n    // For now, no specific group types implemented\n    default:\n      throw new Error(`Unknown access group type: ${group.type}`);\n  }\n}\n\n// Sets the ACL policy to the object metadata.\nexport async function setObjectAclPolicy(\n  objectFile: File,\n  aclPolicy: ObjectAclPolicy,\n): Promise<void> {\n  const [exists] = await objectFile.exists();\n  if (!exists) {\n    throw new Error(`Object not found: ${objectFile.name}`);\n  }\n\n  await objectFile.setMetadata({\n    metadata: {\n      [ACL_POLICY_METADATA_KEY]: JSON.stringify(aclPolicy),\n    },\n  });\n}\n\n// Gets the ACL policy from the object metadata.\nexport async function getObjectAclPolicy(\n  objectFile: File,\n): Promise<ObjectAclPolicy | null> {\n  const [metadata] = await objectFile.getMetadata();\n  const aclPolicy = metadata?.metadata?.[ACL_POLICY_METADATA_KEY];\n  if (!aclPolicy) {\n    return null;\n  }\n  return JSON.parse(aclPolicy as string);\n}\n\n// Checks if the user can access the object.\nexport async function canAccessObject({\n  userId,\n  objectFile,\n  requestedPermission,\n}: {\n  userId?: string;\n  objectFile: File;\n  requestedPermission: ObjectPermission;\n}): Promise<boolean> {\n  // When this function is called, the acl policy is required.\n  const aclPolicy = await getObjectAclPolicy(objectFile);\n  if (!aclPolicy) {\n    return false;\n  }\n\n  // Public objects are always accessible for read.\n  if (\n    aclPolicy.visibility === \"public\" &&\n    requestedPermission === ObjectPermission.READ\n  ) {\n    return true;\n  }\n\n  // Access control requires the user id.\n  if (!userId) {\n    return false;\n  }\n\n  // The owner of the object can always access it.\n  if (aclPolicy.owner === userId) {\n    return true;\n  }\n\n  // Go through the ACL rules to check if the user has the required permission.\n  for (const rule of aclPolicy.aclRules || []) {\n    const accessGroup = createObjectAccessGroup(rule.group);\n    if (\n      (await accessGroup.hasMember(userId)) &&\n      isPermissionAllowed(requestedPermission, rule.permission)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n}","size_bytes":3660},"server/objectStorage.ts":{"content":"import { Storage, File } from \"@google-cloud/storage\";\nimport { Response } from \"express\";\nimport { randomUUID } from \"crypto\";\nimport {\n  ObjectAclPolicy,\n  ObjectPermission,\n  canAccessObject,\n  getObjectAclPolicy,\n  setObjectAclPolicy,\n} from \"./objectAcl\";\n\nconst REPLIT_SIDECAR_ENDPOINT = \"http://127.0.0.1:1106\";\n\n// The object storage client is used to interact with the object storage service.\nexport const objectStorageClient = new Storage({\n  credentials: {\n    audience: \"replit\",\n    subject_token_type: \"access_token\",\n    token_url: `${REPLIT_SIDECAR_ENDPOINT}/token`,\n    type: \"external_account\",\n    credential_source: {\n      url: `${REPLIT_SIDECAR_ENDPOINT}/credential`,\n      format: {\n        type: \"json\",\n        subject_token_field_name: \"access_token\",\n      },\n    },\n    universe_domain: \"googleapis.com\",\n  },\n  projectId: \"\",\n});\n\nexport class ObjectNotFoundError extends Error {\n  constructor() {\n    super(\"Object not found\");\n    this.name = \"ObjectNotFoundError\";\n    Object.setPrototypeOf(this, ObjectNotFoundError.prototype);\n  }\n}\n\n// The object storage service is used to interact with the object storage service.\nexport class ObjectStorageService {\n  constructor() {}\n\n  // Gets the public object search paths.\n  getPublicObjectSearchPaths(): Array<string> {\n    const pathsStr = process.env.PUBLIC_OBJECT_SEARCH_PATHS || \"\";\n    const paths = Array.from(\n      new Set(\n        pathsStr\n          .split(\",\")\n          .map((path) => path.trim())\n          .filter((path) => path.length > 0)\n      )\n    );\n    if (paths.length === 0) {\n      throw new Error(\n        \"PUBLIC_OBJECT_SEARCH_PATHS not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PUBLIC_OBJECT_SEARCH_PATHS env var (comma-separated paths).\"\n      );\n    }\n    return paths;\n  }\n\n  // Gets the private object directory.\n  getPrivateObjectDir(): string {\n    const dir = process.env.PRIVATE_OBJECT_DIR || \"\";\n    if (!dir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n    return dir;\n  }\n\n  // Search for a public object from the search paths.\n  async searchPublicObject(filePath: string): Promise<File | null> {\n    for (const searchPath of this.getPublicObjectSearchPaths()) {\n      const fullPath = `${searchPath}/${filePath}`;\n\n      // Full path format: /<bucket_name>/<object_name>\n      const { bucketName, objectName } = parseObjectPath(fullPath);\n      const bucket = objectStorageClient.bucket(bucketName);\n      const file = bucket.file(objectName);\n\n      // Check if file exists\n      const [exists] = await file.exists();\n      if (exists) {\n        return file;\n      }\n    }\n\n    return null;\n  }\n\n  // Downloads an object to the response.\n  async downloadObject(file: File, res: Response, cacheTtlSec: number = 3600) {\n    try {\n      // Get file metadata\n      const [metadata] = await file.getMetadata();\n      // Get the ACL policy for the object.\n      const aclPolicy = await getObjectAclPolicy(file);\n      const isPublic = aclPolicy?.visibility === \"public\";\n      // Set appropriate headers\n      res.set({\n        \"Content-Type\": metadata.contentType || \"application/octet-stream\",\n        \"Content-Length\": metadata.size,\n        \"Cache-Control\": `${\n          isPublic ? \"public\" : \"private\"\n        }, max-age=${cacheTtlSec}`,\n      });\n\n      // Stream the file to the response\n      const stream = file.createReadStream();\n\n      stream.on(\"error\", (err: any) => {\n        console.error(\"Stream error:\", err);\n        if (!res.headersSent) {\n          res.status(500).json({ error: \"Error streaming file\" });\n        }\n      });\n\n      stream.pipe(res);\n    } catch (error) {\n      console.error(\"Error downloading file:\", error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: \"Error downloading file\" });\n      }\n    }\n  }\n\n  // Gets the upload URL for an object entity.\n  async getObjectEntityUploadURL(): Promise<string> {\n    const privateObjectDir = this.getPrivateObjectDir();\n    if (!privateObjectDir) {\n      throw new Error(\n        \"PRIVATE_OBJECT_DIR not set. Create a bucket in 'Object Storage' \" +\n          \"tool and set PRIVATE_OBJECT_DIR env var.\"\n      );\n    }\n\n    const objectId = randomUUID();\n    const fullPath = `${privateObjectDir}/uploads/${objectId}`;\n\n    const { bucketName, objectName } = parseObjectPath(fullPath);\n\n    // Sign URL for PUT method with TTL\n    return signObjectURL({\n      bucketName,\n      objectName,\n      method: \"PUT\",\n      ttlSec: 900,\n    });\n  }\n\n  // Gets the object entity file from the object path.\n  async getObjectEntityFile(objectPath: string): Promise<File> {\n    if (!objectPath.startsWith(\"/objects/\")) {\n      throw new ObjectNotFoundError();\n    }\n\n    const parts = objectPath.slice(1).split(\"/\");\n    if (parts.length < 2) {\n      throw new ObjectNotFoundError();\n    }\n\n    const entityId = parts.slice(1).join(\"/\");\n    let entityDir = this.getPrivateObjectDir();\n    if (!entityDir.endsWith(\"/\")) {\n      entityDir = `${entityDir}/`;\n    }\n    const objectEntityPath = `${entityDir}${entityId}`;\n    const { bucketName, objectName } = parseObjectPath(objectEntityPath);\n    const bucket = objectStorageClient.bucket(bucketName);\n    const objectFile = bucket.file(objectName);\n    const [exists] = await objectFile.exists();\n    if (!exists) {\n      throw new ObjectNotFoundError();\n    }\n    return objectFile;\n  }\n\n  normalizeObjectEntityPath(\n    rawPath: string,\n  ): string {\n    if (!rawPath.startsWith(\"https://storage.googleapis.com/\")) {\n      return rawPath;\n    }\n  \n    // Extract the path from the URL by removing query parameters and domain\n    const url = new URL(rawPath);\n    const rawObjectPath = url.pathname;\n  \n    let objectEntityDir = this.getPrivateObjectDir();\n    if (!objectEntityDir.endsWith(\"/\")) {\n      objectEntityDir = `${objectEntityDir}/`;\n    }\n  \n    if (!rawObjectPath.startsWith(objectEntityDir)) {\n      return rawObjectPath;\n    }\n  \n    // Extract the entity ID from the path\n    const entityId = rawObjectPath.slice(objectEntityDir.length);\n    return `/objects/${entityId}`;\n  }\n\n  // Tries to set the ACL policy for the object entity and return the normalized path.\n  async trySetObjectEntityAclPolicy(\n    rawPath: string,\n    aclPolicy: ObjectAclPolicy\n  ): Promise<string> {\n    const normalizedPath = this.normalizeObjectEntityPath(rawPath);\n    if (!normalizedPath.startsWith(\"/\")) {\n      return normalizedPath;\n    }\n\n    const objectFile = await this.getObjectEntityFile(normalizedPath);\n    await setObjectAclPolicy(objectFile, aclPolicy);\n    return normalizedPath;\n  }\n\n  // Checks if the user can access the object entity.\n  async canAccessObjectEntity({\n    userId,\n    objectFile,\n    requestedPermission,\n  }: {\n    userId?: string;\n    objectFile: File;\n    requestedPermission?: ObjectPermission;\n  }): Promise<boolean> {\n    return canAccessObject({\n      userId,\n      objectFile,\n      requestedPermission: requestedPermission ?? ObjectPermission.READ,\n    });\n  }\n}\n\nfunction parseObjectPath(path: string): {\n  bucketName: string;\n  objectName: string;\n} {\n  if (!path.startsWith(\"/\")) {\n    path = `/${path}`;\n  }\n  const pathParts = path.split(\"/\");\n  if (pathParts.length < 3) {\n    throw new Error(\"Invalid path: must contain at least a bucket name\");\n  }\n\n  const bucketName = pathParts[1];\n  const objectName = pathParts.slice(2).join(\"/\");\n\n  return {\n    bucketName,\n    objectName,\n  };\n}\n\nasync function signObjectURL({\n  bucketName,\n  objectName,\n  method,\n  ttlSec,\n}: {\n  bucketName: string;\n  objectName: string;\n  method: \"GET\" | \"PUT\" | \"DELETE\" | \"HEAD\";\n  ttlSec: number;\n}): Promise<string> {\n  const request = {\n    bucket_name: bucketName,\n    object_name: objectName,\n    method,\n    expires_at: new Date(Date.now() + ttlSec * 1000).toISOString(),\n  };\n  const response = await fetch(\n    `${REPLIT_SIDECAR_ENDPOINT}/object-storage/signed-object-url`,\n    {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(request),\n    }\n  );\n  if (!response.ok) {\n    throw new Error(\n      `Failed to sign object URL, errorcode: ${response.status}, ` +\n        `make sure you're running on Replit`\n    );\n  }\n\n  const { signed_url: signedURL } = await response.json();\n  return signedURL;\n}","size_bytes":8412},"client/src/pages/AdminNewActivity.tsx":{"content":"import { useState } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { ArrowLeft, Save, Upload } from \"lucide-react\";\nimport { ObjectUploader } from \"@/components/ObjectUploader\";\nimport type { UploadResult } from \"@uppy/core\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\n\n// Form schema\nconst newActivitySchema = z.object({\n  category: z.string().min(1, \"Category is required\"),\n  duration: z.string().min(1, \"Duration is required\"),\n  groupSize: z.string().min(1, \"Group size is required\"),\n  imageUrl: z.string().optional(),\n  isActive: z.boolean().default(true),\n  title: z.object({\n    en: z.string().min(1, \"English title is required\"),\n    fr: z.string().min(1, \"French title is required\"),\n    de: z.string().min(1, \"German title is required\"),\n    ar: z.string().min(1, \"Arabic title is required\"),\n  }),\n  description: z.object({\n    en: z.string().min(1, \"English description is required\"),\n    fr: z.string().min(1, \"French description is required\"),\n    de: z.string().min(1, \"German description is required\"),\n    ar: z.string().min(1, \"Arabic description is required\"),\n  }),\n  highlights: z.object({\n    en: z.array(z.string()).default([]),\n    fr: z.array(z.string()).default([]),\n    de: z.array(z.string()).default([]),\n    ar: z.array(z.string()).default([]),\n  }),\n  prices: z.object({\n    TND: z.number().min(0, \"TND price must be non-negative\"),\n    USD: z.number().min(0, \"USD price must be non-negative\"),\n    EUR: z.number().min(0, \"EUR price must be non-negative\"),\n  }),\n});\n\ntype NewActivityFormData = z.infer<typeof newActivitySchema>;\n\nconst categories = [\n  \"Desert Adventure\",\n  \"Cultural Experience\", \n  \"Camel Trekking\",\n  \"Camping\",\n  \"Photography Tour\",\n  \"Traditional Dining\",\n  \"Stargazing\",\n  \"Sandboarding\"\n];\n\nexport default function AdminNewActivity() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  // Upload helper functions\n  const handleGetUploadParameters = async () => {\n    const response = await fetch('/api/admin/objects/upload', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      credentials: 'include',\n    });\n    \n    if (!response.ok) {\n      throw new Error('Failed to get upload URL');\n    }\n    \n    const data = await response.json();\n    return {\n      method: 'PUT' as const,\n      url: data.uploadURL,\n    };\n  };\n\n  const handleImageUploadComplete = async (result: UploadResult<Record<string, unknown>, Record<string, unknown>>) => {\n    try {\n      if (result.successful && result.successful.length > 0) {\n        const uploadedFile = result.successful[0];\n        const fileURL = uploadedFile.uploadURL;\n        \n        // Set ACL policy for the uploaded file\n        const response = await fetch('/api/admin/objects', {\n          method: 'PUT',\n          headers: { 'Content-Type': 'application/json' },\n          credentials: 'include',\n          body: JSON.stringify({\n            fileURL: fileURL,\n            visibility: 'public',\n            fileType: uploadedFile.type || 'image'\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error('Failed to process uploaded file');\n        }\n\n        const data = await response.json();\n        const objectPath = data.objectPath;\n        \n        // Update the image URL field\n        form.setValue('imageUrl', objectPath);\n        \n        toast({\n          title: \"Image Uploaded\",\n          description: \"Activity image uploaded successfully\",\n        });\n      }\n    } catch (error) {\n      console.error('Error processing upload:', error);\n      toast({\n        title: \"Upload Error\",\n        description: \"Failed to process uploaded image\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const form = useForm<NewActivityFormData>({\n    resolver: zodResolver(newActivitySchema),\n    defaultValues: {\n      category: \"\",\n      duration: \"\",\n      groupSize: \"\",\n      imageUrl: \"\",\n      isActive: true,\n      title: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      description: { en: \"\", fr: \"\", de: \"\", ar: \"\" },\n      highlights: { en: [], fr: [], de: [], ar: [] },\n      prices: { TND: 0, USD: 0, EUR: 0 },\n    },\n  });\n\n  // API helper with auth\n  const authenticatedApiRequest = async (method: string, endpoint: string, body?: any) => {\n    const options: RequestInit = {\n      method,\n      credentials: \"include\",\n      headers: {\n        'Accept': 'application/json',\n      },\n    };\n    \n    if (method !== \"GET\" && body) {\n      options.headers = {\n        ...options.headers,\n        'Content-Type': 'application/json',\n      };\n      options.body = JSON.stringify(body);\n    }\n    \n    const response = await fetch(endpoint, options);\n    \n    if (response.status === 401) {\n      localStorage.removeItem(\"admin_user\");\n      setLocation(\"/admin/login\");\n      throw new Error(\"Unauthorized\");\n    }\n    \n    return response;\n  };\n\n  const createActivityMutation = useMutation({\n    mutationFn: async (data: NewActivityFormData) => {\n      const response = await authenticatedApiRequest(\"POST\", \"/api/admin/activities\", data);\n      if (!response.ok) {\n        throw new Error(\"Failed to create activity\");\n      }\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"Success\",\n        description: \"Activity created successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/activities\"] });\n      setLocation(\"/admin/activities\");\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: `Failed to create activity: ${error.message}`,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: NewActivityFormData) => {\n    createActivityMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background p-8\">\n      <div className=\"max-w-4xl mx-auto\">\n        {/* Header */}\n        <div className=\"flex items-center gap-4 mb-8\">\n          <Button \n            variant=\"outline\" \n            size=\"icon\"\n            onClick={() => setLocation(\"/admin/activities\")}\n            data-testid=\"button-back\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n          </Button>\n          <div>\n            <h1 className=\"text-3xl font-bold\">Create New Activity</h1>\n            <p className=\"text-muted-foreground\">Add a new tourism activity to your offerings</p>\n          </div>\n        </div>\n\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-8\">\n            {/* Basic Information */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Basic Information</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"category\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Category</FormLabel>\n                        <Select onValueChange={field.onChange} defaultValue={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-category\">\n                              <SelectValue placeholder=\"Select a category\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {categories.map((category) => (\n                              <SelectItem key={category} value={category}>\n                                {category}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"duration\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Duration</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"e.g., 2 hours, Full day\" data-testid=\"input-duration\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"groupSize\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Group Size</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"e.g., 2-8 people, Up to 15\" data-testid=\"input-group-size\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"imageUrl\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Activity Image</FormLabel>\n                        <div className=\"space-y-2\">\n                          <FormControl>\n                            <Input {...field} placeholder=\"Image URL or upload below\" data-testid=\"input-image-url\" />\n                          </FormControl>\n                          <ObjectUploader\n                            maxNumberOfFiles={1}\n                            maxFileSize={10485760} // 10MB\n                            allowedFileTypes={['.jpg', '.jpeg', '.png', '.webp']}\n                            onGetUploadParameters={handleGetUploadParameters}\n                            onComplete={handleImageUploadComplete}\n                            buttonClassName=\"w-full\"\n                            data-testid=\"button-upload-activity-image\"\n                          >\n                            <Upload className=\"h-4 w-4 mr-2\" />\n                            Upload Activity Image\n                          </ObjectUploader>\n                          {field.value && (\n                            <div className=\"text-sm text-muted-foreground\">\n                              Current: {field.value}\n                            </div>\n                          )}\n                        </div>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"isActive\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex flex-row items-center justify-between rounded-lg border p-4\">\n                      <div className=\"space-y-0.5\">\n                        <FormLabel className=\"text-base\">Active</FormLabel>\n                        <div className=\"text-sm text-muted-foreground\">\n                          Make this activity visible to customers\n                        </div>\n                      </div>\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-active\"\n                        />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n              </CardContent>\n            </Card>\n\n            {/* Titles */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Titles</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"title.en\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>English</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"Activity title in English\" data-testid=\"input-title-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"title.fr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>French</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"Titre de l'activité en français\" data-testid=\"input-title-fr\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"title.de\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>German</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"Aktivitätstitel auf Deutsch\" data-testid=\"input-title-de\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"title.ar\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Arabic</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"عنوان النشاط بالعربية\" dir=\"rtl\" data-testid=\"input-title-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Descriptions */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Descriptions</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"description.en\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>English</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} placeholder=\"Detailed description in English\" rows={4} data-testid=\"textarea-description-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description.fr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>French</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} placeholder=\"Description détaillée en français\" rows={4} data-testid=\"textarea-description-fr\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description.de\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>German</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} placeholder=\"Detaillierte Beschreibung auf Deutsch\" rows={4} data-testid=\"textarea-description-de\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"description.ar\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Arabic</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} placeholder=\"وصف مفصل بالعربية\" rows={4} dir=\"rtl\" data-testid=\"textarea-description-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Pricing */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Pricing</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <FormField\n                    control={form.control}\n                    name=\"prices.TND\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Price in TND</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            min=\"0\" \n                            step=\"0.01\"\n                            onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                            data-testid=\"input-price-tnd\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"prices.USD\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Price in USD</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            min=\"0\" \n                            step=\"0.01\"\n                            onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                            data-testid=\"input-price-usd\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n\n                  <FormField\n                    control={form.control}\n                    name=\"prices.EUR\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Price in EUR</FormLabel>\n                        <FormControl>\n                          <Input \n                            {...field} \n                            type=\"number\" \n                            min=\"0\" \n                            step=\"0.01\"\n                            onChange={(e) => field.onChange(parseFloat(e.target.value) || 0)}\n                            data-testid=\"input-price-eur\" \n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Submit Button */}\n            <div className=\"flex justify-end gap-4\">\n              <Button \n                type=\"button\" \n                variant=\"outline\" \n                onClick={() => setLocation(\"/admin/activities\")}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button \n                type=\"submit\" \n                disabled={createActivityMutation.isPending}\n                data-testid=\"button-save\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {createActivityMutation.isPending ? \"Creating...\" : \"Create Activity\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </div>\n    </div>\n  );\n}","size_bytes":21168},"client/src/components/LocationDisplay.tsx":{"content":"import { MapPin, ExternalLink } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { cn } from \"@/lib/utils\";\n\ninterface LocationInfo {\n  address: {\n    en: string;\n    fr: string;\n    de: string;\n    ar: string;\n  };\n  latitude: number;\n  longitude: number;\n  googleMapsUrl?: string;\n  isActive?: boolean;\n}\n\ninterface LocationDisplayProps {\n  locationInfo: LocationInfo;\n  language?: 'en' | 'fr' | 'de' | 'ar';\n  variant?: 'full' | 'compact' | 'inline';\n  className?: string;\n  showMapButton?: boolean;\n}\n\nexport function LocationDisplay({\n  locationInfo,\n  language = 'en',\n  variant = 'full',\n  className,\n  showMapButton = true\n}: LocationDisplayProps) {\n  const { address, latitude, longitude, googleMapsUrl, isActive } = locationInfo;\n  \n  // Don't render if not active or no address provided (with fallback)\n  const addressToDisplay = address[language] || address.en || Object.values(address).find(addr => addr?.trim()) || '';\n  \n  if (!isActive || !addressToDisplay) {\n    return null;\n  }\n\n  const handleOpenMap = () => {\n    // Try to detect the user's platform and preferred map app\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n    \n    let mapUrl = '';\n    \n    if (googleMapsUrl) {\n      // Use custom Google Maps URL if provided\n      mapUrl = googleMapsUrl;\n    } else if (Number.isFinite(latitude) && Number.isFinite(longitude)) {\n      if (isIOS) {\n        // Apple Maps for iOS devices - use universal URL\n        mapUrl = `https://maps.apple.com/?q=${latitude},${longitude}`;\n      } else if (isMobile) {\n        // Google Maps app for Android\n        mapUrl = `geo:${latitude},${longitude}?q=${latitude},${longitude}`;\n      } else {\n        // Google Maps web for desktop - use universal query format\n        mapUrl = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`;\n      }\n    } else {\n      // Fallback to address search with proper address fallback\n      const addressToUse = address[language] || address.en || Object.values(address).find(addr => addr?.trim()) || '';\n      const encodedAddress = encodeURIComponent(addressToUse);\n      \n      if (isIOS) {\n        mapUrl = `https://maps.apple.com/?q=${encodedAddress}`;\n      } else if (isMobile) {\n        mapUrl = `geo:0,0?q=${encodedAddress}`;\n      } else {\n        mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodedAddress}`;\n      }\n    }\n    \n    // Open the map URL with security measures\n    window.open(mapUrl, '_blank', 'noopener,noreferrer');\n  };\n\n  if (variant === 'inline') {\n    return (\n      <div className={cn(\"flex items-center gap-2 text-sm\", className)}>\n        <MapPin className=\"h-4 w-4 text-muted-foreground flex-shrink-0\" />\n        <span className=\"text-muted-foreground\">{addressToDisplay}</span>\n        {showMapButton && (\n          <Button \n            variant=\"ghost\" \n            size=\"sm\" \n            onClick={handleOpenMap}\n            className=\"p-1 h-auto hover-elevate\"\n            data-testid=\"button-open-map-inline\"\n          >\n            <ExternalLink className=\"h-3 w-3\" />\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  if (variant === 'compact') {\n    return (\n      <div className={cn(\"space-y-2\", className)}>\n        <div className=\"flex items-start gap-2\">\n          <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5 flex-shrink-0\" />\n          <div className=\"text-sm\">\n            <p className=\"text-muted-foreground leading-relaxed\">\n              {addressToDisplay}\n            </p>\n          </div>\n        </div>\n        {showMapButton && (\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={handleOpenMap}\n            className=\"w-full hover-elevate active-elevate-2\"\n            data-testid=\"button-open-map-compact\"\n          >\n            <MapPin className=\"h-4 w-4 mr-2\" />\n            Open in Maps\n          </Button>\n        )}\n      </div>\n    );\n  }\n\n  // Full variant (default)\n  return (\n    <Card className={cn(\"\", className)}>\n      <CardContent className=\"pt-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center gap-2\">\n            <MapPin className=\"h-5 w-5 text-primary\" />\n            <h3 className=\"font-medium\">Our Location</h3>\n          </div>\n          \n          <div className=\"text-sm text-muted-foreground leading-relaxed\">\n            {addressToDisplay}\n          </div>\n          \n          {showMapButton && (\n            <div className=\"flex gap-2\">\n              <Button \n                onClick={handleOpenMap}\n                className=\"flex-1 hover-elevate active-elevate-2\"\n                data-testid=\"button-open-map-full\"\n              >\n                <MapPin className=\"h-4 w-4 mr-2\" />\n                Open in Maps\n              </Button>\n              \n              {googleMapsUrl && (\n                <Button \n                  variant=\"outline\"\n                  onClick={() => window.open(googleMapsUrl, '_blank', 'noopener,noreferrer')}\n                  className=\"hover-elevate active-elevate-2\"\n                  data-testid=\"button-open-google-maps\"\n                >\n                  <ExternalLink className=\"h-4 w-4 mr-2\" />\n                  Google Maps\n                </Button>\n              )}\n            </div>\n          )}\n          \n          {Number.isFinite(latitude) && Number.isFinite(longitude) && (\n            <div className=\"text-xs text-muted-foreground pt-2 border-t\">\n              Coordinates: {latitude.toFixed(6)}, {longitude.toFixed(6)}\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","size_bytes":5787},"client/src/components/MapLocationDisplay.tsx":{"content":"import { useSiteSettings } from \"@/hooks/use-site-settings\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MapLocationDisplayProps {\n  language: 'en' | 'fr' | 'de' | 'ar';\n  className?: string;\n  height?: string;\n}\n\nexport function MapLocationDisplay({ \n  language, \n  className, \n  height = \"400px\" \n}: MapLocationDisplayProps) {\n  const { data: siteSettings } = useSiteSettings();\n  \n  if (!siteSettings?.location_info || siteSettings.location_info.isActive === false) {\n    return null;\n  }\n\n  const { address, latitude, longitude } = siteSettings.location_info;\n  \n  // Get address with fallback\n  const addressToDisplay = address[language] || address.en || Object.values(address).find(addr => addr?.trim()) || '';\n  \n  if (!addressToDisplay) {\n    return null;\n  }\n\n  // Generate Google Maps embed URL\n  let embedUrl = '';\n  const mapKey = import.meta.env.VITE_GOOGLE_MAPS_API_KEY;\n  \n  if (Number.isFinite(latitude) && Number.isFinite(longitude)) {\n    // Use coordinates for precise location\n    if (mapKey) {\n      embedUrl = `https://www.google.com/maps/embed/v1/place?key=${mapKey}&q=${latitude},${longitude}&zoom=15`;\n    } else {\n      // Fallback to OpenStreetMap-based embed when no API key\n      embedUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${longitude-0.01},${latitude-0.01},${longitude+0.01},${latitude+0.01}&layer=mapnik&marker=${latitude},${longitude}`;\n    }\n  } else {\n    // Fallback to address search\n    const encodedAddress = encodeURIComponent(addressToDisplay);\n    if (mapKey) {\n      embedUrl = `https://www.google.com/maps/embed/v1/place?key=${mapKey}&q=${encodedAddress}&zoom=15`;\n    } else {\n      // Simple fallback without API key\n      embedUrl = `https://www.openstreetmap.org/export/embed.html?bbox=9.02,33.44,9.04,33.46&layer=mapnik`;\n    }\n  }\n\n  // Get localized labels\n  const locationLabel = {\n    en: 'Location',\n    fr: 'Emplacement', \n    de: 'Standort',\n    ar: 'الموقع'\n  }[language];\n\n  return (\n    <div className={cn(\"relative overflow-hidden rounded-lg\", className)} style={{ height }}>\n      {/* Google Maps Embed */}\n      <iframe\n        src={embedUrl}\n        width=\"100%\"\n        height=\"100%\"\n        style={{ border: 0 }}\n        allowFullScreen\n        loading=\"lazy\"\n        referrerPolicy=\"no-referrer-when-downgrade\"\n        title={`${locationLabel} - ${addressToDisplay}`}\n        data-testid=\"map-embed\"\n      />\n      \n      {/* Location Overlay */}\n      <div \n        className={cn(\n          \"absolute bottom-4 right-4 bg-black/90 text-white px-4 py-3 rounded-md shadow-lg max-w-xs\",\n          language === 'ar' && \"left-4 right-auto\"\n        )}\n        dir={language === 'ar' ? 'rtl' : 'ltr'}\n        data-testid=\"map-location-overlay\"\n      >\n        <h3 className={cn(\"font-semibold text-sm mb-1\", language === 'ar' && \"text-right\")}>\n          {locationLabel}\n        </h3>\n        <p className={cn(\"text-xs text-white/90 leading-relaxed\", language === 'ar' && \"text-right\")}>\n          {addressToDisplay}\n        </p>\n      </div>\n    </div>\n  );\n}","size_bytes":3047},"README.md":{"content":"# saghayra\nsite tourism guide\n","size_bytes":30},"client/src/components/Chatbot.tsx":{"content":"import React, { useState } from 'react';\n\ninterface Message {\n  sender: 'user' | 'bot';\n  text: string;\n}\n\nconst Chatbot: React.FC = () => {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState('');\n\n  const handleSend = () => {\n    if (!input.trim()) return;\n    const userMessage: Message = { sender: 'user', text: input };\n    setMessages([...messages, userMessage]);\n    setInput('');\n    // Réponse simple du bot\n    setTimeout(() => {\n      const botMessage: Message = {\n        sender: 'bot',\n        text: \"Bonjour ! Comment puis-je vous aider ?\"\n      };\n      setMessages(msgs => [...msgs, botMessage]);\n    }, 500);\n  };\n\n  return (\n    <div style={{ border: '1px solid #ccc', borderRadius: 8, padding: 16, width: 320, background: '#fff' }}>\n      <h3>Chatbot</h3>\n      <div style={{ height: 200, overflowY: 'auto', marginBottom: 8, background: '#f9f9f9', padding: 8 }}>\n        {messages.map((msg, idx) => (\n          <div key={idx} style={{ textAlign: msg.sender === 'user' ? 'right' : 'left', margin: '4px 0' }}>\n            <span style={{ background: msg.sender === 'user' ? '#d1e7dd' : '#e2e3e5', borderRadius: 4, padding: '4px 8px', display: 'inline-block' }}>\n              {msg.text}\n            </span>\n          </div>\n        ))}\n      </div>\n      <div style={{ display: 'flex', gap: 8 }}>\n        <input\n          type=\"text\"\n          value={input}\n          onChange={e => setInput(e.target.value)}\n          style={{ flex: 1, padding: 4 }}\n          placeholder=\"Votre message...\"\n          onKeyDown={e => e.key === 'Enter' && handleSend()}\n        />\n        <button onClick={handleSend} style={{ padding: '4px 12px' }}>Envoyer</button>\n      </div>\n    </div>\n  );\n};\n\nexport default Chatbot;\n","size_bytes":1768}},"version":1}